if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}if(typeof(YAHOO.Media)=="undefined"){YAHOO.Media={};}YUI.add("ult-linktrack",function(d){var c=d.namespace("Search");function a(j){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",f="",r,p,n,q,o,m,k,g=j.length,h=0;do{r=j.charCodeAt(h++);p=j.charCodeAt(h++);n=j.charCodeAt(h++);q=r>>2;o=((r&3)<<4)|(p>>4);m=((p&15)<<2)|(n>>6);k=n&63;if(isNaN(p)){m=k=64;}else{if(isNaN(n)){k=64;}}f+=(e.charAt(q)+e.charAt(o)+e.charAt(m)+e.charAt(k));}while(h<g);return f;}function b(g){for(var f=0,e=g.length;f<e;f++){if(g.charCodeAt(f)<32){return true;}}return false;}if(!c.ULT){c.ULT={};}d.mix(c.ULT,{BEACON_URL:"http://rds.yahoo.com/b.gif",SRC_SPACEID_KEY:"_S",beacon:function(f){var e=c.ULT.track_click(c.ULT.BEACON_URL,f)+"?t="+Math.random();(new Image()).src=e;},track_click:function(f,k){var h="\x03",g="\x04",e="_r",n=[],m=[],l,j;if(!d.Lang.isObject(k)){return f;}k[e]=2;l=0;d.each(k,function(o,i){if(!d.Lang.isString(o)){try{o=o.toString();}catch(p){return;}}if(i.length<1||i.length>8||i.indexOf(" ")!==-1||b(i)||b(o)){n=[];return;}n[l++]=i;});if(!n.length){return f;}n=n.sort();l=0;d.each(n,function(i){var o=k[i];m[l++]=i+h+o;});j=m.join(g);if(j.length<1||j.length>1024){return f;}j=";_ylc="+a(j);l=f.indexOf("/*");if(l===-1){l=f.indexOf("/?");}if(l===-1){l=f.indexOf("?");}if(l===-1){return f+j;}else{return f.substr(0,l)+j+f.substr(l);}}});},"1.0.0");YUI.add("highlighter",function(e){var m=e.Array,d="a",a="c",p="e",n="i",l="n",k="o",i="u",b="y",c={"\xC0":d,"\xC1":d,"\xC2":d,"\xC3":d,"\xC4":d,"\xC5":d,"\xE0":d,"\xE1":d,"\xE2":d,"\xE3":d,"\xE4":d,"\xE5":d,"\xC7":a,"\xE7":a,"\xC8":p,"\xC9":p,"\xCA":p,"\xCB":p,"\xE8":p,"\xE9":p,"\xEA":p,"\xEB":p,"\xCC":n,"\xCD":n,"\xCE":n,"\xCF":n,"\xEC":n,"\xED":n,"\xEE":n,"\xEF":n,"\xD1":l,"\xF1":l,"\xD2":k,"\xD3":k,"\xD4":k,"\xD5":k,"\xD6":k,"\xD8":k,"\xF2":k,"\xF3":k,"\xF4":k,"\xF5":k,"\xF6":k,"\xF8":k,"\xD9":i,"\xDA":i,"\xDB":i,"\xDC":i,"\xF9":i,"\xFA":i,"\xFB":i,"\xFC":i,"\xDD":b,"\xFD":b,"\xFF":b};function o(q){return q.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");}function j(q){return q.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1");}function h(q,r){var s=m.unique((r?q:q.toLowerCase()).split(/\s+/));return m.reject(s,function(t){return t==="";});}function f(s){var r="",t,q,u;for(t=0,q=s.length;t<q;t++){u=s.charAt(t);r+=c[u]||u;}return r;}function g(A,q,B){var y,t,r,z,s,v,x,w,u;if(!B){B={};}A=o(A);y=f(A);q=q.concat();for(t=0,r=q.length;t<r;++t){q[t]=f(j(o(q[t])));}if(B.startMatch){z="^(%needles)";}else{if(B.subwordMatch){z="(%needles)";}else{z="\\b(%needles)\\b";}}s=y.replace(new RegExp(z.replace("%needles",q.join("|")),B.caseSensitive?"g":"gi"),"<$1>");v="";x=0;for(t=0,r=s.length;t<r;t++){w=A.charAt(x);u=s.charAt(t);if(u==="<"){v+='<b class="yui3-highlighter">';}else{if(u===">"){v+="</b>";}else{x+=1;v+=w;}}}return v;}e.namespace("Search").Highlighter={phraseMatch:function(s,r,q){return g(r,[s],{caseSensitive:q});},startMatch:function(s,r,q){return g(r,[s],{caseSensitive:q,startMatch:true});},wordMatch:function(t,r,q){var s=h(t,true);return g(r,s,{caseSensitive:q});},subwordMatch:function(t,r,q){var s=h(t,true);return g(r,s,{caseSensitive:q,subwordMatch:true});}};},"@VERSION@",{requires:["array-extras"]});YUI.add("searchassist-core",function(c){var d=c.namespace("Search"),j="searchassist",J="node",y="enabled",e="state",G="tray",g="searchbox",s="assist",o="delegate",H="hasFocus",F="descendants",t="activeIndex",E="tabIndex",v=true,I=false,f=0,K=1,n=0,i=1,b="suggest",C="request",B="response",D="open",m="close",N="show",h="hide",z="refresh",M="keynav",k="sa-tray",r="sa-panel",l="sa-active",a="sa-hidden",L="sa-panel-desc",w="Env.Search.Assist.DataSource.callbacks",A=YUI.namespace(w);c.AssistBase=function(){c.Base.apply(this,arguments);};c.AssistBase.NAME="AssistBase";c.AssistBase.ATTRS=c.Base.ATTRS;c.extend(c.AssistBase,c.Base,{_processInitOnlyAttrs:function(){var P=this.constructor,O=c.bind(function(R,Q){if(R.initOnly){this.modifyAttr(Q,{readOnly:v});}},this);while(P){if(P.ATTRS){c.each(P.ATTRS,O);}P=P.superclass?P.superclass.constructor:null;}},_defInitFn:function(){c.Base.prototype._defInitFn.apply(this,arguments);this._processInitOnlyAttrs();}});function q(){q.superclass.constructor.apply(this,arguments);}c.mix(q,{NAME:j,ATTRS:{searchbox:{initOnly:v,setter:function(O){return c.one(O);}},minLength:{value:3},autoSuggest:{value:v},enabled:{value:v}}});c.extend(q,c.AssistBase,{initializer:function(O){this._query=d.Assist.Util.packString(O.originalQuery||"");this._timer=null;this.publish(b);var P=this.get(g);P.setAttribute("autocomplete","off");P.on("keydown",this._keyDown,this);},getQuery:function(){return this._query;},_keyDown:function(Q){if(!this.get("autoSuggest")){return;}var P=Q.keyCode,O=false;if(P<46&&P!==8&&P!==32){return;}if(this._timer){this._timer.cancel();}this._set(y,v);if(P===229||(P===197&&c.UA.opera)||(c.UA.gecko>0&&c.UA.os=="macintosh")){O=true;this.set("minLength",1);}this._timer=c.later(50,this,this._checkValue,null,O);},_checkValue:function(){if(!this.get(y)){return;}var O=d.Assist.Util.packString(this.get(g).get("value"));if(c.one("#yucs").getAttribute("data-property")==="finance"&&c.one("#yucs").getAttribute("data-lang")!=="zh-hant-hk"){minLength=1;}else{minLength=this.get("minLength");}if(O!==this._query&&(O.length>=minLength||this._query.length>=minLength)){this._query=O;this.fire(b,{query:O});}}});function x(){x.superclass.constructor.apply(this,arguments);}c.mix(x,{NAME:j+"-datasource",_cache:{},_tId:0,ATTRS:{generateRequestURI:{},callbackParam:{},globalCallback:{}}});c.extend(x,c.AssistBase,{initializer:function(O){this.publish(C,{defaultFn:c.bind("_defRequestFn",this)});this.publish(B,{defaultFn:c.bind("_defResponseFn",this)});c.each(O.initialCacheData||{},c.bind(function(R,Q){var P=this.get("generateRequestURI")(this,Q);
x._cache[P]=R;},this));},request:function(O,Q,P){this.fire(C,{query:O,callback:Q,params:P});},_defRequestFn:function(W){function T(ac,ab,ad){return ac+(ac.indexOf("?")===-1?"?":"&")+encodeURIComponent(ab)+"="+encodeURIComponent(ad);}var aa=this,X=W.query,Q=this.get("generateRequestURI")(this,X),Y=Q,V=x._cache[Y],S,Z,O,U,R,P;if(V){this.fire(B,c.mix({uri:Q,data:V},W));return;}S=this.get("callbackParam");Z=this.get("globalCallback");if(S){O=x._tId++;A[O]=c.bind(function(ab){this.fire(B,c.mix({uri:Y,data:ab},W));delete A[O];},this);Q=T(Q,S,"YUI."+w+"["+O+"]");}else{if(Z){window[Z]=function(ab){aa.fire(B,c.mix({uri:Y,data:ab},W));};}}P="";R=16+Math.floor(Math.random()*16);for(U=0;U<R;U++){P+=Math.floor(10*Math.random());}Q=T(Q,"rnd",P);c.each(W.params||{},function(ac,ab){Q=T(Q,ab,ac);});c.Get.script(Q,{onEnd:function(ab){ab.purge();}});},_defResponseFn:function(P){var O=P.callback;if(O){O(P);}if(P.data&&!P.data.cached){x._cache[P.uri]=P.data;P.data.cached=v;}}});function p(){p.superclass.constructor.apply(this,arguments);}c.mix(p,{NAME:j+"-tray",OPEN:f,CLOSED:K,ATTRS:{node:{initOnly:v,setter:function(O){return c.one(O);}},state:{initOnly:v,value:K},assist:{initOnly:v}}});c.extend(p,c.AssistBase,{initializer:function(){this.publish(D,{defaultFn:c.bind("_defOpenFn",this)});this.publish(m,{defaultFn:c.bind("_defCloseFn",this)});var O=this.get(J);if(!O){O=c.Node.create("<div></div>");c.one("body").append(O);this._set(J,O);}O.addClass(k);if(this.isClosed()){O.addClass(a);}if(c.UA.ie){O.addClass("ie"+c.UA.ie);if(document.compatMode==="BackCompat"){O.addClass("quirksmode");}}},open:function(O){if(this.isClosed()){this._set(e,f);this.fire(D,{auto:!!O});}},close:function(){if(this.isOpen()){this._set(e,K);this.fire(m);}},toggle:function(){if(this.isClosed()){this.open();}else{this.close();}},isOpen:function(){return(this.get(e)!==K);},isClosed:function(){return(this.get(e)!==f);},_defOpenFn:function(){this.get(J).removeClass(a);},_defCloseFn:function(){this.get(J).addClass(a);}});function u(){u.superclass.constructor.apply(this,arguments);}c.mix(u,{NAME:j+"-traypanel",VISIBLE:n,HIDDEN:i,ATTRS:{tray:{initOnly:v},node:{initOnly:v,setter:function(O){return c.one(O);}},state:{initOnly:v,value:i},delegate:{initOnly:v,value:I},hasFocus:{readOnly:v,value:I},descendants:{value:"ul:not(#yucs-content-qry) li a:not(#searchAll)",getter:function(O){return this.get(J).all(O);}},activeIndex:{readOnly:v,value:-1},descText:{}}});c.extend(u,c.AssistBase,{initializer:function(){this.publish(N,{defaultFn:c.bind("_defShowFn",this)});this.publish(h,{defaultFn:c.bind("_defHideFn",this)});this.publish(z,{defaultFn:c.bind("_defRefreshFn",this)});this.publish(M,{defaultFn:c.bind("_defKeyNavFn",this)});var P=this.get(G),T=this.get(G).get(s),O=this.get(o),Q=this.get(J),S=this.get("descText"),R;if(!Q){Q=c.Node.create("<div></div>");P.get(J).append(Q);this._set(J,Q);}Q.addClass(r);if(this.isHidden()){Q.addClass(a);}if(S){Q.append(c.Node.create('<p class="'+L+'">'+S+"</p>"));}R=O?T.get(g):Q;R.on("keydown",this._handleKeyDown,this);P.on(D,this._handleTrayOpen,this);if(!O){Q.on("focus",function(){this._set(H,v);},this);Q.on("blur",function(){this._set(H,I);},this);}this.after(F+"Change",this._initDescendants,this);},show:function(){if(this.isHidden()){this._set(e,n);this.fire(N);}},hide:function(){if(this.isVisible()){this._set(e,i);this.fire(h);}},toggle:function(){if(this.isHidden()){this.show();}else{this.hide();}},isVisible:function(){return(this.get(e)!==i);},isHidden:function(){return(this.get(e)!==n);},focus:function(){var O=this.get(F).item(this.get(t));if(this.get(o)){this._set(H,v);if(O){O.addClass(l);}}else{if(O){try{O.focus();}catch(P){}}}},blur:function(){var O=this.get(F).item(this.get(t));if(this.get(o)){this._set(H,I);if(O){O.removeClass(l);}}},refresh:function(Q,P,O){this.blur();this.fire(z,{query:Q,data:P,altText:O});},hasFocusableDescendants:function(){return this.get(F).size()>0;},_handleKeyDown:function(O){if(!this.get(H)){return;}if(O.altKey||O.ctrlKey||O.metaKey||O.shiftKey){return;}switch(O.keyCode){case 27:case 37:case 38:case 39:case 40:O.halt();this.fire(M,O);break;}},_handleTrayOpen:function(){this._initDescendants();},_initDescendants:function(){var O=this.get(o),P=this.get(H);this._set(t,0);this.get(F).each(c.bind(function(R,Q){if(Q===0){R.set(E,O?-1:0);if(P){R.addClass(l);}}else{R.set(E,-1);R.removeClass(l);}},this));},_defShowFn:function(){this._initDescendants();this.get(J).removeClass(a);},_defHideFn:function(){this.get(J).addClass(a);this.blur();},_defKeyNavFn:function(T){var U=this.get(F),O=this.get(t),R=this.get(o),S=U.item(O),Q;switch(T.keyCode){case 38:if(O>0){O--;}break;case 40:if(O<U.size()-1){O++;}break;}if(O!==this.get(t)){Q=U.item(O);S.removeClass(l);Q.addClass(l);this._set(t,O);if(!R){S.set(E,-1);Q.set(E,0);if(this.get(H)){try{Q.focus();}catch(P){}}}}},_defRefreshFn:function(O){}});d.Assist=q;d.Assist.DataSource=x;d.Assist.Tray=p;d.Assist.TrayPanel=u;d.Assist.Util={packString:function(O){return O.replace(/^\s*/,"").replace(/\s+/g," ");},getFormField:function(R,P){var O=R.all("input"),Q;O.each(function(S){if(S.get("name")===P){Q=S;}});return Q;},getFormParam:function(Q,O){var P=this.getFormField(Q,O);return P?P.get("value"):null;},getEnableSearchAssist:function(){var O=document.cookie.match(/(?:^|\s*;\s*)SP=(?:[^&]*&)?a=(\d)(?:&|;)?/);return O&&O[1]==="0"?false:true;},truncate:function(S,O,P){var Q,R;S=c.Lang.trim(S);if(O<=0||S.length<=O){return S;}P=P?P.split(/\s+/):[];for(Q=0;Q<P.length;++Q){R=P[Q];if(R.length>3){S=S.replace(new RegExp("(?:^|\\s+)"+R+"(?:\\s+)?","gi"),"...");if(S.length<=O){return S;}}}return c.Lang.trim(S.substr(0,O-3)).replace(/\.+$/,"")+"...";},buildSearchUrl:function(Q,T,R,V){var S=Q.get("form"),P=R||S.get("action"),O=S.all("input,select,textarea"),U=[];if(!V){V={};}O.each(function(Y){var X,W;if(Y.get("tagName").toLowerCase()==="input"){switch(Y.get("type")){case"button":case"image":case"reset":case"submit":return;case"checkbox":case"radio":if(!Y.get("checked")){return;
}break;}}X=Y.get("name");if(X===Q.get("name")){W=T;}else{if(!V[X]){W=Y.get("value");}}if(W){U.push(encodeURIComponent(X)+"="+encodeURIComponent(W));}});c.each(V,function(X,W){U.push(encodeURIComponent(W)+"="+encodeURIComponent(X));});return P+(P.indexOf("?")===-1?"?":"&")+U.join("&");}};c.on("unload",function(){},window);},"1.0.0",{requires:["base-base","get","node-base","node-style","event-focus"]});YUI.add("searchassist-gossip",function(a){var i=a.Search.Assist,c="node",b="scrollSize",l="scrollIndex",f="children",d=true,k="sa-gossip",n="sa-spayt",o="sa-scroll-up",h="sa-scroll-down",m="sa-disabled",g="sa-hidden",j="sa-alt-text";function e(){e.superclass.constructor.apply(this,arguments);}a.mix(e,{NAME:"searchassist-gossip",ATTRS:{maxLength:{value:0},descText:{value:"Search suggestions"},scrollSize:{value:5},scrollIndex:{readOnly:d,value:-1},scrollUpText:{value:"Scroll suggestions up"},scrollDownText:{value:"Scroll suggestions down"},linkTitle:{},linkTarget:{},linkStem:{},linkParams:{}}});a.extend(e,i.TrayPanel,{initializer:function(){var p=this.get(c);p.addClass(k);this._buttonUp=a.Node.create('<a href="#" '+'class="'+o+'" '+'title="'+this.get("scrollUpText")+'" '+'tabindex="-1"></a>');this._buttonUp.on("click",this._handleButtonUpClick,this);p.append(this._buttonUp);this._buttonDown=a.Node.create('<a href="#" '+'class="'+h+'" '+'title="'+this.get("scrollDownText")+'" '+'tabindex="-1"></a>');this._buttonDown.on("click",this._handleButtonDownClick,this);p.append(this._buttonDown);this.on("activeIndexChange",this._handleActiveIndexChange,this);this.after(l+"Change",this._afterScrollIndexChange,this);},scrollUp:function(){if(!this._list){return;}var q=this.get(l)-1,p;if(q<0){return;}p=this._list.get(f);p.item(q+this.get(b)).addClass(g);p.item(q).removeClass(g);this._set(l,q);},scrollDown:function(){if(!this._list){return;}var q=this.get(l),p=q+this.get(b),r=this._list.get(f);if(p>=r.size()){return;}r.item(q).addClass(g);r.item(p).removeClass(g);this._set(l,q+1);},hasSuggestions:function(){return this.hasFocusableDescendants();},_defRefreshFn:function(v){var x=this.get("tray").get("assist").get("searchbox"),r=this.get(c),w=v.query,u=v.data,z=v.altText,A=this.get("linkTitle"),y=this.get("linkTarget"),s="<ul>",q="",p=a.one("#yucs-satray").getAttribute("data-vsearchAll"),t="";if(p){p=p.substring(1);}else{p="";}financeLookup="https://finance.yahoo.com/lookup"+p+"?uhb="+a.one("#yucs-satray").getAttribute("data-vfr")+"&fr="+a.one("#yucs-satray").getAttribute("data-searchNews")+"&s=";if(this._list){this._list.remove();this._list=null;}if(this._altText){this._altText.remove();this._altText=null;}if(u&&u.length>this.get(b)){this._buttonUp.removeClass(g);this._buttonDown.removeClass(g);}else{this._buttonUp.addClass(g);this._buttonDown.addClass(g);}if(w===""||(u&&!u.length)){if(z){this._altText=a.Node.create('<p class="'+j+'">'+z+"</p>");r.append(this._altText);this.show();}else{this.hide();}return;}this.show();a.each(u,a.bind(function(D,F){var B="http://finance.yahoo.com/q?s=",E=null,M=null,K=null;var G='<li pos="'+(F+1)+'"';if(a.one("#yucs").getAttribute("data-property")==="finance"&&a.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){E=['<span class="symbol">',a.Search.Highlighter.subwordMatch(w,i.Util.truncate(D[0],this.get("maxLength"),w)),"</span> "];M=['<span class="name">',a.Search.Highlighter.subwordMatch(w,i.Util.truncate(D[1],this.get("maxLength"),w)),"</span> "];K=['<span class="exch_type_wrapper">',D[2],"</span>"];var L=D[0]+D[1]+D[2],J=D[3];}else{if(a.one("#yucs").getAttribute("data-property")==="travel"){var L=D[0],J=D[2];this.get("linkParams").redir=D[1];}else{var L=D[0],J=D[1];}}var H=a.Search.Highlighter.subwordMatch(w,i.Util.truncate(L,this.get("maxLength"),w)),C=[];if(J===1){C.push(n);H+="?";}if(F>=this.get(b)){C.push(g);}if(C.length>0){G+=' class="'+C.join(" ")+'"';}if(a.one("#yucs").getAttribute("data-property")==="finance"&&a.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){var I=i.Util.buildSearchUrl(x,B+D[0]+"&ql=0",this.get("linkStem"),this.get("uhbParams"));I=I.replace("ush1-finance_uh3_02",a.one("#yucs-satray").getAttribute("data-searchNews"));I+="&s="+D[0];G+='><a href="'+I+'" text="'+D[0]+","+'"';}else{if(a.one("#yucs").getAttribute("data-property")==="travel"){G+='><a href="'+i.Util.buildSearchUrl(x,L,this.get("linkStem"),this.get("linkParams"))+'" text="'+L.replace(/\"/g,"&quot;")+'"';}else{G+='><a href="'+i.Util.buildSearchUrl(x,L,this.get("linkStem"),this.get("linkParams"))+'" text="'+L.replace(/\"/g,"&quot;")+'"';}}if(A){G+=' title="'+A.replace("#{q}",L).replace(/\"/g,"&quot;")+'"';}if(y){G+=' target="'+y+'"';}if(a.one("#yucs").getAttribute("data-property")==="finance"&&a.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){G+=">"+E.join("")+M.join("")+K.join(""),+"</a></li>";}else{G+=">"+H+"</a></li>";}s+=G;},this));if(a.one("#yucs").getAttribute("data-property")==="finance"&&a.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){t=w.lastIndexOf(",");if(t!==-1){w=w.substring(t+1);}q='<li><a id ="searchAll" text=" " class="financeLookup" href="'+financeLookup+encodeURIComponent(w)+'">Show all results for '+a.Escape.html(w)+"</a></li>";s+=q;}s+="</ul>";this._list=a.Node.create(s);r.one(">p").insert(this._list,"after");this._set(l,0);this._initDescendants();},_handleActiveIndexChange:function(q){if(!this._list){return;}var p=q.newVal;if(p<this.get(l)){while(p<this.get(l)){this.scrollUp();}}else{while(p>=this.get(l)+this.get(b)){this.scrollDown();}}},_afterScrollIndexChange:function(q){var p=this._list.get(f);this._buttonUp.removeClass(m);this._buttonDown.removeClass(m);if(q.newVal<=0){this._buttonUp.addClass(m);}else{if(q.newVal>=p.size()-this.get(b)){this._buttonDown.addClass(m);}}},_handleButtonUpClick:function(p){p.halt();this.scrollUp();},_handleButtonDownClick:function(p){p.halt();this.scrollDown();}});i.Gossip=e;},"1.0.0",{requires:["searchassist-core","highlighter"]});YUI.add("gossip-aria-plugin",function(b){function a(){a.superclass.constructor.apply(this,arguments);
}b.mix(a,{NAME:"gossip-aria-plugin",NS:"aria",ATTRS:{suggestions_available:{value:"Search suggestions are available, use the up and down arrow keys to review them."},no_suggestion_available:{value:"No suggestion is available."}}});b.extend(a,b.Plugin.Base,{initializer:function(){this._liveRegion=b.Node.create('<div role="status" aria-live="polite"></div>');var c=this._liveRegion;b.one("body").append(c);c.setStyles({position:"absolute",left:"-9999px"});this.doAfter("refresh",this._handleRefresh,this);},_updateLiveRegion:function(d){var c=b.Node.create("<p></p>");c.setContent(d);this._liveRegion.all("*").remove();this._liveRegion.append(c);},_handleRefresh:function(){var c=this.get("host").get("descendants").size()>0?this.get("suggestions_available"):this.get("no_suggestion_available");this._updateLiveRegion(c);}});b.Search.Assist.GossipAriaPlugin=a;},"1.0.0",{requires:["searchassist-core","plugin","base-pluginhost"]});YUI.add("srp-preload-plugin",function(a){function b(){b.superclass.constructor.apply(this,arguments);}a.mix(b,{NAME:"srp-preload-plugin",NS:"preload",ATTRS:{url:{value:"http://search.yahoo.com/resources?js=1"}}});a.extend(b,a.Plugin.Base,{initializer:function(c){var d=c.host.get("searchbox").on("keydown",function(){a.Get.script(this.get("url"));d.detach();},this);}});a.Search.Assist.SrpPreloadPlugin=b;},"1.0.0",{requires:["searchassist-core","plugin","base-pluginhost"]});YUI.add("miniassist",function(d){var m=d.Search,c=m.Assist,t="node",k="parentNode",f="searchbox",h="value",a="hasFocus",b="activeIndex",e="descendants",s="spaceid",g="logdata",q="action",j=true,o=false,l="Change",n="sa-settings",r="sa-spayt",i=0;function p(){p.superclass.constructor.apply(this,arguments);}d.mix(p,{NAME:"miniassist",ATTRS:{searchbox:{initOnly:j,setter:function(u){return d.one(u);}},node:{initOnly:j,setter:function(u){return d.one(u);}},url:{value:"http://sugg.us.search.yahoo.net/gossip-us-sayt/"},nresults:{value:10},settingsText:{value:"Settings"},settingsUrl:{value:"http://search.yahoo.com/preferences/preferences?page=search_assist"},spaceid:{value:"2142478948"},origin:{},logdata:{},pubid:{},align:{value:o},shim:{value:0},preloadsrp:{value:o}}});d.extend(p,d.AssistBase,{initializer:function(){this._initComponents.apply(this,arguments);this._attachEvents();},_initComponents:function(u){var w=this.getEnableSearchAssist(),v=function(z,y,x){return d.mix(z,y||{},x,null,0,true);};this.assist=new m.Assist(v({searchbox:this.get(f),autoSuggest:w},u.assist));this.source=new c.DataSource(v({globalCallback:"yasearch",generateRequestURI:d.bind(this._generateRequestURI,this)},u.source,true));window.fxsearch=function(x){if(x.Result){var y={q:x[0],f:["k","m"],r:[]};d.each(x.Result,function(A){var z=new Array(),B="";z[0]=A.symbol;z[1]=A.name;if(A.typeDisp){B=A.typeDisp+"-";}if(A.exchDisp){B+=A.exchDisp;}else{B+=A.exch;}z[2]=B;z[3]=0;y.r.push(z);});}else{var y={q:x[0],f:["k","m"],r:[]};d.each(x[1],function(z){y.r.push([z,0]);});}window.yasearch(y);};YAHOO.util.UHScriptNodeDataSource.callbacks=function(x){window.fxsearch(x.ResultSet);};this.tray=new c.Tray(v({assist:this.assist,node:this.get(t)},u.tray));if(this.get("align")){this.tray.plug(c.TrayAlignPlugin,((u.tray&&u.tray.plugin!==undefined)?u.tray.plugin:""));}if(this.get("shim")===2||this.get("shim")===1&&d.UA.ie<=6){this.tray.plug(c.TrayShimPlugin);}this.gossip=new c.Gossip(v({tray:this.tray,delegate:j,linkParams:{fr2:"sa-gp"}},u.gossip));this.gossip.plug(c.GossipAriaPlugin,u.aria||{});this.tray.get(t).append(d.Node.create("<a "+'href="'+this.get("settingsUrl")+'" '+'class="'+n+'"'+">"+this.get("settingsText")+"</a>"));if(this.get("preloadsrp")){this.plug(c.SrpPreloadPlugin,u.preload||{});}},_attachEvents:function(){var u=this,v=this.get(f);function x(){var B=u.gossip.get(e).item(u.gossip.get(b)),C="",z=-1,A,E=d.one("#yucs").getData("property"),D=d.one("#yucs").getData("lang"),y=v.get(h);if(E==="finance"&&D!=="zh-hant-hk"){A=y.match(/,/g)||[];}else{A=[];A.length=0;C=B.getAttribute("text");}if(A.length===1){C=B.getAttribute("text");}else{if(A.length===2){z=y.indexOf(",");}else{y=y.substring(0,y.length-1);z=y.lastIndexOf(",");}}if(z!==-1){if(E!=="finance"){C=B.getAttribute("text");}else{this.pqstr=y.substring(z+1);C="";C=y.replace(new RegExp(RegExp.escape(this.pqstr)+"$"),B.getAttribute("text"));}}v.set(h,C);}RegExp.escape=function(y){return y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");};function w(){this._invalidTrayContent=true;}this.assist.on("suggest",function(y){if(d.one("#yucs").getAttribute("data-property")==="finance"&&d.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){if(y.query.length<1){this.gossip.refresh("");}else{this.source.request(y.query,d.bind(this._handleGossipResponse,this));}}else{if(y.query.length<this.assist.get("minLength")){this.gossip.refresh("");}else{this.source.request(y.query,d.bind(this._handleGossipResponse,this));}}},this);v.on("keydown",function(C){switch(C.keyCode){case 27:C.halt();this.gossip.hide();break;case 40:C.halt();if(this.assist.get("autoSuggest")){if(this._invalidTrayContent){this.source.request(v.get(h),d.bind(function(D){this._invalidTrayContent=false;this._handleGossipResponse(D);this.gossip.focus();this.pqstr=v.get(h);x.call(this);},this));}else{if(this.gossip.hasSuggestions()){this.gossip.show();if(!this.gossip.get(a)){this.gossip.focus();if(d.one("#yucs").getAttribute("data-property")==="finance"&&d.one("#yucs").getAttribute("data-lang")!="zh-hant-hk"){var y=v.get(h),z=y.lastIndexOf(","),A=u.gossip.get(e).item(u.gossip.get(b)),B="";if(z!==-1){this.pqstr=y.substring(z+1);B=y.replace(this.pqstr,A.getAttribute("text"));}else{B=A.getAttribute("text");}v.set(h,B);}else{this.pqstr=v.get(h);x.call(this);}}}}}break;}},this);this.gossip.on("keynav",function(y){if(y.keyCode===27||y.keyCode===38&&this.gossip.get(b)===0){this.gossip.blur();this.pqstr=this.pqstr?this.pqstr:"";v.set(h,this.pqstr);}},this);this.gossip.after(b+l,function(y){if(this.gossip.get(a)){x.call(this);}},this);this.gossip.on("show",function(){this.tray.open();
},this);this.gossip.on("hide",function(){this.tray.close();},this);d.one(document).on("mousedown",function(A){var z=A.target,y=this.get(f);if(!this.tray.get(t).contains(z)&&z!==y&&((z.get("tagName")!=="INPUT"&&z.get("tagName")!=="BUTTON")||z.get("type")!=="submit"&&z.get("form")!==y.get("form"))){this.gossip.hide();}},this);this.gossip.on(a+l,function(y){this.assist.set("enabled",!y.newVal);},this);this.gossip.get(t).on("click",this._handleGossipClick,this);this.get(f).get("form").on("submit",this._handleSearchFormSubmit,this);this.gossip.after("refresh",function(){var y=this.gossip.get(t).one("."+r);if(y){i=3;}else{if(i===2||i===3){i=2;}else{i=1;}}},this);this.on("url"+l,w,this);this.on("pubid"+l,w,this);},_generateRequestURI:function(z,y){if(d.one("#yucs").getAttribute("data-property")==="finance"&&d.one("#yucs").getAttribute("data-lang")!=="zh-hant-hk"){var v=y.lastIndexOf(",");if(v!==-1){y=y.substring(v+1);}}var x=this.get("url").split("?"),u=x[0]+"?output=yjsonp&l=1"+"&command="+encodeURIComponent(y)+"&nresults="+this.get("nresults")+((x.length>1)?("&"+x[1]):("")),w=this.get("pubid");if(w==="666"){var u=this.get("url")+"?query="+encodeURIComponent(y)+"&region=US&lang=en-US&callback=YAHOO.util.UHScriptNodeDataSource.callbacks";return u;}if(w){u+="&pubid="+w;}return u;},_handleGossipResponse:function(u){if(u.query===this.packString(this.get(f).get(h))){this._gprid=u.data.i;this.gossip.refresh(u.query,u.data.r);}},_handleGossipClick:function(B){var z=B.target,y=this.get(f).get("form"),w=(function(){while(z&&z.get("tagName").toUpperCase()!=="A"){z=z.get(k);}return z;}()),x=w.get(k),v=w.get("href"),u=this.get("origin"),A={fr:this.getFormParam(y,"fr"),fr2:"sa-gp",origin:u?u:location.hostname,query:w.getAttribute("text"),pqstr:this.pqstr||"",gprid:this._gprid||"",n_gps:this.gossip.get(e).size(),pos:x.getAttribute("pos"),sac:x.hasClass(r)?2:1,sao:i};d.mix(A,this.get(g));A[m.ULT.SRC_SPACEID_KEY]=this.get(s);v=m.ULT.track_click(v,A);w.set("href",v);},_handleSearchFormSubmit:function(z){var x,v,w=z.target,u=this.get("origin"),y={fr:this.getFormParam(w,"fr"),origin:u?u:location.hostname,query:this.get(f).get(h),n_gps:this.gossip.get(e).size(),sao:i};if(this.gossip.get(a)){x=this.gossip.get(e).item(this.gossip.get(b));v=x.get(k);d.mix(y,{fr2:"sa-gp",pqstr:this.pqstr||"",gprid:this._gprid||"",pos:v.getAttribute("pos"),sac:v.hasClass(r)?2:1});d.each(this.gossip.get("linkParams"),d.bind(function(B,A){var C=this.getFormField(w,A);if(C){C.set(h,B);}else{w.append(d.Node.create('<input type="hidden" name="'+A+'" value="'+B+'">'));}},this));}d.mix(y,this.get(g));y[m.ULT.SRC_SPACEID_KEY]=this.get(s);w.set(q,m.ULT.track_click(w.get(q),y));}});d.mix(p,c.Util,true,null,4);m.MiniAssist=p;},"1.0.0",{requires:["searchassist-gossip","gossip-aria-plugin","ult-linktrack"],use:["tray-align-plugin","tray-shim-plugin"]});