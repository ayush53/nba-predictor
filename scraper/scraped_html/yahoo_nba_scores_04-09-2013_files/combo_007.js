
/* content-manager.js 1733424 */ YUI.add("media-content-manager",function(h){var f="ContentManager",a="content-manager:",e="request-manager:",c="media:remove-node",b="yog-type-index",g="yog-type-content",d="nav-collapse";h.namespace("Media")[f]=h.Base.create("media-content-manager",h.Base,[],{initializer:function(j){var i=this;j=j||{};i.setAttrs({nodePaths:j.nodePaths||{},transition:j.transition||{},scrollToNext:j.scrollToNext||{},bodyNode:h.one("body"),pageChrome:h.Media.pageChrome,refreshRightRailContent:(parseInt(j.refreshRightRailContent,10)||0),lastIndexPath:h.Media.pageChrome.getGridType()==="index"?window.location.pathname:null,enablePersistentMods:j.enablePersistentMods||false});i._initEventListener();if(i.get("scrollToNext.enabled")){i._setupScrollToNextTrigger()}return i},toggleContentNode:function(p,r){var u=this,k=h.one("body"),m=h.one(u.get("nodePaths.content")),j=u.get("transition.style"),t=u.get("pageChrome"),i=t.getDevice(),q=h.one("#yog-np"),s=h.one(u.get("nodePaths.related")),n,l,o;r=r||{};if(m){if(j==="none"){if(p){k.replaceClass("wait-cursor-on","wait-cursor-off")}else{k.addClass("wait-cursor-on")}}else{if(j==="fade"){if(p){if(i!=="full"){m.replaceClass("content-fade-out","content-fade-in")}else{if(q&&s){m.replaceClass("content-fade-out","content-fade-in");q.replaceClass("content-fade-out","content-fade-in");s.replaceClass("content-fade-out","content-fade-in")}}}else{if(i!=="full"){m.addClass("content-fade-out")}else{if(k&&q&&s){if(k.hasClass("yog-type-index")){m.addClass("content-fade-out");q.addClass("content-fade-out");s.addClass("content-fade-out")}else{m.addClass("content-fade-out")}}}}}else{if(j==="slide"){l=r.transitionFeature;o=l==="scroll-to-next";if(p){m.removeClass(u.get("transition.class"));if(!o){m.removeClass("slide-out-sticky")}}else{if(!o){m.addClass("slide-out-sticky")}n="slide-out-"+u._getRequestGridType(r.requestGridType||"")+(l?"-"+l:"");m.addClass(n);u.set("transition.start",new Date().getTime());u.set("transition.class",n)}}}}}},_renderContent:function(O){var B=this,L=O.markup,E=h.Node.create(L),w=B.get("pageChrome"),l=B.get("bodyNode"),k=B._transitionFinishIn(),q=O.persistentData,J=O.requestMetadata||{},x,j=B._getPageMetaField("gridtype","index"),y=B._getPageMetaField("navtype",""),M=B._getPageMetaField("theme","default"),m=B._getPageMetaField("theme_css",""),H=B._getPageMetaField("theme_glass_css",""),C=B._getPageMetaField("theme_imagery_css",""),D=w.getGridType(),p,G=B._getPageMetaField("contentuuid",""),u=B._getPageMetaField("spaceid"),o=B.get("nodePaths"),K=o.content,z=o.related,s=o.navigation,F=o.superlead,t=h.one(K),i=h.one(z),n=h.one(s),v=h.one(F),N=E.one(K),r=E.one(z),I=E.one(s),A=E.one(F);w.setSpaceId(u);if(k<0){B._handleGridTypeChange(j);B._handleNavTypeChange(y);B._handleThemeChange(M,m,H,C);B._handlePersistentModules(t,N);h.Global.fire(c,{node:t});t.setHTML(N.getHTML());t.setStyle("visibility","hidden");h.later(10,this,function(){t.setStyle("visibility","")});B.toggleContentNode(true);B._handleContentChange(G,O.path,q);p=l.hasClass("scroll-bandit");if(!p||j!=="content"){window.scroll(0,0);if("smartphone"===w.getDevice()){l.one("#yog-bd").set("scrollTop",0)}}}else{x=J.transitionFeature==="scroll-to-next";if(x){N.addClass("background")}t.get("parentNode").insertBefore(N,t);setTimeout(function(){h.Global.fire(c,{node:t});t.remove(true);B._handleGridTypeChange(j);B._handleNavTypeChange(y);if(x){N.removeClass("background")}B._handleContentChange(G,O.path,q);p=l.hasClass("scroll-bandit");if((j==="content"&&!p)||j!=="content"){window.scroll(0,0)}},k)}if(((j==="index"||D==="index")&&i&&r)||(j==="content"&&B.get("refreshRightRailContent"))){h.Global.fire(c,{node:i});B._handlePersistentModules(i,r);i.setHTML(r.getHTML())}if(v&&A){h.Global.fire(c,{node:v});B._handlePersistentModules(v,A);v.setHTML(A.getHTML())}if(n&&I){h.Global.fire(c,{node:n});B._handlePersistentModules(n,I);n.setHTML(I.getHTML())}},_initEventListener:function(){var i=this;h.Global.on(e+"page-requested",i._handleContentRequested,i);h.Global.on(e+"content-ready",i._renderContent,i);h.Global.on(e+"metadata-ready",i._handleMetadataReady,i)},_handleContentRequested:function(j){var i=this;i.toggleContentNode(false,j)},_handleMetadataReady:function(k){var i=this,j;i.page={};if(k.json){j=k.json;h.Array.each(["gridtype","navtype","contenttype","contentuuid","spaceid","theme","theme_css","theme_glass_css","theme_imagery_css"],function(l){if(typeof j[l]!=="undefined"){i.page[l]=j[l]}})}},_handlePersistentModules:function(l,k){var j=this,i=false;if(!j.get("enablePersistentMods")){return false}i=k.all("div.yom-persist");if(i){i.each(function(m){var n="#"+m.get("id");if(l.one(n)){k.one(n).setHTML(l.one(n).getHTML())}})}},_transitionFinishIn:function(){var i=this,j=i.get("transition");if(j.style!=="slide"){return -1}return(j.start||0)+j.duration-new Date().getTime()},_getPageMetaField:function(l,j){var k=this,i;if(typeof j==="undefined"){j=""}i=k.page[l]||j;return i},_handleGridTypeChange:function(j){var i=this,k=i.get("bodyNode"),l=i.get("pageChrome");if(k){if(j==="index"){if(!k.hasClass(b)){k.replaceClass(g,b)}}else{if(!k.hasClass(g)){k.replaceClass(b,g)}}}l.setGridType(j);h.Global.fire(e+"before-active-content-change");h.Global.fire(a+"before-active-content-change")},_handleNavTypeChange:function(i){var j=this,k=j.get("bodyNode");if(k){if(i==="collapse"){if(!k.hasClass(d)){k.addClass(d)}}else{if(k.hasClass(d)){k.removeClass(d)}}}},_handleThemeChange:function(n,k,r,t){var l=h.all("link")._nodes,u=null,o="",s="",q="",p="",j="";l=h.all("link")._nodes;u=null;for(var m=0;m<l.length;m++){o=l[m].getAttribute("href");if(o.match(/v[0-9]+_base/)){u=l[m];break}}if(!u){return false}s=u.getAttribute("href");q=s.match("/media/themes/(v[0-9]+_(?!base)[^/]+)/");if(h.Lang.isArray(q)&&q.length>1){p=q[1]}if(p==n||!p||!s){return false}j=k.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){k=j[1]}j=r.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){r=j[1]}j=t.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){t=j[1]}if(!k||!r||!t){return false}s=s.replace(new RegExp("/"+p+"/theme-min-[0-9]*.css"),k);s=s.replace(new RegExp("/"+p+"/theme-glass-min-[0-9]*.css"),r);s=s.replace(new RegExp("/"+p+"/theme-imagery-min-[0-9]*.css"),t);u.setAttribute("href",s)},_handleContentChange:function(k,n,o){var j=this,m=j.get("pageChrome"),i=m.getGridType(),l;m.setContentId(k);h.Global.fire(e+"loaded",{uuid:k});l={uuid:k,data:o,lastIndexPath:i==="index"?null:j.get("lastIndexPath")};h.Global.fire(e+"active-content-changed",l);h.Global.fire(a+"active-content-changed",l);if(i==="index"){j.set("lastIndexPath",n)}},_getRequestGridType:function(j){var i=this;if(!j){j=i.get("pageChrome").getGridType()==="content"?"index":"content"}if(j!=="index"&&j!=="content"){j="content"}return j},_setupScrollToNextTrigger:function(){var s=this,o=window.innerHeight,n=h.one(s.get("nodePaths.content")).get("parentNode"),r,q=false,l=false,k,j=(h.UA.android||!h.UA.touchEnabled)?"tap":"scroll",i=h.UA.android?false:true,p=s.get("scrollToNext."+j+"Text"),m=s.get("scrollToNext."+j+"ReturnText");r=n.appendChild('<div class="yom-scroll-to-next-trigger"></div>');h.Global.on(e+"page-requested",s._archiveStreamItems,s);h.Global.on(a+"active-content-changed",function(){var t;k=null;if(s.get("enableTriggerNode")){t=s.getNextStreamItem(window.location.pathname);if(t){k=t;r.setHTML(p)}else{if(s.get("pageChrome").getGridType()==="content"){k=s.get("lastIndexPath");r.setHTML(m)}}}r.setStyle("display",k?"block":"none")});if(j==="scroll"){n.on("touchend",function(){if(k){if(!q){if(window.innerHeight>o){o=window.innerHeight}}else{if(!l&&document.height-window.scrollY-o<-40){l=true}}}});if(typeof window.onorientationchange!=="undefined"){h.on("orientationchange",function(){o=window.innerHeight})}}else{r.on("click",function(){if(q){s._triggerPage(k)}})}h.one(window).on("scroll",function(){if(k&&!q&&(document.height-window.scrollY-o<50||!i)){r.setStyle("opacity",1);q=true}if(l){s._triggerPage(k);l=false}});h.Global.on(e+"page-requested",function(){if(q){q=false;r.setStyle("opacity",0)}})},_triggerPage:function(i){h.Global.fire(e+"page-request-metadata",{requestGridType:"content",transitionFeature:"scroll-to-next"});h.Global.fire(e+"navigate",{url:i})},_archiveStreamItems:function(){var j=this,k=h.one("#p_30345786"),m,l,i=j.get("pageChrome").getGridType();j.set("enableTriggerNode",true);if(k){m=k.all("li.content");l=[]}else{if(i==="index"){j.setAttrs({streamItems:[],enableTriggerNode:false})}return}m.each(function(q){var p=decodeURIComponent(q.getData("url")),n=q.one(".body a"),o=n&&n.getAttribute("href");if(o&&p.indexOf(o)>0){l[l.length]=o}});j.set("streamItems",l)},getNextStreamItem:function(j){var i=this,k=i.get("streamItems"),l;if(i.get("pageChrome").getGridType()!=="index"&&k&&k.length>0){l=k.indexOf(j);if(l>=0){if(l<k.length-1){return k[l+1]}}else{return k[0]}}return null}})},"0.0.1",{requires:["base","node-base"]});
/* perf-timeable.js 1191658 */ YUI.add("media-perf-timeable",function(b){var a="PerfTimeable";b.namespace("Media")[a]=function(){};b.Media[a].prototype={_timer:window.MediaPerfTiming,_time:function(d,f,e){var c=this,g=f+"Timer";if(c._timer){c._timer[g](c.NAME,d,e)}},_stopTimer:function(c){this._time(c,"end")},_startTimer:function(c,d){this._time(c,"start",d)},_cancelTimer:function(c){this._time(c,"cancel")},_beaconTimers:function(){var c=this;if(c._timer){c._timer.done(c.NAME)}}}},"0.0.1",{requires:[]});
/* beacon-manager.js 1733386 */ YUI.add("media-beacon-manager",function(f){var e="BeaconManager",a="beacon-manager:",d=a+"pageview",c=a+"comscore-pageview",b="content:reveal",g=[];f.namespace("Media")[e]=f.Base.create("media-beacon-manager",f.Base,[],{chrome:null,contentRevealConfig:null,initializer:function(i){var h=this;h.chrome=i.chrome;if(g.length>0){f.Array.each(g,function(j){j.detach()},h)}g.push(f.Global.on(d,function(j){h._handlePageView(j)}));g.push(f.Global.on(c,function(k){var j=true;h._handlePageView(k,j)}));g.push(f.Global.on(b,function(j){h._handleRapidPageView(h.contentRevealConfig||(j&&j.config))}))},_handlePageView:function(k,h){var i=this,j=k&&k.config||null;if(h){i._handleComscorePageview(k)}else{i._handleRapidPageView(j)}},_handleComscorePageview:function(k){var h=this,j=k&&k.force===true,l=YAHOO&&YAHOO.i13n&&YAHOO.i13n.spaceid||"";if(h._shouldFirePv()||j){try{YMEDIA_REQ_ATTR.csbeacon(true,l)}catch(i){}}},_handleRapidPageView:function(i){var h=this;if(i){if(h._shouldFirePv()){if(f.Media.requestManager&&f.Media.requestManager.referrerurl){i.referrer=f.Media.requestManager.referrerurl}f.Global.fire("rapid-tracker:reinit",i);h.contentRevealConfig=i}else{h.contentRevealConfig=i}}else{f.log("Did not receive the required PV data","error",e)}},_shouldFirePv:function(){var h=!!((f.one("#yom-slideshow-lightbox")||f.one("#content-lightbox"))||false);return !h}})},"0.0.1",{requires:["event-custom","node-base"]});/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("array-extras",function(e,t){var n=e.Array,r=e.Lang,i=Array.prototype;n.lastIndexOf=r._isNative(i.lastIndexOf)?function(e,t,n){return n||n===0?e.lastIndexOf(t,n):e.lastIndexOf(t)}:function(e,t,n){var r=e.length,i=r-1;if(n||n===0)i=Math.min(n<0?r+n:n,r);if(i>-1&&r>0)for(;i>-1;--i)if(i in e&&e[i]===t)return i;return-1},n.unique=function(e,t){var n=0,r=e.length,i=[],s,o,u,a;e:for(;n<r;n++){a=e[n];for(s=0,u=i.length;s<u;s++){o=i[s];if(t){if(t.call(e,a,o,n,e))continue e}else if(a===o)continue e}i.push(a)}return i},n.filter=r._isNative(i.filter)?function(e,t,n){return i.filter.call(e,t,n)}:function(e,t,n){var r=0,i=e.length,s=[],o;for(;r<i;++r)r in e&&(o=e[r],t.call(n,o,r,e)&&s.push(o));return s},n.reject=function(e,t,r){return n.filter(e,function(e,n,i){return!t.call(r,e,n,i)})},n.every=r._isNative(i.every)?function(e,t,n){return i.every.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;++r)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0},n.map=r._isNative(i.map)?function(e,t,n){return i.map.call(e,t,n)}:function(e,t,n){var r=0,s=e.length,o=i.concat.call(e);for(;r<s;++r)r in e&&(o[r]=t.call(n,e[r],r,e));return o},n.reduce=r._isNative(i.reduce)?function(e,t,n,r){return i.reduce.call(e,function(e,t,i,s){return n.call(r,e,t,i,s)},t)}:function(e,t,n,r){var i=0,s=e.length,o=t;for(;i<s;++i)i in e&&(o=n.call(r,o,e[i],i,e));return o},n.find=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return e[r];return null},n.grep=function(e,t){return n.filter(e,function(e,n){return t.test(e)})},n.partition=function(e,t,r){var i={matches:[],rejects:[]};return n.each(e,function(n,s){var u=t.call(r,n,s,e)?i.matches:i.rejects;u.push(n)}),i},n.zip=function(e,t){var r=[];return n.each(e,function(e,n){r.push([e,t[n]])}),r},n.flatten=function(e){var t=[],i,s,o;if(!e)return t;for(i=0,s=e.length;i<s;++i)o=e[i],r.isArray(o)?t.push.apply(t,n.flatten(o)):t.push(o);return t}},"3.14.0",{requires:["yui-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.14.0",{requires:["base-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-scroll-info",function(e,t){var n=e.config.doc,r=e.config.win,i="scroll",s="scrollDown",o="scrollLeft",u="scrollRight",a="scrollUp",f="scrollToBottom",l="scrollToLeft",c="scrollToRight",h="scrollToTop";e.Plugin.ScrollInfo=e.Base.create("scrollInfoPlugin",e.Plugin.Base,[],{initializer:function(e){this._host=e.host,this._hostIsBody=this._host.get("nodeName").toLowerCase()==="body",this._scrollDelay=this.get("scrollDelay"),this._scrollMargin=this.get("scrollMargin"),this._scrollNode=this._getScrollNode(),this.refreshDimensions(),this._lastScroll=this.getScrollInfo(),this._bind()},destructor:function(){(new e.EventHandle(this._events)).detach(),this._events=null},getOffscreenNodes:function(t,n){typeof n=="undefined"&&(n=this._scrollMargin);var r=e.Selector.query(t||"*",this._host._node);return new e.NodeList(e.Array.filter(r,function(e){return!this._isElementOnscreen(e,n)},this))},getOnscreenNodes:function(t,n){typeof n=="undefined"&&(n=this._scrollMargin);var r=e.Selector.query(t||"*",this._host._node);return new e.NodeList(e.Array.filter(r,function(e){return this._isElementOnscreen(e,n)},this))},getScrollInfo:function(){var e=this._scrollNode,t=this._lastScroll,n=this._scrollMargin,r=e.scrollLeft,i=e.scrollHeight,s=e.scrollTop,o=e.scrollWidth,u=s+this._height,a=r+this._width;return{atBottom:u>i-n,atLeft:r<n,atRight:a>o-n,atTop:s<n,isScrollDown:t&&s>t.scrollTop,isScrollLeft:t&&r<t.scrollLeft,isScrollRight:t&&r>t.scrollLeft,isScrollUp:t&&s<t.scrollTop,scrollBottom:u,scrollHeight:i,scrollLeft:r,scrollRight:a,scrollTop:s,scrollWidth:o}},isNodeOnscreen:function(t,n){return t=e.one(t),!!t&&!!this._isElementOnscreen(t._node,n)},refreshDimensions:function(){var t=n.documentElement;e.UA.ios?(this._winHeight=r.innerHeight,this._winWidth=r.innerWidth):(this._winHeight=t.clientHeight,this._winWidth=t.clientWidth),this._hostIsBody?(this._height=this._winHeight,this._width=this._winWidth):(this._height=this._scrollNode.clientHeight,this._width=this._scrollNode.clientWidth),this._refreshHostBoundingRect()},_bind:function(){var t=e.one("win");this._events=[this.after({scrollDelayChange:this._afterScrollDelayChange,scrollMarginChange:this._afterScrollMarginChange}),t.on("windowresize",this._afterResize,this)],this._hostIsBody?this._events.push(t.after("scroll",this._afterHostScroll,this)):this._events.push(t.after("scroll",this._afterWindowScroll,this),this._host.after("scroll",this._afterHostScroll,this))},_getScrollNode:function(){return this._hostIsBody&&!e.UA.webkit?n.documentElement:e.Node.getDOMNode(this._host)},_isElementOnscreen:function(e,t){var n=this._hostRect,r=e.getBoundingClientRect();return typeof t=="undefined"&&(t=this._scrollMargin),!(r.top>n.bottom+t||r.bottom<n.top-t||r.right<n.left-t||r.left>n.right+t)},_refreshHostBoundingRect:function(){var e=this._winHeight,t=this._winWidth,n;this._hostIsBody?(n={bottom:e,height:e,left:0,right:t,top:0,width:t},this._isHostOnscreen=!0):n=this._scrollNode.getBoundingClientRect(),this._hostRect=n},_triggerScroll:function(t){var n=this.getScrollInfo(),r=e.merge(t,n),p=this._lastScroll;this._lastScroll=n,this.fire(i,r),n.isScrollLeft?this.fire(o,r):n.isScrollRight&&this.fire(u,r),n.isScrollUp?this.fire(a,r):n.isScrollDown&&this.fire(s,r),n.atBottom&&(!p.atBottom||n.scrollHeight>p.scrollHeight)&&this.fire(f,r),n.atLeft&&!p.atLeft&&this.fire(l,r),n.atRight&&(!p.atRight||n.scrollWidth>p.scrollWidth)&&this.fire(c,r),n.atTop&&!p.atTop&&this.fire(h,r)},_afterHostScroll:function(e){var t=this;clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(function(){t._triggerScroll(e)},this._scrollDelay)},_afterResize:function(){this.refreshDimensions()},_afterScrollDelayChange:function(e){this._scrollDelay=e.newVal},_afterScrollMarginChange:function(e){this._scrollMargin=e.newVal},_afterWindowScroll:function(){this._refreshHostBoundingRect()}},{NS:"scrollInfo",ATTRS:{scrollDelay:{value:50},scrollMargin:{value:50}}})},"3.14.0",{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]});

/* ad-controller.js 1717059 */ YUI.add("media-ad-controller",function(d){var c="AdController",b="lightbox",a="AUTO";d.namespace("Media")[c]=d.Base.create("media-ad-controller",d.Base,[],{initializer:function(f){var e=this;f=f||{};e.set("env",f.env||"");e.set("hideOnFailure",typeof f.hideOnFailure!=="undefined"?f.hideOnFailure:false);e.set("fetchOnPjaxOnly",typeof f.fetchOnPjaxOnly!=="undefined"?f.fetchOnPjaxOnly:false);e.set("fetchingPositions",[]);e.set("spaceid","");e.set("isEventBasedRotation",true);e._initEventListeners();return e},_setupDevConfig:function(){var k=["beaconPath","msgPath","renderPath","servicePath"],j,f=window.location.hostname+(window.location.port?(":"+window.location.port):""),e,g,h;for(e=0,g=k.length;e<g;e++){j=k[e];h=DARLA_CONFIG[j];if(h){DARLA_CONFIG[j]=h.replace(/\/\/[^/]+\//,"//"+f+"/")}}DARLA.config(DARLA_CONFIG)},_initEventListeners:function(){var e=this;d.log("listen to darla ready event","info",c);d.Global.on("darla:ready",function(){if(e.get("env")==="dev"){e._setupDevConfig()}});d.Global.on("darla:failure",function(f){if(e.get("hideOnFailure")){e._toggleAdContainerView(f.positions||null,false)}});d.Global.on("darla:success",function(g){var f=d.Media.requestManager.get("requestType")||"";if("pjax"===f){e._enableDmrosFallbacks(g.positions)}if(e.get("hideOnFailure")){e._toggleAdContainerView(g.positions||null,true)}})},_isDarlaReady:function(){return DARLA&&typeof DARLA_CONFIG&&YUI&&YUI.AdsDarla&&YUI.AdsDarla.fetch},_toggleAdContainerView:function(j,h){var k=this,l,m,f,e,g=k.get("fetchingPositions");if(!j){return}for(l=0,m=j.length;l<m;l++){e=j[l];f=d.one("#yom-ad-"+e);if(f){if(h){f.show()}else{f.hide()}}}if(h){for(l=0,m=g.length;l<m;l++){e=g[l];if(d.Array.indexOf(j,e)<0){f=d.one("#yom-ad-"+e);if(f){f.hide()}}}}},refreshAd:function(e){var f=b;if(DARLA&&DARLA.inProgress()){return}if(e){f=e.name;DARLA.add(e)}DARLA.event(f)},fetchAd:function(h,n,u){var s=this,o,g,k,t,q="",r,p,f,e,m={},j,l;if(u){o=u.enableViewportRotation;g=u.viewportRotationDuration;k=u.enableTimeBasedRotation;t=u.timeBasedRotationInterval}if(DARLA&&DARLA.abort){DARLA.abort()}if(!s._isDarlaReady()){d.log("trying to fetch ad before darla is ready","warn",c);return}r=s._getDarlaEventId();s.set("spaceid",DARLA_CONFIG.events[r].sp);if(h){f=d.clone(DARLA_CONFIG.events[r]);if(n&&n.length>0){d.log("spaceid is overrided as "+n,"info",c);f.sp=n;s.set("spaceid",n)}s.set("fetchingPositions",h);if(o||k){DARLA_CONFIG.rotationTimingDisabled=false;f.name=a;if(o){d.log("viewport rotation is enabled","info",c);for(j=0,l=h.length;j<l;j++){e=h[j];m[e]={autoIV:1,autoMax:15}}}else{m=h.join(",")}f.ps=m;f.autoStart=true;f.autoRT=(o?g:t)||30000;r=a;s.set("isEventBasedRotation",false)}else{f.name=b;f.ps=h.join(",");r=b;s.set("isEventBasedRotation",true)}}else{DARLA.render.RenderMgr.nuke("*");DARLA.del("*");p=DARLA.config(DARLA_CONFIG);if(p!=="OK"){d.log("failed to configure darla","error")}}p=DARLA.add(f);d.log("calling darla fetch","info",c);DARLA.event(r)},isEventBasedRotation:function(){return this.get("isEventBasedRotation")},_getDarlaEventId:function(){var e;for(e in DARLA_CONFIG.events){return e}return},_enableDmrosFallbacks:function(g){var e=this._getDmrosFallbackPositions(g),f,h;if(e.length>0){f=YUI.namespace("Media").ads_dmros_fallbacks||{};for(h in f){if(f.hasOwnProperty(h)){if(-1===e.indexOf(h)||"function"!==typeof(f[h])){continue}f[h]()}}}},_getDmrosFallbackPositions:function(j){var h=DARLA_CONFIG.positions,g=d.Media.requestManager.referrerurl||"",i=(""!==g)?g.replace(/\?.*/,"").replace(/.*.yahoo.com/,""):"",f=[],e;for(e in h){if(-1===d.Array.indexOf(j,e)){if("MAST"===e){if(""!==i&&-1===i.indexOf(".html")){f.push(e)}}else{f.push(e)}}}return f}})},"0.0.1",{requires:["node-scroll-info","event-custom"]});
/* pane-manager.js 1753652 */ YUI.add("media-pane-manager",function(a){var j="PaneManager",i="bandit",e="fallback",c="fixed",b="request-manager:active-content-changed",g="pane-manager:scroll-mode-change",h=function(){},f="px",d={INITIALIZER:"m1",SET_MODE:"m2",TEARDOWN_MODE:"m3"};a.namespace("Media")[j]=a.Base.create("media-pane-manager",a.Base,[],{selectors:{stagePane:"#yog-sp",stageWrap:"#yog-sw",stageContent:"#yog-stage",navPane:"#yog-np",navWrap:"#yog-nw",navContent:"#mediacontentnavigation",contentPane:"#yog-cp",contentWrap:"#yog-cw",contentContent:"#yog-content",relatedPane:"#yog-rp",relatedWrap:"#yog-rw",relatedContent:"#yog-related",body:"#yog-bd",header:"#yog-hd",streamHeader:"h2.title-bar"},scrollManagerConfig:{initial:"init_ScrollMode",event_name:"pane-manager:scroll-manager-state-change",states:[{name:"init_ScrollMode",transitions:{init_done:"check_DeviceSupport"}},{name:"check_DeviceSupport",transitions:{supported:"check_GridType",degraded:"set_DegradedScrollMode"}},{name:"check_GridType",transitions:{content:"check_ContentPageWidth",index:"check_IndexPageWidth"}},{name:"check_ContentPageWidth",transitions:{is_narrow:"set_FallbackScrollMode",is_wide:"set_ContentScrollMode"}},{name:"set_FallbackScrollMode",transitions:{set:"FallbackScrollMode"}},{name:"set_ContentScrollMode",transitions:{set:"ContentScrollMode"}},{name:"ContentScrollMode",transitions:{navigate:"check_GridType",is_narrow:"set_FallbackScrollMode"}},{name:"check_IndexPageWidth",transitions:{is_narrow:"set_FallbackScrollMode",is_wide:"set_IndexScrollMode"}},{name:"FallbackScrollMode",transitions:{navigate:"check_GridType",is_wide:"check_GridType"}},{name:"set_IndexScrollMode",transitions:{set:"IndexScrollMode"}},{name:"IndexScrollMode",transitions:{navigate:"check_GridType",is_narrow:"set_FallbackScrollMode"}},{name:"set_DegradedScrollMode",transitions:{set:"DegradedScrollMode"}},{name:"DegradedScrollMode",transitions:{}}]},fsm:function(o){var p,q,k,r,n,m,l;n=o.event_name;l={};for(p=0,q=o.states,k=o.states.length;p<k;p++){l[q[p].name]=q[p]}r=l[o.initial];m={state:function(){return r.name},transition:function(s){var t=r.transitions[s];if(t){r=l[t];a.fire(n);return r.name}return false}};return m},scrollManagerHandler:function(s){var o,p,r,l,q,m,u,k,n;n=s;k=n.scrollManager;o=function(){if(!n.chrome.supportsFixedPosition()||(a.UA.ie&&a.UA.ie<8)||(a.UA.android)||(a.UA.iphone)||(a.UA.ipod)){return"degraded"}return"supported"};p=function(){return(n.viewport.get("region").width<n.config.fallbackBreakpoint)?"is_narrow":"is_wide"};r=function(t){return(t&&t.type===b)?"navigate":p()};l=function(t){n._startTimer(d.SET_MODE);if(q!==t){if(q){n._startTimer(d.TEARDOWN_MODE);n.tearDown();n.scroll[q].tearDown();n._stopTimer(d.TEARDOWN_MODE);n._beaconTimers()}q=t;n.initMode(t);if(n.scroll[t]){n.scroll[t].init()}n._stopTimer(d.SET_MODE);n._beaconTimers();a.Global.fire(g)}return"set"};u={check_DeviceSupport:o,DegradedScrollMode:h,check_GridType:n.chrome.getGridType,check_IndexPageWidth:p,check_ContentPageWidth:p,ContentScrollMode:r,IndexScrollMode:r,FallbackScrollMode:r,set_DegradedScrollMode:function(){return l(e)},set_ContentScrollMode:function(){return l(n.config.grid_type.content.scroll_mode)},set_FallbackScrollMode:function(){return l(e)},set_IndexScrollMode:function(){return l(n.config.grid_type.index.scroll_mode)}};m={handleEvent:function(w){var v=k.state(),t;if(u[v]){t=u[v](w);if(t){k.transition(t)}}}};return m},initializer:function(k){var l=this;l.NAME=j;l._startTimer(d.INITIALIZER);l.handlers=[];l.config=k||{};l.chrome=a.Media.pageChrome;l.config.fallbackBreakpoint=(l.chrome.getDevice()==="full")?970:600;l.config.navBreakpoint=1209;l.config.debug=(l.config.isYnet&&l.config.debug);l.config.grid_type=a.mix(l.config.grid_type||{},{content:{scroll_mode:i},index:{scroll_mode:i}},false,null,0,true);l.sp=a.one(l.selectors.stagePane);if(l.sp){l.sp.wrap=(l.sp).one(l.selectors.stageWrap);l.sp.content=(l.sp).one(l.selectors.stageContent)}l.np=a.one(l.selectors.navPane);if(l.np){l.np.wrap=(l.np).one(l.selectors.navWrap);l.np.content=(l.np).one(l.selectors.navContent)}l.cp=a.one(l.selectors.contentPane);if(!l.cp){return false}l.cp.wrap=(l.cp).one(l.selectors.contentWrap);l.cp.content=(l.cp).one(l.selectors.contentContent);l.rp=a.one(l.selectors.relatedPane);l.rp.wrap=(l.rp).one(l.selectors.relatedWrap);l.rp.content=(l.rp).one(l.selectors.relatedContent);l.viewport=a.one("window");l.bd=a.one(l.selectors.body);l.hd=a.one(l.selectors.header);l.hdHt=l.hd?l.hd.get("region").height:0;l.wrap=l.cp.ancestor(".yog-wrap");l.isFixedStreamHeaderEnabled=parseInt(l.config.isFixedStreamHeaderEnabled,10)||0;if(l.np){l.np.wrap.addClass("clearfix")}l.cp.wrap.addClass("clearfix");l.rp.wrap.addClass("clearfix");l.scroll={};l.scroll[i]=new l.banditScrollMode(l);l.scroll[e]=new l.fallbackScrollMode(l);l.scroll[c]=new l.fixedScrollMode(l);l.config.menuIconColor="black";l.config.isGlassThemeEnabled=typeof l.config.isGlassThemeEnabled!=="undefined"?l.config.isGlassThemeEnabled:false;l.config.glassThemeMenuClass=typeof l.config.glassThemeMenuClass!=="undefined"?l.config.glassThemeMenuClass:"white";if(l.config.isGlassThemeEnabled){l.config.menuIconColor=l.config.glassThemeMenuClass}if(l.config.debug){l._debugModes=[i,c,e];l.initMode(i);l.scroll[i].init();l.currentScrollMode=l.scroll[i];l.hd.append('<a class="pane-manager-mode-switch" href="#" style="background:yellow;padding:1em">change scroll mode</a>');l._modeSwitch=a.one(".pane-manager-mode-switch");l._modeSwitch.on("click",function(){var m=this,n;m.tearDown();if(m.currentScrollMode){m.currentScrollMode.tearDown()}n=m._debugModes.shift();m._debugModes.push(n);m.initMode(n);m.scroll[n].init();m.currentScrollMode=m.scroll[n];a.Global.fire(g)},l);a.Global.on("pane-manager:sync-nav-pane-scroll",function(m){a.log("[PaneManager] pane-manager:sync-nav-pane-scroll caught",m)});a.one("#feedback_wrapper").remove()}else{l.scrollManager=new l.fsm(l.scrollManagerConfig);l.scrollManagerEventHandler=new l.scrollManagerHandler(l);a.on(l.scrollManagerConfig.event_name,l.scrollManagerEventHandler.handleEvent);l.scrollManager.transition("init_done");a.on("resize",l.scrollManagerEventHandler.handleEvent);a.Global.on("request-manager:active-content-changed",function(m){m.type="request-manager:active-content-changed";l.scrollManagerEventHandler.handleEvent(m)})}if(l.np&&!a.UA.mobile){(new l.nav(l)).init()}l._stopTimer(d.INITIALIZER)},nav:function(w){var p,l,q,v,m,o,k,n,u,s,r,t;q=function(){w.bd.addClass("nav-open");n=w.viewport.on("resize",k);s=a.on("click",u);t=a.on("keydown",r);l=true;m("open")};v=function(){w.bd.removeClass("nav-open");if(n){n.detach()}if(s){s.detach()}if(t){t.detach()}l=false;m("close")};m=function(x){a.Global.fire("rapid-tracker:click",{data:{sec:"lnav",linkname:x,keys:{rspns:("open"===x)?"op":"cl",t1:"a2",t2:"lnav",sec:"lnav",elm:"icn",elmt:("open"===x)?"op":"cl",itc:"1",test:w.chrome&&w.chrome.getBucketId()||""},outcome:x}})};o=function(){if(l){v()}else{q()}a.Global.fire("media:resize")};k=function(){if(l&&w.bd.get("region").width>=w.config.navBreakpoint){v()}};u=function(z){var A=!!z.target.ancestor(w.selectors.navPane),y=z.target.get("tagName")==="A",x=z.target.hasClass("interactive-click");if(!x){if(!A||y){v()}}};r=function(x){if(x.keyCode===27){v()}};p={init:function(){w.npToggler=a.Node.create('<div id="nav-toggler" class="nav-toggler icon-'+w.config.menuIconColor+'-menu"></div>');w.np.wrap.prepend(w.npToggler);w.npToggler.on("click",o)}};return p},initMode:function(l){var k=this;a.log("[PaneManager] >>> New mode: "+l);k.mode=l;if(k._modeSwitch){k._modeSwitch.setContent("scroll mode: "+l)}if(k.previousScrollMode!==l){a.one("body").replaceClass("scroll-"+k.previousScrollMode,"scroll-"+l)}},bindViewChangeEvents:function(o,m){var l=this,k=(m&&m[0])||null,n=(o&&o.applets)||(YMedia&&YMedia.ApeApp);if(n&&k){l.handlers.push(n.on(["*:viewrender","*:viewupdate","*:viewdisplay"],k))}},banditScrollMode:function(u){var l,q,s,n,o,m,r,k,p,t;q=function(x,v,w){if(v==="top"){x.wrap.setStyles({position:"fixed",bottom:"",top:w+f})}else{if(v==="bottom"){x.wrap.setStyles({position:"fixed","-webkit-backface-visibility":"hidden",bottom:0,top:""})}else{x.wrap.setStyles({position:"","-webkit-backface-visibility":"",bottom:"",top:x.banditY+f})}}x.fix=v};s=function(){n();t();var v=u.viewport.get("region"),B=u.np?u.np.get("region"):0,y=u.np?u.np.wrap.get("region"):0,A=u.cp.get("region"),D=u.cp.wrap.get("region"),z=parseInt(u.cp.wrap.getStyle("marginLeft"),10),x=u.rp.get("region"),w=u.rp.wrap.get("region"),C=u.wrap.getY(),E=o(),F=A.width-z;if(u.np){m(u.np,B.top,y.height,C,E,v)}m(u.cp,A.top,D.height,C,E,v,F);m(u.rp,x.top,w.height,C,E,v,x.width);u.fixPaneHeader(u.rp,u.selectors.streamHeader);u.wrap.setStyle("minHeight",o())};n=function(){var v=Math.min(u.cp.banditY,u.rp.banditY);if(u.np){v=Math.min(v,u.np.banditY)}if(v!==0){if(u.np){u.np.banditY-=v}u.cp.banditY-=v;u.rp.banditY-=v;u.viewport.set("scrollTop",u.viewport.get("scrollTop")-v)}};t=function(){if(!u.sp){return}var v=u.sp.wrap.get("offsetHeight")-p;if(v&&v<0){u.viewport.set("scrollTop",u.viewport.get("scrollTop")+v)}p+=v};o=function(){var y=u.wrap.get("region").top,C=u.np?u.np.get("region"):0,B=u.cp.get("region"),x=u.rp.get("region"),z=u.np?u.np.wrap.get("region"):0,w=u.cp.wrap.get("region"),v=u.rp.wrap.get("region"),A=Math.max(u.np&&(C.top+u.np.banditY+z.height)||0,(B.top+u.cp.banditY+w.height)||0,(x.top+u.rp.banditY+v.height)||0,y);return A-y};m=function(x,B,D,C,E,v,w){var y="none",A=u._getPaneViewHt(x),z=B-C;if(D<=A+z||z+x.banditY>v.top){y=v.top>z?"top":"none";x.banditY=Math.max(v.top-z,0)||0}else{if((B+x.banditY+D)<=v.bottom){y="bottom";x.banditY=Math.min(v.bottom-D-B,E-D-z)||0}}if(w){if(y==="none"){w=""}w=(typeof w==="string")?w:w+f;x.wrap.setStyle("width",w)}q(x,y,C)};r=function(y){var A=u.getParentPane(y.node),x=u.viewport.get("region"),v=u.wrap.getY(),z=A.getY(),w=z-v;if(A&&A.content&&y.node.get("id")===A.content.get("id")){A.banditY=Math.max(x.top-w,0)||0}};k=function(B){var y=a.one(B.node),x=u.getParentPane(y),A=x&&x.content&&x.content.headerHt,v=u.viewport.get("region"),D=u.wrap.getY(),z,w,C;if(!x){return}z=x.getY();w=Math.max(z-v.top,D);C=w-D;if(C){return}x.banditY+=(v.top+D+A-y.getY())||0;s()};l={init:function(){u.handlers=[u.viewport.on("scroll",s),u.viewport.on("resize",s),a.Global.on("media:resize",s),a.on("ymedia:orientationchange",s),a.Global.on("request-manager:active-content-changed",s),a.Global.on("pane-manager:sync-nav-pane-scroll",s),a.Global.on("media:remove-node",r),a.Global.on("media:scroll-into-view",k)];if(YMedia){if(YMedia.ApeApp){u.bindViewChangeEvents(null,[s])}else{u.handlers.push(YMedia.onceAfter("appletsinit",u.bindViewChangeEvents,u,[s]))}}p=(u.sp&&u.sp.wrap.get("offsetHeight"))||0;u.cp.banditY=u.rp.banditY=0;if(u.np){u.np.banditY=0}s()},tearDown:function(){var v={position:"",bottom:"",top:"",width:""};u.cp.wrap.setStyles(v);u.rp.wrap.setStyles(v);u.unfixPaneHeader(u.rp);u.cp.fix=u.rp.fix=null;u.cp.banditY=u.rp.banditY=null;if(u.np){u.np.wrap.setStyles(v);u.np.fix=u.np.banditY=null}u.wrap.setStyle("minHeight","")}};return l},fallbackScrollMode:function(){return{init:h,tearDown:h}},fixedScrollMode:function(l){var k,m;m=function(){var q=l.viewport.get("region"),o=l.wrap.getY(),n=l.rp.get("region"),s=l._getPaneViewHt(l.rp),p=n.top-o,r=Math.min(q.top,p);l.rp.scroll.set("height",(s+r)+f);l.rp.wrap.setStyle("top",(n.top-r)+f);l.cp.wrap.setStyle("minHeight",l._getPaneViewHt(l.cp)+f);l.rp.scroll.set("width",n.width+f);l.fixPaneHeader(l.rp,l.selectors.streamHeader);l.rp.scroll.syncUI()};k={init:function(){if(!l.rp.scroll){l.rp.scroll=new a.Media.NextScroll({boundingBox:l.rp.wrap,contentBox:l.rp.content,header:l.selectors.streamHeader})}l.handlers=[l.viewport.on("resize",m),a.Global.on("media:resize",m),l.viewport.on("scroll",m),a.on("ymedia:orientationchange",m),a.Global.on("content:reveal",m),a.Global.on("pane-manager:sync-nav-pane-scroll",m)];if(YMedia){if(YMedia.ApeApp){l.bindViewChangeEvents(null,[m])}else{l.handlers.push(YMedia.onceAfter("appletsinit",l.bindViewChangeEvents,l,[m]))}}m();l.rp.scroll.render()},tearDown:function(){l.cp.wrap.setStyles({minHeight:""});l.rp.wrap.setStyles({top:"",width:""});l.rp.content.setStyles({height:"",width:""});l.unfixPaneHeader(l.rp);l.rp.scroll.destroy()}};return k},tearDown:function(){var k=this,m,l,n;k.previousScrollMode=k.mode;for(m=0,l=k.handlers.length;m<l;m++){n=k.handlers[m];if(n&&n.detach){n.detach()}}k.handlers=[]},fixPaneHeader:function(m,n){if(!this.isFixedStreamHeaderEnabled){return}var q=m.one(n);if(!q){return}var t=this,k=t.viewport.get("region"),r=t.wrap.getY(),l=m.get("region"),o=m.wrap.getY(),s=parseInt(m.wrap.getComputedStyle("paddingRight"),10),p=parseInt(m.wrap.getComputedStyle("paddingLeft"),10);m.content.header=q;q.setStyle("width",(l.width-s-p)+f);q.setStyle("position","fixed");if(t.chrome.getDevice()!=="tablet"){q.setStyle("top",Math.max(o-k.top,r))}m.content.headerHt=m.content.header.get("offsetHeight");q.spacer=m.one(".sticky-header-spacer")||a.Node.create("<div>").addClass("sticky-header-spacer");q.insert(q.spacer,"after");q.spacer.setStyle("height",m.content.headerHt)},unfixPaneHeader:function(l){if(!this.isFixedStreamHeaderEnabled){return}var k=l&&l.content&&l.content.header;if(!k){return}k.setStyles({width:"",position:"",top:""});k.spacer.setStyle("height","").remove()},_getPaneViewHt:function(n){var m=n.get("region"),k=this.chrome.getViewportHeight(),l=k-m.top;return Math.max(l,0)},getParentPane:function(m){var k=this,l;if(m.ancestor(k.selectors.stagePane)){l=k.sp}else{if(m.ancestor(k.selectors.navPane)){l=k.np}else{if(m.ancestor(k.selectors.contentPane)){l=k.cp}else{if(m.ancestor(k.selectors.relatedPane)){l=k.rp}}}}return l}});a.augment(a.Media[j],a.Media.PerfTimeable)},"0.0.1",{requires:["event-touch","node-base","media-next-scroll","media-perf-timeable"]});
/* next-scroll.js 1304262 */ YUI.add("media-next-scroll",function(b){var k="NextScroll",l="active",h="<div></div>",f="height",d="px",i="region",e="scrollTop",c="top",g="visible",j="width";function a(){a.superclass.constructor.apply(this,arguments)}b.namespace("Media")[k]=function(){var m=this,n=arguments[0]||{};n.delayEnter=n.delayEnter||150;n.delayLeave=n.delayLeave||1000;m.config=n;m.doc=b.one(b.config.doc);m.bb=b.one(n.boundingBox);m.cb=b.one(n.contentBox);if(n.height){m.set("height",n.height)}if(n.width){m.set("width",n.width)}m.hd=m.bb.one(n.header);m.vp=b.one("window");m.sizer=b.Node.create(h);m.wrap=b.Node.create(h).addClass("wrap");m.bar=b.Node.create(h).addClass("bar");m.thumb=b.Node.create(h).addClass("thumb");m.shape=b.Node.create(h).addClass("shape")};b.Media[k].prototype={render:function(){var m=this;m.renderUI();m.bindUI();m.syncUI()},renderUI:function(){var m=this;m.bb.addClass("yui3-nextscroll");m.cb.addClass("yui3-nextscroll-content");if(m.hd&&!m.cb.one(m.config.header)){m.hd.setStyle("position","absolute")}m.cb.prepend(m.sizer);m.thumb.prepend(m.shape);m.bar.prepend(m.thumb);m.wrap.prepend(m.bar);m.bb.prepend(m.wrap);m.isRendered=true;m.showBar();m.onMouseLeave()},bindUI:function(){var m=this;m.handlers=[m.vp.on("resize",m.syncUI,m),m.bb.on("mouseenter",m.onMouseEnter,m),m.bb.on("mouseleave",m.onMouseLeave,m),m.thumb.on("mousedown",m.onMouseDown,m),m.cb.on("scroll",m.onScroll,m),m.bar.on("click",m.onBarClick,m)]},unbindUI:function(){new b.EventTarget(this.handlers).detach()},syncUI:function(){if(!this.isRendered){return}var o=this,n=o.vp.get(i),m=o.bb.get(i),p=parseInt(o.bb.getStyle("paddingLeft"),10)||0,r=o.cb.get(i),s,q,t;o.hd=o.bb.one(o.config.header);if(o.hd){s=o.hd.get(i)}o.cb.prepend(o.sizer);q=o.sizer.get(i);t=r.width-q.width;if(isNaN(o.width)){o.width=m.width}o.cb.setStyle(j,(o.width-p+t)+d);if(isNaN(o.height)){o.height=m.height}o.cbHt=o.cb.get("scrollHeight");o.hdHt=(o.hd)?o.hd.get(i).height:0;o.barHt=o.height-o.hdHt;o.barTop=m.top+o.hdHt-n.top;o.maxScrollTop=Math.max(o.cbHt-o.height,0);o.minThumbHt=Math.round(Math.min(75,o.barHt/4));o.thumbHt=Math.round(Math.max(o.minThumbHt,(o.barHt/(o.cbHt||1))*o.barHt));o.maxThumbTop=o.barHt-o.thumbHt;if(o.maxScrollTop>0){o.bar.setStyle(c,o.hdHt+d);o.bar.setStyle(f,o.barHt+d);o.thumb.setStyle(f,o.thumbHt+d);o.synchScrollbar()}else{o.hideBar()}},synchScrollbar:function(){var m=this;if(m.maxScrollTop<=0){return}if(m.isDragging){m.thumbTop=parseInt(m.thumb.getStyle(c),10);m.cb.set(e,Math.round((m.thumbTop/m.maxThumbTop)*m.maxScrollTop))}else{m.thumbTop=Math.round((m.cb.get(e)/m.maxScrollTop)*m.maxThumbTop);m.thumb.setStyle(c,m.thumbTop+d)}},onScroll:function(){var m=this;if(m.maxScrollTop<=0){return}m.showBar();m.synchScrollbar();if(!m.isMouseOver){m.onMouseLeave()}},onMouseEnter:function(){var m=this;m.isMouseOver=true;if(m.mouseTimer){m.mouseTimer.cancel()}if(m.maxScrollTop>0){m.mouseTimer=b.later(m.config.delayEnter,m,"showBar")}},onMouseLeave:function(){var m=this;m.isMouseOver=false;if(m.mouseTimer){m.mouseTimer.cancel()}m.mouseTimer=b.later(m.config.delayLeave,m,"hideBar")},showBar:function(){this.bar.addClass(g)},hideBar:function(){if(!this.isDragging){this.bar.removeClass(g)}},onMouseDown:function(o){var n=this,m=n.thumb;if(n.maxScrollTop>0){n.lastY=o.clientY;n.isDragging=true;m.addClass(l);m.move=n.doc.on("mousemove",n.onMouseMove,n);m.up=n.doc.on("mouseup",n.onMouseUp,n);o.halt()}},onMouseMove:function(o){var n=this,p=o.clientY-n.lastY,m=n.thumbTop+p;if(b.UA.ie&&b.UA.ie<9&&event.button===0){n.onMouseUp(o);return}m=Math.max(m,0);m=Math.min(m,n.maxThumbTop);n.thumbTop=m;n.thumb.setStyle(c,m+d);n.synchScrollbar();n.lastY+=p;o.halt()},onMouseUp:function(q){var o=this,n=o.thumb,m=o.bb.get(i),p=(q.pageX>=m.left&&q.pageX<=m.right&&q.pageY>=m.top);n.move.detach();n.up.detach();o.isDragging=false;n.removeClass(l);if(!p){o.onMouseLeave()}q.halt()},onBarClick:function(p){var n=this,m=p.clientY<n.barTop+n.thumbTop,o=p.clientY>n.barTop+n.thumbTop+n.thumbHt,q=m?-n.barHt:(o?n.barHt:0);if(q){n.cb.set(e,n.cb.get(e)+q);n.synchScrollbar()}},set:function(n,o){var m=this;m[n]=o;m.bb.setStyle(n,b.Lang.isNumber(o)?o+d:o)},destroy:function(){var m=this;m.unbindUI();new b.NodeList([m.sizer,m.shape,m.thumb,m.bar,m.wrap]).remove();m.bb.removeClass("yui3-nextscroll").setStyles({height:"",width:""});m.cb.removeClass("yui3-nextscroll-content");if(m.hd){m.hd.setStyle("position","")}m.isRendered=false}}},"1.0.0",{requires:["node-base","event-mouseenter"]});
/* content-discoverer.js 1753785 */ YUI.add("media-content-discoverer",function(a){a.namespace("Media").ContentDiscoverer=a.Base.create("media-content-discoverer",a.Base,[],{initializer:function(c){var b=this;b.enableLightboxOnStream=(c&&c.enableLightboxOnStream==="1")?true:false;b.disablePjax=(c&&c.disablePjax==="1")?true:false;b._handleSlideshowLinks();if(!b.disablePjax){b._handleHistoryChange()}},_handleSlideshowLinks:function(){var b=a.one("#yog-bd"),c;c=function(i){var h=i.target,g=i.currentTarget,d=h.ancestor("li"),j,f={path:"/dummy-url/"};if(a.Media&&a.Media.requestManager&&a.Media.requestManager._isPjaxSupported(f)===false){if(!(a.UA.ie&&a.UA.ie<10)){return}}if((d&&(d.getData("type")==="slideshow"))||(h.getData("type")==="slideshow")){j={};j.id=d.getData("uuid");if(j.id){a.Global.fire("slideshow:open-lightbox",{slideshowData:j});if(a.Media&&a.Media.pageChrome&&a.Media.pageChrome.getBucketId()==="gs125"){i.halt(true)}}}if(g&&g.getData("type")==="slideshow_link"&&g.getData("uuid")){this._handleModuleSlideshowLink(i)}else{if(this.enableLightboxOnStream&&(d&&((d.hasClass("glry-item")&&g.ancestor("li.slideshow"))||d.hasClass("slideshow")))){this._handleModuleSlideshowLink(i,true)}}};if(b){b.delegate("click",c,"a",this)}},_handleModuleSlideshowLink:function(d,b){var c=d.currentTarget,f={};if(!this._sameHostname(c)){return}if(b){if(c.ancestor("li.slideshow")){f.id=c.ancestor("li.slideshow").getData("uuid")}f.alias=this._extractAliasFromUrl(c.getAttribute("href"))}else{f.id=c.getData("uuid");f.alias=c.getData("alias")}f.offpage=true;f.redir_href=c.getAttribute("href");if(f.id){a.Global.fire("slideshow:open-lightbox",{slideshowData:f});if(a.Media&&a.Media.pageChrome&&a.Media.pageChrome.getBucketId()==="gs125"){d.halt(true)}}if(a.UA.ie&&a.UA.ie<10){d.halt(true)}},_sameHostname:function(b){return(b.get("hostname")===""||window.location.hostname===b.get("hostname"))},_extractAliasFromUrl:function(b){if(!b){return""}var c=b.match(/(.*)\/(.*?).html/);if(c&&typeof c[2]!=="undefined"){c=c[2]}else{c=""}return c},_handleHistoryChange:function(){a.on("history:change",function(c){var b=c.src;setTimeout(function(){var d,e;if(b==="popstate"){d=(a.one('.yom-slideshow[data-type="slideshow"]'))||null;e=a.one("#yom-slideshow-lightbox")||a.one("#content-lightbox")||null;if(!d||(e&&(d.getData("uuid")!==e.getData("uuid")))){a.Global.fire("slideshow:close-lightbox")}a.Global.fire("single-photo:close-lightbox")}},1000)})}})},"0.0.1",{requires:["node-base","history-base"]});/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-base",function(e,t){function p(){this._init.apply(this,arguments)}function d(e){return n.type(e)==="object"}var n=e.Lang,r=e.Object,i=YUI.namespace("Env.History"),s=e.Array,o=e.config.doc,u=o.documentMode,a=e.config.win,f={merge:!0},l="change",c="add",h="replace";e.augment(p,e.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),i._state||(i._state={}),p.NAME="historyBase",p.SRC_ADD=c,p.SRC_REPLACE=h,p.html5=!!(a.history&&a.history.pushState&&a.history.replaceState&&("onpopstate"in a||e.UA.gecko>=2)&&(!e.UA.android||e.UA.android>=2.4)),p.nativeHashChange=("onhashchange"in a||"onhashchange"in o)&&(!u||u>7),e.mix(p.prototype,{_init:function(e){var t;e=this._config=e||{},this.force=!!e.force,t=this._initialState=this._initialState||e.initialState||null,this.publish(l,{broadcast:2,defaultFn:this._defChangeFn}),t&&this.replace(t)},add:function(){var e=s(arguments,0,!0);return e.unshift(c),this._change.apply(this,e)},addValue:function(e,t,n){var r={};return r[e]=t,this._change(c,r,n)},get:function(t){var n=i._state,s=d(n);return t?s&&r.owns(n,t)?n[t]:undefined:s?e.mix({},n,!0):n},replace:function(){var e=s(arguments,0,!0);return e.unshift(h),this._change.apply(this,e)},replaceValue:function(e,t,n){var r={};return r[e]=t,this._change(h,r,n)},_change:function(t,n,r){return r=r?e.merge(f,r):f,r.merge&&d(n)&&d(i._state)&&(n=e.merge(i._state,n)),this._resolveChanges(t,n,r),this},_fireEvents:function(e,t,n){this.fire(l,{_options:n,changed:t.changed,newVal:t.newState,prevVal:t.prevState,removed:t.removed,src:e}),r.each(t.changed,function(t,n){this._fireChangeEvent(e,n,t)},this),r.each(t.removed,function(t,n){this._fireRemoveEvent(e,n,t)},this)},_fireChangeEvent:function(e,t,n){this.fire(t+"Change",{newVal:n.newVal,prevVal:n.prevVal,src:e})},_fireRemoveEvent:function(e,t,n){this.fire(t+"Remove",{prevVal:n,src:e})},_resolveChanges:function(e,t,n){var s={},o,u=i._state,a={};t||(t={}),n||(n={}),d(t)&&d(u)?(r.each(t,function(e,t){var n=u[t];e!==n&&(s[t]={newVal:e,prevVal:n},o=!0)},this),r.each(u,function(e,n){if(!r.owns(t,n)||t[n]===null)delete t[n],a[n]=e,o=!0},this)):o=t!==u,(o||this.force)&&this._fireEvents(e,{changed:s,newState:t,prevState:u,removed:a},n)},_storeState:function(e,t){i._state=t||{}},_defChangeFn:function(e){this._storeState(e.src,e.newVal,e._options)}},!0),e.HistoryBase=p},"3.14.0",{requires:["event-custom-complex"]});

/* interest-manager.js 1557483 */ YUI.add("media-interest-manager",function(b){var j="InterestManager",e="interest-manager:",i="interests:change",f=b.guid(),h,d={},a,c=[],g;g=function(){var r=function(){l()},l=function(){b.Global.on(e+"request-interest",function(u){var w=u?u.callback:null,v=u?u.start:null,s=u?u.recent:null,t=u?u.state:null;if(typeof w==="function"){n(w,s,t,v)}});b.Global.on(e+"update-interest",function(w){var v=w?w.interest:null,s=(w&&typeof w.propagate!=="undefined")?w.propagate:true,t={},u;if(v){d=b.merge(d,v);if(a){clearTimeout(a);a=null}a=setTimeout(o,1000);for(u in v){c[c.length]=u;t[u]={state:v[u].state,declared:1}}if(s){b.Global.fire(i,{origin:f,data:t})}}});b.Global.on(i,function(w){var s,u,t,v={},x=0;if(w){s=w.origin||"";u=w.data||{};if(s&&s!==f&&typeof u==="object"){for(t in u){if(u.hasOwnProperty(t)){v[t]={state:u[t].state};x++}}if(x){b.Global.fire(e+"update-interest",{interest:v,propagate:false})}}}})},o=function(){var w,u,v,t,x={},s=0;for(w in d){u=d[w];v=u.state;t=u.module||"";if(!h[w]||h[w].state!==v){x[w]={state:v,module:t};s++}}if(s>0){b.io("/_xhr/update-topic-interest/",{method:"POST",data:{updates:b.JSON.stringify(x)},on:{success:function(z,F){var A=(F&&F.responseText)?F.responseText:"",B,G,y,E,D;try{A=b.JSON.parse(A);B=A.results||{};for(y in B){G=B[y];E=G.id;if(!E){continue}D=E.indexOf("yct:")===0?E.replace("yct:","YCT:"):("WIKIID:"+E);if(h[D]&&G.name&&G.url){h[D].name=G.name;h[D].url=G.url}}}catch(C){b.log(C,"error",j)}},end:function(){b.Global.fire(e+"interest-updated")}}})}h=p(true);d={}},n=function(v,s,t,u){if(h){m(v,s,t,u)}else{b.io("/_xhr/get-topic-interest/",{timeout:2500,on:{success:function(y,z){var w=(z&&z.responseText)?z.responseText:"",A;try{A=b.JSON.parse(w)}catch(x){}if(A){q(A)}},end:function(){m(v,s,t,u)}}})}},m=function(v,s,t,u){if(s&&t){v(k(s,t,u))}else{v(p())}},k=function(z,t,u){var C=p(),s=[],v=0,y,A,x,w,B=z+(u||0);loopTopicHistory:for(x=c.length-1;x>=0;x--){A=c[x];for(w=s.length-1;w>=0;w--){if(s[w].id===A){continue loopTopicHistory}}y=C[A];if(y.state===t&&y.name&&y.url){s[v]={id:A,rawId:y.rawId,name:y.name,state:y.state,url:y.url};v++;if(v>=B){break}}}if(u){return s.splice(u,z)}return s},q=function(z){var y=z.declared||[],u=z.inferred||[],x=0,w,v,t,s;h={};for(t=0,v=u.length;t<v;t++){w=u[t];if(w.id){h[w.id]={name:w.name,state:w.state,url:w.url,rawId:w.raw_id,type:"inferred"}}}for(t=0,v=y.length;t<v;t++){w=y[t];if(w.id&&typeof w.state!=="undefined"){s=h[w.id]?"inf-dec":"declared";h[w.id]={name:w.name,state:w.state,url:w.url,rawId:w.raw_id,type:s};c[x]=w.id;x++}}},p=function(s){var u,t;for(u in d){t=s?h:b.clone(h,true);break}for(u in d){if(!t[u]){t[u]={}}t[u].state=d[u].state}if(t){return t}return h};r()};g.prototype={};b.namespace("Media")[j]=g},"0.0.1",{requires:["node-base","io-base","json-parse","json-stringify"]});/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("json-parse",function(e,t){var n=e.config.global.JSON;e.namespace("JSON").parse=function(e,t,r){return n.parse(typeof e=="string"?e:e+"",t,r)}},"3.14.0",{requires:["yui-base"]});

if(typeof YAHOO==="undefined"||!YAHOO){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.CONF){YAHOO.ULT.CONF={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON=location.protocol+"//geo.yahoo.com/t";}
if(!YAHOO.ULT.DOMAIN){YAHOO.ULT.DOMAIN=".yahoo.com";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
if(typeof(YAHOO.ULT.DEBUG)==="undefined"){YAHOO.ULT.DEBUG=0;}
YAHOO.ULT.DELIMITERS={'/':'P',';':'1','?':'P','&':'1','#':'P'};(function(){var YLT=YAHOO.ULT;}());(function(){var YLT=YAHOO.ULT;YLT.strip_rd=function(u,data){var idx=u.indexOf('/**');if(idx!==-1){data.clean=u.substr(idx+3);data.clean=decodeURIComponent(data.clean);}
return data;};YLT.strip=function(u){var delims=YLT.DELIMITERS;var data={url:u,clean:'',cookie:'',keys:[]};var idx=0;while(u.indexOf('_yl',idx)!==-1){var start=u.indexOf('_yl',idx);if(idx<start){data.clean+=u.slice(idx,start-1);}
idx=start+3;if(delims[u.charAt(start-1)]&&u.charAt(start+4)==='='){data.ult=1;var key="_yl"+u.charAt(start+3);var value="";for(start=start+5;start<u.length&&!delims[u.charAt(start)];start++){value+=u.charAt(start);}
data.keys.push(key);data[key]=value;if(key!=='_ylv'){data.cookie+="&"+key+"="+value;}
if(delims[u.charAt(start)]&&delims[u.charAt(start)]==='P'){data.clean+=u.charAt(start);}
idx=start+1;}else{data.clean+=u.slice(start-1,idx);}}
if(idx){data.clean+=u.substr(idx);}else{data.clean=u;}
if(data.ult){data.cookie=data.cookie.substr(1);if(data._ylv==='0'){YLT.strip_rd(u,data);}}
return data;};YLT.click_token=function(e,u,t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();YLT.IMG.onerror=YLT.IMG.onload=function(){if(e.currentTarget.get('target')==="_top"){top.location=u;}else{location=u;}};e.preventDefault();i.src=src;};YLT.beacon_token=function(t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();i.src=src;};}());YUI().use('node-base',function(Y){var YLT=YAHOO.ULT;YLT.set_href=function(el,data,keyname){if(data.html){el.set('href',data[keyname]);el.set('innerHTML',data.html);}else{el.set('href',data[keyname]);}};YLT.clicked=function(e,data){var el=e.currentTarget;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');}
if(!el){return;}
if(el.get('className').indexOf('yltasis')!==-1){}else if(el.get('className').indexOf('yltnofollow')!==-1){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else if(data._ylv==3){YLT.set_href(el,data,"clean");var cook="D="+data.cookie+"; Max-Age=10; Path=/; Domain="+YLT.DOMAIN;document.cookie=cook;}else if(data._ylv==8||data._ylv==9){}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||data.target==="_blank"){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else{YLT.set_href(el,data,"clean");YLT.click_token(e,data.clean,data.cookie);}};YLT.revert=function(e,data){var el=e.currentTarget;var ie_ischild=0;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');ie_ischild=1;}
if(!el){}else{if(Y.UA.ie&&ie_ischild){delete data.html;}
YLT.set_href(el,data,"url");}};YLT.clean=function(){if(YAHOO.YHLDEBUG){return;}
var el,data,name,i;for(i=0;i<document.links.length;i++){el=document.links[i];if(el.className.indexOf('yltasis')!==-1){continue;}
data=YLT.strip(el.getAttribute('href',2));if(!data.ult){continue;}else if(YLT.CONF.force_beacon&&data._ylv!=8&&data._ylv!=9){data._ylv='X';}
for(name=0;name<data.keys.length;name++){if(data.keys[name]!=='_ylv'){delete data[data.keys[name]];}}
delete data.keys;delete data.ult;data.target=el.target;if(Y.UA.ie&&el.children.length===0&&(el.innerHTML.indexOf('http')===0||el.innerHTML.indexOf('www')===0||el.innerHTML.indexOf('@')!==-1||el.className.indexOf('yltiefix')!==-1)){data.html=el.innerHTML;}
var node=Y.one(el);YLT.set_href(node,data,"clean");node.on("click",YLT.clicked,null,data);if(!YLT.CONF.cleanest){node.on("mousedown",YLT.revert,null,data);}}};Y.on('domready',function(){YAHOO.ULT.clean();});});YUI.add('media-strip',function(){});YUI.add('ylt-strip',function(){});
/* instrumentation.js 1214752 */ YUI.add("media-instrumentation",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="Instrumentation";a.ATTRS={};b.extend(a,b.Base,{initializer:function(d){var c=this;d=d||{};c.instrumentAd()},instrumentAd:function(){b.Global.on("darla:success",function(g){var d=g.positions,f=d.length,h,c,e=["lrec","wp"];while(f--){c=d[f].toLowerCase();if(b.Array.indexOf(e,c)>=0){h={data:{name:c+"_impression",keys:{act:c+"_impression"}}};b.Global.fire("rapid-tracker:event",h);break}}})}});b.namespace("Media").Instrumentation=a},"0.1",{requires:[]});
/* content-comments.js 1765385 */ YUI.add("media-content-comments",function(a){a.namespace("Media");a.Media.ContentComments=a.Base.create("media-content-comments",a.Base,[],{config:{},chrome:"",initializer:function(c){var b=this;b.config=c&&c.config?c.config:{};b.chrome=c&&c.chrome?c.chrome:"";b.shown=false;b.commentCount=0;b.enableWhitelist=0;if(1==b.config.enableWhitelist&&1==b.config.supportWhitelist){b.enableWhitelist=1}b.config.device=b.chrome.getDevice();b.config.deviceOS=b.chrome.getDeviceOS();b.config.deviceOSVer=b.chrome.getDeviceOSVer();b.config.contentId=b.config.contentId||b.chrome.getContentId();b.config.deviceIsDesktop="full"===b.config.device||"desktop"===b.config.device;b.config.deviceIsSmartphone="smartphone"===b.config.device;b.config.deviceIsTablet="tablet"===b.config.device;b.config.ult=b.getUltConfig();b.config.activeFilter="all";b.config.activeSort="pop";b.config.newPostCounter=0;b.config.firstFetch=true;b.config.counterAnim={};b.nodes={};b.nodes.container=a.one("#"+b.config.modId);b.strings=b.config.strings;b.templates={};b.templates.comment={};b.templates.reply={};b.templates.report={};b.templates.loader='<li><div class="comments-loader"></div></li>';b.templates.loaderDiv='<div class="comments-loader"></div>';b.templates.fullLoadMask='<div id="comments-loading-mask-{{id}}" class="full-loading-mask"><div class="comments-loader"></div></div>';b.templates.listLoadMask='<div id="comments-loading-mask-{{id}}" class="list-loading-mask"><div class="comments-loader"></div></div>';b.templates.deeplinkEnd='<li id="deeplink-end"></li>';b.templates.newReplyList='<ul class="new-reply-list"></ul>';b.templates.areYouSure='<div class="hidden expert-user-action-confirm">'+b.strings.areYouSure+' <a class="yes" href="#">'+b.strings.yes+'</a> <a class="no" href="#">'+b.strings.no+"</a></div>";b.templates.comment.errorEmpty=["<p>",b.strings.errorCommentEmpty,"</p>"].join("");b.templates.comment.errorTooLong=["<p>",b.strings.errorCommentTooLong,"</p>"].join("");b.templates.comment.errorRevalidate=["<p>",b.strings.errorCommentRevalidate,"</p>"].join("");b.templates.reply.errorEmpty=["<p>",b.strings.errorReplyEmpty,"</p>"].join("");b.templates.reply.errorTooLong=["<p>",b.strings.errorReplyTooLong,"</p>"].join("");b.templates.reply.errorRevalidate=["<p>",b.strings.errorReplyRevalidate,"</p>"].join("");b.templates.report.errorOtherEmpty=["<p>",b.strings.errorReportOtherEmpty,"</p>"].join("");b.templates.report.errorSelectViolation=["<p>",b.strings.errorReportSelectViolation,"</p>"].join("");b.templates.report.errorRevalidate=["<p>",b.strings.errorReportRevalidate,"</p>"].join("");b.templates.errorViolation=["<p>",b.strings.err_violation,"</p>"].join("");b.templates.msgReport=["<p>",b.strings.msg_report,"</p>"].join("");b.classnames={};b.classnames.commentContainer=".comment-container";b.classnames.replyContainer=".reply-container";b.classnames.listItem=".js-item";b.classnames.list=".js-list";b.classnames.error=".err";b.classnames.userCommentBody=".user-comment-body";b.classnames.expertActionItem=".expert-user-action-item";b.classnames.expertActionConfirm=".expert-user-action-confirm";b.classnames.featured=".featured.hidden";b.keys={enter:13,space:32,left:37,right:39};b.activeXhr={};b.activeXhr.loaders={};b.activeDelete={};b.activeMute={};b.activeSwipe={};b.activeSwipe.axis="x";b.activeSwipe.swipeMinDistance=10;b.activeSwipe.preventDefaultRange=10;b.activeSwipe.invalidSwipeRange=100;b.activeSwipe.tapThreshold=10;b.config.contentMetadata=b.getContentMetadata()},bindEvents:function(){var c=this;var b=function(){var d;if(c.xhrResponseTemp&&c.xhrResponseTemp.data){c.createCommentList(c.xhrResponseTemp.data,c.xhrResponseTemp.params,true,true)}c.beaconClick(c.config.ult.view_comments);c.nodes.showCollapsedCommentsButton.remove(true);if(c.nodes.commentIceberg){c.nodes.commentIceberg.remove(true)}if(c.nodes.showCommentsListening){c.nodes.showCommentsListening.remove(true)}if(c.nodes.userimgContainer){c.nodes.userimgContainer.remove(true)}d=c.nodes.container.appendChild(c.templates.loaderDiv);setTimeout(function(){d.remove(true);c.nodes.container.one("#collapse-wrapper").removeClass("hidden")},600)};if(c.config.enableAutoTearDown){a.Global.on("content-manager:active-content-changed",c.tearDown,c)}if(c.nodes.showCommentsButton){c.nodes.showCommentsButton.on("click",function(d){d.preventDefault();c.beaconClick(c.config.ult.view_comments);c.displayModule(d.currentTarget)})}if(c.nodes.showCollapsedCommentsButton){c.nodes.showCollapsedCommentsButton.on("click",function(d){d.preventDefault();b()})}if(c.nodes.userimgContainer){c.nodes.userimgContainer.on("click",function(d){d.preventDefault();b()})}if(c.nodes.commentCounterAnim){c.bindCounterAnim()}c.nodes.container.delegate("click",function(){return true},function(g,f){var d=f.target.get("tagName").toLowerCase();if(f.metaKey||d.indexOf("textarea")>-1||d.indexOf("select")>-1||d.indexOf("input")>-1){return true}else{g.blur()}},c);if(c.nodes.postBoxInput){c.nodes.postBoxInput.on("focus",function(){c.nodes.postButton.ancestor().removeClass("shrunk");if(1!==c.config.enableNarrowLayout){c.nodes.sortBar.setStyle("marginTop",0)}},c)}c.nodes.list.delegate("click",c.loadMoreComments,".comments-button .generic-button",c);c.nodes.list.delegate("click",c.loadMoreReplies,".replies-button .generic-button",c);c.nodes.list.delegate("click",c.loadReplies,".comment-container .replies",c);c.nodes.list.delegate("click",c.confirmDelete,".comment-container .delete",c);c.nodes.list.delegate("click",c.undoDelete,".delete-container .comments-undo",c);c.nodes.list.delegate("click",c.undoMute,".report-message-container .comments-undo",c);c.nodes.list.delegate("click",c.showReplyPostbox,".comment-container .reply",c);c.nodes.list.delegate("click",c.showLowRated,".comment-container .show",c);if(c.config.enableViewOthers){c.nodes.list.delegate("click",c.loadUserComments,".profile-link",c)}if(!c.config.loginStatus){a.one("body").on("click",function(d){if(c.signupRendered&&(c.nodes.signupParent===d.target||!c.nodes.signup.contains(d.target))){c.removeLoginOverlay()}})}c.nodes.container.delegate("click",c.postCommentNReply,".post-button",c);c.nodes.list.delegate("click",c.onMoreActionsClick,".actions",c);if(0===c.config.enableMuteCommenter){c.nodes.list.delegate("change",c.onAbuseReasonChange,".report-container",c)}c.nodes.list.delegate(0===c.config.enableMuteCommenter?"submit":"click",c.onAbuseSubmit,0===c.config.enableMuteCommenter?".form-report-abuse":".report-button",c);c.nodes.list.delegate("click",function(f){var d=f.target.ancestor("div.more-reason").one("input.category");d.set("checked",true)},"input.other-reason");c.nodes.list.delegate("click",c.rateComment,c.isRateable,c);c.nodes.list.delegate("click",function(g){var f=g.target.ancestor(".text-container"),d=g.target.siblings(".comment-content");f.toggleClass("long");if(1===c.config.enableNarrowLayout&&d){d.removeClass("short")}g.target.addClass("hidden")},".more-text-button");a.after("MCC:hide-overlay",function(e){var f=e.node.ancestor(c.classnames.listItem,false,".yom-comments"),d=f.one(c.classnames.commentContainer);if(d){d.removeClass("active")}});if(!c.config.deviceIsDesktop){c.nodes.list.delegate("gesturemovestart",c.swipeStart,c.classnames.listItem,null,c);c.nodes.list.delegate("gesturemoveend",c.swipeEnd,c.classnames.listItem,null,c)}if(c.nodes.filterBar.filterSwitch){c.nodes.filterBar.filterSwitch.on("click",c.handleFilterChange,c)}c.nodes.sortBar.delegate("click",c.handleSortChange,".comment-sort",c);c.nodes.sortBar.delegate("change",c.handleSortChange,".comments-select",c);c.nodes.list.delegate("click",function(i){var f=this,h=i.currentTarget.ancestor(f.classnames.listItem,false,f.classnames.list),d=h.one(f.classnames.commentContainer),g=h.one(".report-container");i.preventDefault();g.remove();d.removeClass("hover-disabled");d.removeClass("active")},".btn-cancel",c);c.nodes.container.delegate("change",c.resizePostbox,".comment-input-textarea",c);c.nodes.container.delegate("keydown",c.resizePostbox,".comment-input-textarea",c);c.nodes.container.delegate("keyup",c.resizePostbox,".comment-input-textarea",c);c.nodes.list.delegate("click",c.fireProfileLinkBeacon,".profile-link",c);c.nodes.container.delegate("click",c.firePostBoxLoginBeacon,".postbox-login-yh",c,{type:"login-yh"});c.nodes.container.delegate("click",c.fireOverlayLoginBeacon,".overlay-login-yh",c,{type:"login-yh"});c.nodes.container.delegate("click",c.fireOverlayLoginBeacon,".overlay-login-fb",c,{type:"login-fb"});c.nodes.container.delegate("keydown",c.handleKeyboardInput,".int",c);if(c.fetchPollMarkup){c.fetchPollMarkup()}c.nodes.container.delegate("click",c.fireShareBeacon,".share-btn.facebook",c,{slk:"btn-sh-fb"});c.nodes.container.delegate("click",c.fireShareBeacon,".share-btn.twitter",c,{slk:"btn-sh-tw"});c.nodes.container.delegate("click",c.expertAction,".expert-user-action-item .remove",c);c.nodes.container.delegate("click",c.expertAction,".expert-user-action-item .feature",c);c.nodes.container.delegate("click",c.expertConfirm,".expert-user-action-item .yes",c);c.nodes.container.delegate("click",c.expertCancel,".expert-user-action-item .no",c)},bindNodes:function(){var b=this;b.nodes.showCommentsButton=b.nodes.container.one("#comments-show");b.nodes.showCollapsedCommentsButton=b.nodes.container.one("#collapsed-comments-show");b.nodes.commentIceberg=b.nodes.container.one(".comment-iceberg");b.nodes.commentCounterAnim=b.nodes.container.one(".anim-counter");b.nodes.showCommentsListening=b.nodes.container.one(".comments-listening");b.nodes.userimgContainer=b.nodes.container.one(".userimg-container");b.nodes.sortBar=b.nodes.container.one("#comments-sortbar");if(b.config.deviceIsSmartphone){b.nodes.sortBarSelect=b.nodes.sortBar.one(".comments-select")}b.nodes.filterBar={};b.nodes.filterBar.container=b.nodes.container.one("#comments-filterbar");b.nodes.filterBar.filterSwitch=b.nodes.filterBar.container.one(".filter-switch");b.nodes.filterBar.activeFilter=b.nodes.filterBar.container.one(".active-filter");b.nodes.postBox=b.nodes.container.one("#comments-postbox");b.nodes.postBoxInput=b.nodes.postBox.one(".comment-input-textarea");b.nodes.postButton=b.nodes.container.one(".post-button");b.nodes.list=b.nodes.container.one("#comments-list");b.nodes.reportForm=b.nodes.container.one(".report-container");b.nodes.deleteForm=b.nodes.container.one(".delete-container");b.nodes.reportMsgForm=b.nodes.container.one(".report-message-container");b.nodes.pollContainer=b.nodes.container.one("#comments-poll");b.nodes.guidelineButton=b.nodes.postBox.one(".guideline-button");b.nodes.expertUserActionConfirm=b.nodes.container.one(".expert-user-action-confirm")},tearDown:function(){var b=this;b.nodes.container.purge(true);b.detachInfiniteScroll();b.detachCounterAnim();delete a.Media.pageContentComments},hide:function(){var b=this;b.nodes.container.hide()},show:function(){var b=this;b.nodes.container.show()},handleKeyboardInput:function(c){var b=this;if(c.altKey){return}switch(c.keyCode){case b.keys.left:case b.keys.right:c.stopPropagation();break;case b.keys.enter:case b.keys.space:if(c.ctrlKey||c.shiftKey){return}a.Event.simulate(c.target.getDOMNode(),"click",{metaKey:true});break}},fireReportAbuseFlagClickBeacon:function(f){var c=this,b,g,d,e;if(f.hasClass("comment")){g=f.getAttribute("data-page").split("-");e={sec:"cmmt-ctrl",keys:{bpos:g[0],cpos:g[1]}}}else{if(f.hasClass("reply")){b=f.ancestor(".comment");g=b.getAttribute("data-page").split("-");d=f.getAttribute("data-index").split("-");e={sec:"cmmt-ctrl-ry",keys:{bpos:g[0],cpos:g[1],rbpos:d[0],rpos:d[1]}}}else{return}}c.beaconClick(c.config.ult.report_abuse_flag,e)},getUltParam:function(f,c){var d,g,b,e={};if(f.hasClass("reply")){d=f.ancestor(".comment");g=d.getAttribute("data-page").split("-");b=f.getAttribute("data-index").split("-");e.sec=c+"-ry";e.keys={bpos:g[0],cpos:g[1],rbpos:b[0],rpos:b[1]}}else{g=f.getAttribute("data-page").split("-");e.sec=c;e.keys={bpos:g[0],cpos:g[1]}}return e},fireMuteAndReportAbuseBeacon:function(g,d){var b=this,i=d.reason,e,h,c,f=b.getUltParam(g,"cmmt-abse");if(i.indexOf("impersonation")!=-1){f.keys.abt=1}else{if(i.indexOf("harassment")!=-1){f.keys.abt=2}else{if(i.indexOf("obscenity")!=-1){f.keys.abt=3}else{if(i.indexOf("derogatory language")!=-1){f.keys.abt=4}else{if(i.indexOf("spam")!=-1){f.keys.abt=5}else{if(i.indexOf("other")!=-1){f.keys.abt=6}}}}}}if(d.mute){f.keys.mute=d.mute}b.beaconClick(b.config.ult.report_abuse,f)},errlog:function(c,b){if(a.Af&&a.Af.Beacon&&c&&b){a.Af.Beacon.error("media-content-comments",c,b)}},fireOverlayLoginBeacon:function(f,h){var l=this,j=f.target.ancestor(l.classnames.listItem,false,".yom-comments"),c=f.target.ancestor(".comments-signup"),b=c?c.getAttribute("data-action"):h.action,k,g,d,i;if(!j){i={sec:b,linkname:h.type}}else{if(j.hasClass("comment")){g=j.getAttribute("data-page").split("-");i={sec:"cmmt-"+b,linkname:h.type,keys:{bpos:g[0],cpos:g[1]}}}else{if(j.hasClass("reply")){k=f.target.ancestor(".comment");g=k.getAttribute("data-page").split("-");d=j.getAttribute("data-index").split("-");i={sec:"cmmt-ry-"+b,linkname:h.type,keys:{bpos:g[0],cpos:g[1],rbpos:d[0],rpos:d[1]}}}else{return}}}l.beaconClick(l.config.ult.login_point,i)},firePostBoxLoginBeacon:function(i,d){var c=this,f=i.target.ancestor(".postbox"),b,h,g;if(f.hasClass("cmmt")){g={sec:"cmmt",linkname:d.type}}else{if(f.hasClass("cmmt-ry")){b=i.target.ancestor(".reply-list-container");h=b.getAttribute("data-page").split("-");g={sec:"cmmt-ry",linkname:d.type,keys:{bpos:h[0],cpos:h[1]}}}else{return}}c.beaconClick(c.config.ult.login_point,g)},fireProfileLinkBeacon:function(i){var c=this,g,h,d,f=i.target.ancestor(c.classnames.listItem),b;if(f.hasClass("reply")){b=f.ancestor(".reply-list-container");h=b.getAttribute("data-page").split("-");d=f.getAttribute("data-index").split("-");g={sec:"cmmt-ry",keys:{bpos:h[0],cpos:h[1],rbpos:d[0],rpos:d[1]}}}else{h=f.getAttribute("data-page").split("-");g={sec:"cmmt",keys:{bpos:h[0],cpos:h[1]}}}c.beaconClick(c.config.ult.profiles,g)},fireShareBeacon:function(d,g){var k=this,i=d.target.ancestor(k.classnames.listItem,false,".yom-comments"),b=d.target.ancestor(".comments-signup"),j,f,c,h;if(i.hasClass("comment")){f=i.getAttribute("data-page").split("-");h={sec:"cmmt-sh",linkname:g.slk,keys:{bpos:f[0],cpos:f[1]}}}else{if(i.hasClass("reply")){j=d.target.ancestor(".comment");f=j.getAttribute("data-page").split("-");c=i.getAttribute("data-index").split("-");h={sec:"cmmt-ry-sh",linkname:g.slk,keys:{bpos:f[0],cpos:f[1],rbpos:c[0],rpos:c[1]}}}else{return}}k.beaconClick(k.config.ult.share,h)},handleSortChange:function(f){var k=this,j=k.config.activeSort,h,g,b,d,i,c;if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m5")}if("change"===f.type){h=f.currentTarget.get("value").split("&");g=h[0];b=h[1];i=function(){k.config.activeSort=b;f.currentTarget.setAttribute("data-time",new Date().getTime());k.beaconClick(k.config.ult.select_sort,{keys:{ltxt:k.config.activeSort}})};c=function(){var e=this;e.config.activeSort=j;if("pop"===j){f.currentTarget.set("selectedIndex",0)}else{if("new"===j){f.currentTarget.set("selectedIndex",1)}else{if("old"===j){f.currentTarget.set("selectedIndex",2)}else{if("rep"===j){f.currentTarget.set("selectedIndex",3)}}}}};d=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m5");window.MediaPerfTiming.done("Comments")}};k.loadComments(f,{api:"GET_COMMENTS",query:g,removeTarget:false,replaceContent:true,end:d,success:i,failure:c,maskType:"list"})}else{if(!f.target.hasClass("active")){i=function(){var e;k.config.activeSort=f.target.getAttribute("data-cf");e=f.target.siblings(".comment-sort");e.each(function(l){l.removeClass("active")});f.target.addClass("active");f.target.setAttribute("data-time",new Date().getTime());k.beaconClick(k.config.ult.select_sort,{keys:{ltxt:k.config.activeSort}})};c=function(){var e=this;e.config.activeSort=j;f.target.removeClass("active");if("pop"===j){e.nodes.sortBar.one(".most-popular").addClass("active")}else{if("new"===j){e.nodes.sortBar.one(".most-recent").addClass("active")}else{if("old"===j){e.nodes.sortBar.one(".oldest").addClass("active")}else{if("rep"===j){e.nodes.sortBar.one(".most-replied").addClass("active")}}}}};d=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m5");window.MediaPerfTiming.done("Comments")}};k.loadComments(f,{api:"GET_COMMENTS",query:f.target.getAttribute("data-query"),removeTarget:false,replaceContent:true,end:d,success:i,failure:c,maskType:"list"})}}},handleFilterChange:function(g){var d=this,c,f=d.config.activeFilter,b={removeTarget:false,maskType:"full"};b.success=function(){var e=d.nodes.filterBar.filterSwitch.getAttribute("data-cf"),j,i,h;if("all"===e){j=d.strings.allComments;h=d.strings.myComments;i="my"}else{if("my"===e){j=d.strings.myComments;h=d.strings.allComments;i="all"}}if(1===d.config.enableNarrowLayout){j="<h3>"+j+"</h3>";h="<h3>"+h+"</h3>"}d.nodes.filterBar.filterSwitch.setAttribute("data-cf",i);d.nodes.filterBar.filterSwitch.setContent(h);d.nodes.filterBar.activeFilter.setAttribute("data-cf",e);d.nodes.filterBar.activeFilter.setContent(j);d.config.activeFilter=e;if(!d.config.loginStatus){d.nodes.filterBar.filterSwitch.addClass("hidden")}d.beaconClick(d.config.ult.select_filter,{keys:{ltxt:d.config.activeFilter}})};if("all"===d.config.activeFilter){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m4")}b.end=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m4");window.MediaPerfTiming.done("Comments")}};b.api="GET_USER_COMMENTS";b.query="guid="+d.config.loginProfile.guid;c=function(){var e=this;e.nodes.sortBar.addClass("hidden");e.nodes.postBox.addClass("hidden")}}else{if("my"===d.config.activeFilter||"user"===d.config.activeFilter){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m3")}b.end=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m3");window.MediaPerfTiming.done("Comments")}};b.api="GET_COMMENTS";switch(d.config.activeSort){case"new":b.query="sortBy=latest";break;case"old":b.query="sortBy=oldest";break;case"rep":b.query="sortBy=mostReplied";break}c=function(){var e=this;e.nodes.sortBar.removeClass("hidden");e.nodes.postBox.removeClass("hidden")}}else{return}}b.replaceContent=true;b.uiUpdateFunction=c;b.failure=function(){var e=this;e.config.activeFilter=f};d.loadComments(g,b)},resizePostbox:function(c){var b=this,d=c.currentTarget.get("value"),f=c.currentTarget.next(".comment-input-copy");f.set("innerHTML",b.escapePostContent(d))},getErrorTemplate:function(b,c){if("li"===b){return'<li class="list-error"><div class="err"><p>'+c+"</p></div></li>"}else{if("div"===b){return'<div class="err"><p>'+c+"</p></div>"}}},getReplyListTemplate:function(){return'<div class="reply-list-container"><ul class="reply-list"></ul></div>'},bindCounterAnim:function(){var b=this;b.config.counterAnim.scrollHandler=a.on("scroll",b.counterAnimScrollDispatcher,window,b);b.config.counterAnim.resizeHandler=a.on("resize",b.counterAnimScrollDispatcher,window,b);b.counterAnimScrollDispatcher()},counterAnimScrollDispatcher:function(){var b=this;if(a.DOM.inViewportRegion(b.nodes.commentCounterAnim.getDOMNode(),true)){b.detachCounterAnim();var g=b.nodes.commentCounterAnim.one(".counter-anim-frame-0");var f=b.nodes.commentCounterAnim.one(".counter-anim-frame-1");var d=g.getContent();var c=d-2;var e=function(h){switch(h.type){case"animationiteration":case"webkitAnimationIteration":if(c>=d){g.removeClass("counterAnim");f.removeClass("counterAnim")}else{g.setContent(c);f.setContent(c+1)}c++;break}};a.mix(a.Node.DOM_EVENTS,{animationiteration:true,webkitAnimationIteration:true});g.on("animationiteration",e,b);g.on("webkitAnimationIteration",e,b);g.setContent(c-1);f.setContent(c);g.addClass("counterAnim");f.addClass("counterAnim");f.removeClass("hidden")}},detachCounterAnim:function(){var b=this;if(b.config.counterAnim.scrollHandler){b.config.counterAnim.scrollHandler.detach()}if(b.config.counterAnim.resizeHandler){b.config.counterAnim.resizeHandler.detach()}},bindInfiniteScroll:function(){var b=this;if(1===b.config.enableInfiniteScroll){if(!b.config.infinite.scrollHandler){b.config.infinite.scrollHandler=a.on("scroll",b.scrollDispatcher,window,b)}if(!b.config.infinite.resizeHandler){b.config.infinite.resizeHandler=a.on("resize",b.scrollDispatcher,window,b)}}},detachInfiniteScroll:function(){var b=this;if(1===b.config.enableInfiniteScroll){if(b.config.infinite.scrollHandler){b.config.infinite.scrollHandler.detach();b.config.infinite.scrollHandler=null}if(b.config.infinite.resizeHandler){b.config.infinite.resizeHandler.detach();b.config.infinite.resizeHandler=null}b.config.infinite.node=b.config.infinite.nodeY=null}},scrollDispatcher:function(){var b=this;if(b.config.infinite.timer){b.config.infinite.timer.cancel()}b.config.infinite.timer=a.later(b.config.infinite.timerDelay,b,b.handleScrollTimer)},handleScrollTimer:function(){var b=this,e,g={},d,c,f;b.config.infinite.timer=null;if(!b.config.infinite.impressionBeaconFired&&b.config.infinite.container){c=a.DOM.docScrollY()+a.DOM.winHeight();if(c>=b.config.infinite.containerY){b.beaconEvent(b.config.ult.module_impression);b.config.infinite.impressionBeaconFired=true;if(!b.config.infinite.node){b.detachInfiniteScroll()}}}if(b.config.infinite.node){c=c||a.DOM.docScrollY()+a.DOM.winHeight();if(c>=b.config.infinite.nodeY-b.config.infinite.yOffset){f=b.config.infinite.node.getAttribute("data-page").split("-");g.currentTarget=b.config.infinite.node;b.config.infinite.node=null;b.config.infinite.nodeY=null;if("all"===b.config.activeFilter){e="GET_COMMENTS"}else{if("my"===b.config.activeFilter){e="GET_USER_COMMENTS"}}d=g.currentTarget.getAttribute("data-query");if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m6")}if(""!==d){b.loadComments(g,{api:e,query:g.currentTarget.getAttribute("data-query"),removeTarget:true,end:function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m6");window.MediaPerfTiming.done("Comments")}b.beaconEvent(b.config.ult.infinite_scroll,{keys:{bpos:f[0]}})}})}}}},removeErrorNodes:function(c){var b=c.all(".list-error");if(b){b.each(function d(e){e.remove(true)})}},loadComments:function(d,c){var b=this;b.fetchContent({target:(c.removeTarget)?d.currentTarget:null,replaceContent:c.replaceContent,uiUpdateFunction:c.uiUpdateFunction,container:b.nodes.list,api:c.api,query:c.query||"",start:function(e){if(c.replaceContent){if("full"===c.maskType){b.nodes.container.appendChild(b.templates.fullLoadMask.replace("{{id}}",e));b.activeXhr.loaders[e]=b.nodes.container.one("#comments-loading-mask-"+e)}else{if("list"===c.maskType){b.nodes.list.appendChild(b.templates.listLoadMask.replace("{{id}}",e));b.activeXhr.loaders[e]=b.nodes.list.one("#comments-loading-mask-"+e)}}}else{b.activeXhr.loaders[e]=b.nodes.list.insertBefore(b.templates.loader,d.currentTarget)}},end:c.end||null,failure:c.failure||null,success:c.success||null})},loadMoreComments:function(g){var c=this,f=g.currentTarget.getAttribute("data-page").split("-"),h=g.currentTarget.getAttribute("data-query")||null,d=("my"===c.config.activeFilter||"user"===c.config.activeFilter)?"GET_USER_COMMENTS":"GET_COMMENTS",b;if("show_all"===h){if(c.config.firstFetch){c.config.firstFetch=false;b=c.nodes.list.all(".comment");b.removeClass("hidden");g.currentTarget.ancestor().remove(true)}}else{c.loadComments(g,{api:d,query:h,removeTarget:true})}c.beaconClick(c.config.ult.more_comments,{keys:{bpos:f[0]}})},loadUserComments:function(g){var d=this,c,f=g.target.getAttribute("data-guid")||d.config.loginProfile.guid,b={removeTarget:false,maskType:"full"};b.success=function(){var i="user",h=d.strings.allComments,j=d.strings.usersComments.replace("%N",g.target.getContent()),e=d.nodes.container.one("#user-comments-profilebox");d.nodes.filterBar.filterSwitch.setAttribute("data-cf","all");d.nodes.filterBar.filterSwitch.setContent(h);d.nodes.filterBar.activeFilter.setAttribute("data-cf",i);d.nodes.filterBar.activeFilter.setContent(j);d.config.activeFilter=i;if(!d.config.loginStatus){d.nodes.filterBar.filterSwitch.removeClass("hidden")}e.scrollIntoView();d.beaconClick(d.config.ult.select_filter,{keys:{ltxt:d.config.activeFilter}})};b.api="GET_USER_COMMENTS";b.query="guid="+f;c=function(){var e=this;e.nodes.sortBar.addClass("hidden");e.nodes.postBox.addClass("hidden")};b.replaceContent=true;b.uiUpdateFunction=c;b.failure=function(){var e=this;e.config.activeFilter=activeFilter};d.loadComments(g,b)},confirmDelete:function(h){var l=this,j=("li"===h.currentTarget.get("tagName").toLowerCase())?h.currentTarget:h.currentTarget.ancestor(l.classnames.listItem),i=j.one(".comment-container"),d=l.nodes.deleteForm.cloneNode(true),c=j.get("className"),b,k,g,f;d.removeClass("hidden");if(c.indexOf("comment")>-1){d.one(".comments-delete-message").setContent(l.strings.commentRemoved);g=j.getAttribute("data-cmt")}else{if(c.indexOf("reply")>-1){d.one(".comments-delete-message").setContent(l.strings.replyRemoved);k=j.ancestor(l.classnames.listItem,false,l.classnames.list);g=k.getAttribute("data-cmt");f=j.getAttribute("data-reply")}else{return}}i.addClass("hidden");i.siblings().addClass("hidden");b=j.appendChild(d);l.activeDelete[g+f]={};l.activeDelete[g+f].timer=a.later(5000,l,l.deleteComment,{parent:j,commentId:g,replyId:f||null,parentComment:k||null});if(l.config.deviceIsDesktop){l.activeDelete[g+f].mouseLeave=b.on("mouseleave",function(m){l.activeDelete[g+f].timer=a.later(5000,l,l.deleteComment,{parent:j,commentId:g,replyId:f||null,parentComment:k||null})},l);l.activeDelete[g+f].mouseEnter=b.on("mouseenter",function(m){if(l.activeDelete[g+f].timer){l.activeDelete[g+f].timer.cancel()}},l)}},undoDelete:function(g){var k=this,i=("li"===g.currentTarget.get("tagName").toLowerCase())?g.currentTarget:g.currentTarget.ancestor(k.classnames.listItem),b=i.one(".delete-container"),h=i.one(".comment-container"),c=i.get("className"),j,f,d;if(c.indexOf("comment")>-1){f=i.getAttribute("data-cmt")}else{if(c.indexOf("reply")>-1){j=i.ancestor(k.classnames.listItem,false,k.classnames.list);f=j.getAttribute("data-cmt");d=i.getAttribute("data-reply")}}if(k.activeDelete[f+d].timer){k.activeDelete[f+d].timer.cancel()}h.removeClass("hidden");h.siblings().removeClass("hidden");b.remove(true)},deleteComment:function(i){var n=this,k=i.parent,g=i.parent.ancestor(".user-comment-body"),c=g?g.getAttribute("data-context"):n.config.contentId,e=i.commentId,m=i.parentComment,d=i.replyId||undefined,h=i.parent.getAttribute("data-page").split("-"),j,l,b,f;b=function(r,p,q){var o=this;if("abort"!==p.statusText){if(q&&q.message){k.one(".delete-container").addClass("err");k.one(".comments-delete-message").setContent(q.message)}else{k.one(".delete-container").addClass("err");k.one(".comments-delete-message").setContent(o.strings.errorGeneric)}}o.activeDelete[e+d].mouseEnter.detach();o.activeDelete[e+d].mouseLeave.detach()};l=function(q,o,p){p.parent.addClass("transition-delete");setTimeout(function(){var t=p.parent,v=p.parentComment,s=p.commentId,w,r,u;t.remove(true);if(v){u=v.all(".js-item");if(0===u.size()){v.removeClass("expanded-replies");w=v.one("#reply-postbox-"+s);if(w){w.remove(true)}r=v.one(".replies");if(r){r.remove(true)}}n.beaconClick(n.config.ult.delete_reply)}else{n.beaconClick(n.config.ult.delete_comment)}},500)};j={comment_id:e,content_id:c};if(d){f="DELETE_REPLY";j.reply_id=d}else{f="DELETE_COMMENT"}n.postXhr({api:f,postParams:j,success:l,failure:b,args:{parent:k,parentComment:m,commentId:e}})},showReplyPostbox:function(i){var c=this,h=i.currentTarget.ancestor(c.classnames.listItem),b=h.one(".reply-list-container"),f=h.getAttribute("data-cmt"),d=h.get("className"),g;if(!c.config.loginStatus){if(!c.config.deviceIsDesktop){c.mobileLoginRedirect({e:i,action:"reply",commentId:f,replyId:null})}else{c.renderLoginOverlay(i,"reply")}}else{if(d.indexOf("expanded-replies")>-1&&b.one("#reply-postbox-"+f)){g=b.one("#reply-postbox-"+f);if(!a.DOM.inViewportRegion(g.getDOMNode(),true)){g.scrollIntoView()}}else{if(d.indexOf("expanded-postbox")>-1){g=b.one("#reply-postbox-"+f);g.addClass("hidden");h.removeClass("expanded-postbox")}else{h.addClass("expanded-postbox");if(!b){b=h.appendChild(c.getReplyListTemplate());c.insertPostbox({container:b,commentId:f})}else{g=b.one("#reply-postbox-"+f);if(g){g.removeClass("hidden")}else{c.insertPostbox({container:b,commentId:f})}}}}}},showLowRated:function(f){var b=this,c=f.target.ancestor(".comment-container"),d=c.next(".comment-container");c.remove(true);d.removeClass("hidden")},loadReplies:function(n){var q=this,p=n.currentTarget.ancestor(q.classnames.listItem),o=p.getAttribute("data-page").split("-"),g=p.get("className"),l=p.getAttribute("data-cmt"),k=p.next(".js-item"),b=p.one("#reply-postbox-"+l),f=p.ancestor(q.classnames.userCommentBody),h="",i=null,c=null,d=n.target.get("innerHTML"),r=n.target.getAttribute("data-state"),j,m;if(!k){k=p.next(".comments-button")}if(g.indexOf("expanded-replies")>-1){p.replaceClass("expanded-replies","closed-replies");p.removeClass("expanded-postbox");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);p.one(".reply-list").addClass("hidden");i=p.one(".new-reply-list");if(i){i.addClass("hidden")}if(b){b.addClass("hidden")}q.beaconClick(q.config.ult.close_replies,{keys:{bpos:o[0],cpos:o[1]}})}else{if(g.indexOf("closed-replies")>-1){p.replaceClass("closed-replies","expanded-replies");p.one(".reply-list").removeClass("hidden");i=p.one(".new-reply-list");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);if(i){i.removeClass("hidden")}if(b){b.removeClass("hidden")}q.beaconClick(q.config.ult.open_replies,{keys:{bpos:o[0],cpos:o[1]}})}else{m="GET_REPLIES";c=p.one(".reply-list-container");if(!c){c=p.appendChild(q.getReplyListTemplate());j=c.one(".reply-list")}else{j=c.one(".reply-list");j.empty()}if(f){h=f.getAttribute("data-context")}if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m7")}q.fetchContent({target:n.currentTarget,container:j,api:m,query:"comment_id="+l,start:function(e){p.addClass("expanded-replies");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);if(g.indexOf("expanded-postbox")>-1){q.activeXhr.loaders[e]=j.appendChild(q.templates.loader)}else{if(k){q.activeXhr.loaders[e]=q.nodes.list.insertBefore(q.templates.loader,k)}else{q.activeXhr.loaders[e]=q.nodes.list.appendChild(q.templates.loader)}}},end:function(e){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m7");window.MediaPerfTiming.done("Comments")}},success:function(x,s,t){var v=c.one("#reply-postbox-"+l),u=p.one(".new-reply-list"),w;if(!v){if(q.config.loginStatus){q.insertPostbox({container:c,commentId:l})}}else{v.removeClass("hidden")}if(u){w=u.all(".js-item");w.each(function e(z){var y=z.getAttribute("data-reply");if(t.data.commentList.indexOf(y)>-1){z.remove(true)}})}},failure:function(t,e,s){p.removeClass("expanded-replies");n.target.set("innerHTML",n.target.getAttribute("data-reply"))},content_id:h});q.beaconClick(q.config.ult.open_replies,{keys:{bpos:o[0],cpos:o[1]}})}}},loadMoreReplies:function(j){var m=this,l=j.currentTarget.ancestor(m.classnames.listItem),f=j.currentTarget.ancestor().next(".reply"),k=l.getAttribute("data-page").split("-"),g=l.getAttribute("data-cmt"),i=j.currentTarget.getAttribute("data-page").split("-"),b=j.currentTarget.ancestor(".reply-list"),c=l.ancestor(m.classnames.userCommentBody),d="",h="GET_REPLIES";if(c){d=c.getAttribute("data-context")}if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m8")}m.fetchContent({target:j.currentTarget,container:b,api:h,query:"&comment_id="+g+"&"+j.currentTarget.getAttribute("data-query"),start:function(e){m.activeXhr.loaders[e]=b.insertBefore(m.templates.loader,f)},end:function(e){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m8");window.MediaPerfTiming.done("Comments")}},content_id:d});m.beaconClick(m.config.ult.more_replies,{keys:{bpos:k[0],cpos:k[1],rbpos:i[0]}})},postCommentNReply:function(s){var p=this,x=s.target,f="comment",t=null,u=null,l="",d,q,v,k,m,n,g,c,o,h,y,r=p.getContentMetadata(),w=x.ancestor(p.classnames.userCommentBody),j=(w)?w.getAttribute("data-context"):p.config.contentId,i=w?w.one(".context-title a").getAttribute("href"):null,b=w?w.one(".context-title a").get("text"):r.title;if(s.target.hasClass("post-button")){s.preventDefault()}m={content_id:j,url:r.url,enable_whitelist:p.enableWhitelist,contextUrl:i||r.url,contextTitle:b,enable_comment_sharing:p.config.enableCommentSharing,nickName:p.nodes.container.one(".comments-preview .nickname").get("text").replace(/^\s+|\s+$/g,"")};if(x.ancestor(".replies-postbox",false,p.classnames.list)){f="reply";o="POST_REPLIES";v=x.ancestor(".replies-postbox",false,".reply-list-container");t=v.one(".comment-input-textarea");u=v.one(".comment-input-copy");l=t.get("value");n=x.ancestor(".reply-list-container",false,p.classnames.listItem);k=n.one(".new-reply-list");g=x.ancestor(".comment",false,p.classnames.list);if(!k){k=n.insertBefore(p.templates.newReplyList,v)}c="reply";y=v.one(p.classnames.error);m.comment_id=x.ancestor(p.classnames.listItem).getAttribute("data-cmt");m.reply=l}else{o="POST_COMMENTS";v=x.ancestor(".comments-postbox",false,p.classnames.container);t=v.one(".comment-input-textarea");u=v.one(".comment-input-copy");l=t.get("value");k=p.nodes.list;c="comment";y=v.one(p.classnames.error);m.title=r.title;m.img=r.image;m.comment=l}p.removeErrorNodes(k);h=parseInt(t.getAttribute("maxlength"),10);if(""===l.replace(/\s/g,"")){p.handlePostError({input:t,node:y,msg:p.templates[f].errorEmpty,max:h});return}else{if(l.length>h){p.handlePostError({input:t,node:y,msg:p.templates[f].errorTooLong.replace("%N",parseInt(t.get("value").length-h,10)),max:h});return}}t.purge();t.setData("errorHandler",false);t.set("value","");u.empty();d=p.nodes.container.one(".comments-preview").getContent();q=a.Node.create('<li class="'+c+' comments-preview js-item">'+d+"</li>");q.one(".comment-content").setContent(p.escapePostContent(l));if("reply"===f){if(p.config.enableCommentSharing){q.one(".action-container span.replies").remove()}else{q.one(".action-container").remove()}}q.addClass("transition");p.postXhr({api:o,postParams:m,success:function(F,z,B){var C,D,E,A,e=B.previewContent;if("comment"===f){p.config.newPostCounter+=1;C=B.data.message.selfURI.split("comment/")[1];e.setAttribute("data-postNumber",p.config.newPostCounter);e.setAttribute("data-cmt",C);p.beaconClick(p.config.ult.post_comment)}else{D=s.currentTarget.ancestor(p.classnames.listItem);E=D.getAttribute("data-page").split("-");if(""!==E[0]){p.beaconClick(p.config.ult.post_reply,{keys:{bpos:E[0],cpos:E[1]}})}else{p.beaconClick(p.config.ult.post_reply_new_comment,{keys:{bpos:"1",cpos:(p.config.newPostCounter-D.getAttribute("data-postNumber"))+1+""}})}}if(p.config.enableCommentSharing){if(z.response&&a.JSON.parse(z.response)){A=a.JSON.parse(z.response).shareBtnMarkup}if(A){e.one(".action-container").appendChild('<div class="share-btns-container">');e.one(".action-container .share-btns-container").appendChild(A);e.one(".action-container").appendChild('<span class="share-btns-prompt">'+p.strings.shareText+"</span>")}}if(p.activeXhr.loaders[F]){p.activeXhr.loaders[F].get("parentNode").replace(e);delete p.activeXhr.loaders[F]}setTimeout(function(){e.removeClass("comments-preview")},200)},failure:function(F,z,B){var A="",E,D,e=B.postInput,C=B.errorNode;A=m.comment||m.reply;if(p.activeXhr.loaders[F]){p.activeXhr.loaders[F].remove(true);delete p.activeXhr.loaders[F]}e.set("value",A);p.resizePostbox({currentTarget:e});if(B&&B.data&&B.data.status&&401===B.data.status){D=p.getLoginUrl({contextUrl:i||null,commentId:m.comment_id});E=p.templates[f].errorRevalidate.replace("http://login.yahoo.com",D);p.handlePostError({input:e,node:C,msg:E,max:h})}else{if(B&&B.data&&B.data.status&&400===B.data.status&&B.data.error&&B.data.error.description&&B.data.error.description.search("illegal link")!==-1){p.handlePostError({input:e,node:C,msg:"<p>Sorry, we only allow links to verified websites in comments</p>",max:h})}else{p.handlePostError({input:e,node:C,msg:"<p>"+p.strings.errorGeneric+"</p>",max:h})}}},start:function(e){if(g&&g.hasClass("closed-replies")){a.Event.simulate(g.one(".replies").getDOMNode(),"click")}if("reply"===f){k.appendChild(p.templates.loader)}else{k.prepend(p.templates.loader)}p.activeXhr.loaders[e]=k.one(".comments-loader")},args:{previewContent:q,postInput:t,errorNode:y}})},handlePostError:function(c){var b=this;c.node.setContent(c.msg);c.node.removeClass("hidden");if(!c.input.getData("errorHandler")){c.input.on("keyup",b.updatePostError,b,c);c.input.on("blur",b.updatePostError,b,c);c.input.setData("errorHandler",true)}},updatePostError:function(f,c){var b=this,d;c.node.setContent("");if(c.max){d=parseInt(c.input.get("value").length-c.max,10);if(d>0){c.node.setContent(b.strings.postErrorTooLong.replace("%N",d))}}},rateComment:function(g){var n=this,h,j,d,i,m=g.target.ancestor(n.classnames.listItem),b=m.ancestor(n.classnames.userCommentBody),l,f=g.currentTarget,c=f.one(".count"),k={content_id:n.config.contentId,comment_id:""};if(b){k.content_id=b.getAttribute("data-context");k.contextUrl=b.one(".context-title a").getAttribute("href")}if(m.hasClass("reply")){k.reply_id=m.getAttribute("data-reply");k.comment_id=g.currentTarget.ancestor(".comment").getAttribute("data-cmt")}else{k.comment_id=m.getAttribute("data-cmt")}if(!n.config.loginStatus){if(!n.config.deviceIsDesktop){n.mobileLoginRedirect({e:g,action:"rate",commentId:k.comment_id,replyId:k.reply_id||null})}else{n.renderLoginOverlay(g,"rate")}}else{if(m.hasClass("reply")){l=m.ancestor(".reply-list-container");i=l.getAttribute("data-page").split("-");d=m.getAttribute("data-index").split("-");j={sec:"cmmt-ry",keys:{bpos:i[0],cpos:i[1],rbpos:d[0],rpos:d[1]}}}else{i=m.getAttribute("data-page").split("-");j={sec:"cmmt",keys:{bpos:i[0],cpos:i[1]}}}if(f.hasClass("up")){k.rating_value="thumbsUp";h="vote-up";j.linkname="rate-pos"}else{if(f.hasClass("down")){k.rating_value="thumbsDown";h="vote-down";j.linkname="rate-neg"}else{return}}if(m.one(n.classnames.error)){m.one(n.classnames.error).setContent("")}n.postXhr({postParams:k,api:"RATE_COMMENTS",success:function(p,e,o){c.set("innerHTML",n.incrementRatingCount(c.getHTML()));g.currentTarget.ancestor("div.comment-container").addClass(h);n.beaconClick(n.config.ult.rate,j)},failure:function(q,e,o){var p;if(o&&401===o.data.status){p=n.strings.validate.replace("http://login.yahoo.com",n.getLoginUrl({contexturl:k.contextUrl||null,commentId:k.comment_id,replyId:k.reply_id||null}));n.handleRateError({msg:p,item:m})}else{if(o&&400===o.data.status&&o.data.error){if(o.data.error.detail&&o.data.error.detail.content[0]&&o.data.error.detail.content[0].search("already rated")){c.set("innerHTML",n.incrementRatingCount(c.getHTML()));g.currentTarget.ancestor("div.comment-container").addClass(h);j.linkname="rate-dup";n.beaconClick(n.config.ult.rate,j)}}else{n.handleRateError({msg:"<p>"+n.strings.errorGeneric+"</p>",item:m})}}}})}},featureComment:function(c){var b=this,d=c.ancestor(b.classnames.userCommentBody),e={content_id:b.config.contentId,comment_id:""};if(d){e.content_id=d.getAttribute("data-context")}if(c.hasClass("reply")){e.reply_id=c.getAttribute("data-reply");e.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{e.comment_id=c.getAttribute("data-cmt")}if(c.one(".featured")){e.rating_value="thumbsDown"}else{e.rating_value="thumbsUp"}e.feature="yes";b.postXhr({postParams:e,api:"RATE_COMMENTS",success:null,failure:null})},isRateable:function(c){var b;if(c.hasClass("vote-box")){b=c.ancestor(".comment-container",false,"ul");if(b.hasClass("mine")||b.hasClass("vote-up")||b.hasClass("vote-down")){return false}else{return true}}},renderLoginOverlay:function(d,c){var b=this;if(!b.signupRendered&&(!b.nodes.signupParent||b.nodes.signupParent!==d.currentTarget)){b.addLoginOverlay(d,c)}else{if(b.signupRendered&&b.nodes.signupParent&&b.nodes.signupParent!==d.currentTarget){b.removeLoginOverlay();b.addLoginOverlay(d,c)}}if(d.metaKey){return}else{d.currentTarget.blur()}},addLoginOverlay:function(l,d){var p=this,q=p.nodes.container.one("#comments-signup"),m=q?'<div class="comments-signup" data-action="'+d+'">'+q.getContent()+"</div>":null,k,i,o,f,j,h,b,n,c,g;if(!p.signupRendered&&m){k=l.currentTarget.appendChild(m);i=l.target.ancestor(p.classnames.listItem,false,"ul");if(i.hasClass("reply")){j=i.ancestor(".comment").getAttribute("data-cmt")}else{j=i.getAttribute("data-cmt")}if(i){h=i.getAttribute("data-reply");b=h?j+"_"+h:j;k.all("a").each(function(r){var e=r.getAttribute("href");if(e){o=l.target.ancestor(p.classnames.userCommentBody);if(o){if(e.indexOf("open.login.yahoo.com")!=-1){e=o.getAttribute("fburl")}n=e.substr(0,e.indexOf("?")),c=a.QueryString.parse(e.substr(e.indexOf("?")+1));g=o.one(".context-title a").getAttribute("href")}else{n=e.substr(0,e.indexOf("?")),c=a.QueryString.parse(e.substr(e.indexOf("?")+1));g=decodeURIComponent(c[".done"])}if("body"===p.config.location){c[".done"]=p.replaceQueryParam(g,"bcmt",b)}else{c[".done"]=p.replaceQueryParam(g,"bcmt","")}e=n+"?"+a.QueryString.stringify(c);r.setAttribute("href",e)}})}p.signupRendered=true;p.nodes.signup=k;p.nodes.signupParent=l.currentTarget;l.stopPropagation()}},removeLoginOverlay:function(){var b=this;a.fire("MCC:hide-overlay",{node:b.nodes.signupParent});b.nodes.signup.remove(true);b.signupRendered=false;delete b.nodes.signup;delete b.nodes.signupParent},displayModule:function(g){var c=this,d=null,e=null,b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,f="";if(YUI.namespace("Media").hasOwnProperty("ads_supp_ugc")&&"1"===YUI.Media.ads_supp_ugc&&0==c.config.enableCollapsedComment){d=c.nodes.container.one(".pharma").removeClass("hidden");if(d){if(-1<b.indexOf("?")){d.set("href",b+"&nopharma=1")}else{d.set("href",b+"?nopharma=1")}}return}if(c.config.deeplinkId){if("comments-postbox"===c.config.deeplinkId){e="#comments-postbox"}else{f=f+"&bcmt="+c.config.deeplinkId;e="#deeplink-end"}c.fetchContent({target:g,container:c.nodes.container,api:"GET_ALL",query:f,start:function(h){if(0==c.config.enableCollapsedComment){c.activeXhr.loaders[h]=c.nodes.container.appendChild(c.templates.loaderDiv)}},success:function(m,h,i){var k=c.nodes.container.one(e),j,l;if(k){k.scrollIntoView();if(c.config.enableCommentSharing&&window.location.search.length>0){j=a.QueryString.parse(window.location.search.substring(1));if(j.linkbackSrc){c.beaconEvent(c.config.ult.module_impression,{keys:{slk:j.linkbackSrc}})}}}c.config.postCrumb=c.nodes.postBox.getAttribute("data-crumb")},end:function(k,i,j){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m2");window.MediaPerfTiming.done("Comments")}var h=c.nodes.container.one(".collapsed-loading.comments-loader");if(h){h.remove(true)}}})}else{c.fetchContent({target:g,container:c.nodes.container,api:"GET_ALL",query:f+"comments_listening_type="+c.config.comments_listening_type,start:function(h){if(0==c.config.enableCollapsedComment){c.activeXhr.loaders[h]=c.nodes.container.appendChild(c.templates.loaderDiv)}},success:function(o,j,l){var i=this,m,n,k,h;i.config.postCrumb=i.nodes.postBox.getAttribute("data-crumb");i.beaconEvent(i.config.ult.module_impression);if("body"!==i.config.location){m=i.nodes.postBox.one(".comment-input-div a");if(m){k=m.get("href");n=a.QueryString.parse(k.substr(k.indexOf("?")+1));h=i.replaceQueryParam(n[".done"],"bcmt","");k=i.replaceQueryParam(k,".done",h);m.set("href",k)}}if(i.nodes.commentIceberg){i.copyToIceBerg(i.nodes.container.one(i.classnames.listItem))}},end:function(k,i,j){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m2");window.MediaPerfTiming.done("Comments")}var h=c.nodes.container.one(".collapsed-loading.comments-loader");if(h){h.remove(true)}}})}},copyToIceBerg:function(i){var j=this,c=i.one(".img-container"),d=i.one(".nickname span"),e=i.one(".text-container"),g=e.one("p").getContent(),b=180,f="",h;if(g.length>b){g=g.substring(0,g.lastIndexOf(" ",b))+" ..."}f=f+'<div class="img-container">'+c.getContent()+"</div>";f=f+'<div class="container">';f=f+'  <div class="nickname">'+d.getContent()+"</div>";f=f+'  <div class="text-container comments-truncate"><p class="comment-content">'+g+"</p></div>";f=f+"</div>";h=a.Node.create(f);j.nodes.commentIceberg.append(h)},fetchContent:function(g){var k=this,i,b=["?content_id=",g.content_id||k.config.contentId,"&_device=",k.config.device].join(""),e,f=k.getContentMetadata(),h,c;if(k.config.enableCommentSharing){if("GET_ALL"===g.api||"GET_COMMENTS"===g.api){h=k.replaceQueryParam(window.location.toString(),"bcmt","");c=f.title;b=b+"&done="+encodeURIComponent(h)+"&title="+c}else{if("GET_USER_COMMENTS"===g.api){}else{if("GET_REPLIES"===g.api){e=g.target.ancestor(k.classnames.userCommentBody);if(e){h=e.one(".context-title a").getAttribute("href");c=e.one(".context-title a").get("text")}else{h=k.replaceQueryParam(window.location.toString(),"bcmt","");c=f.title}b=b+"&done="+encodeURIComponent(h)+"&title="+c}}}}else{if("GET_ALL"===g.api){b=b+"&done="+encodeURIComponent(window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search)}}if(g.query){b=b+"&"+g.query}if("clear"===k.config.cache){b=b+"&cache=clear"}if(1===k.config.enableViewOthers){b=b+"&_media.modules.content_comments.switches._enable_view_others=1"}if(1===k.config.enableNarrowLayout){b=b+"&enable_narrow_layout=1"}if(1===k.config.enableMuteCommenter){b=b+"&_media.modules.content_comments.switches._enable_mutecommenter=1"}if(k.config.enableCommentSharing){b=b+"&enable_comment_sharing=1"}if(k.config.enableAds){var j="e5f64c6c-a13a-11e2-9a89-cf438e1c01f5";if(typeof YMEDIA_REQ_ATTR!="undefined"&&YMEDIA_REQ_ATTR&&YMEDIA_REQ_ATTR.instr&&YMEDIA_REQ_ATTR.instr.request_id){j=YMEDIA_REQ_ATTR.instr.request_id}var d=["enable_ads=1","rmx_pu="+encodeURIComponent(k.config.ads_rmx_pu),"rmx_count=1","rmx_se="+k.config.ads_rmx_se,"spaceid="+k.config.spaceid,"ri="+j];b+=b?"&":"";b+=d.join("&")}b=b+"&enable_collapsed_comment="+k.config.enableCollapsedComment;i={api:g.api,queryString:b,container:g.container,replaceContent:g.replaceContent,start:function(l){k.removeErrorNodes(g.container);if(g.start&&"function"===typeof g.start){g.start.call(k,l)}},end:g.end||null,success:function(u,m,s){var o=s.data,p,t,r,l;if(o.loginProfile){if(""!==o.loginProfile.guid){k.config.loginStatus=true}else{k.config.loginStatus=false}k.config.loginProfile=o.loginProfile}if(o.module){g.container.insert(o.module,"replace");k.bindNodes();k.bindEvents();g.container=k.nodes.list;k.config.activeSort=k.getCorrespondingSortParam(o.activeSort)}if(g.target&&!g.target.hasClass("replies")){g.target.ancestor().remove(true)}if(!k.config.loginStatus){if(o.commentList){o.commentList=o.commentList.replace("vote-up","","gi").replace("vote-down","","gi")}}if(o.commentList&&o.commentList.indexOf("NO_COMMENTS")===-1){if(o.deeplink){o.commentList=o.deeplink+k.templates.deeplinkEnd+o.commentList}if(o.profilebox){o.commentList=o.profilebox+o.commentList}k.createCommentList(o,g,0==k.config.enableCollapsedComment||o.hasOwnProperty("deeplink"),false);var n=k.nodes.container.one("#collapsed-comments-show");var q=n?n.one("#total-comment-count"):null;if(q&&o.totalCommentCount&&q.getContent()!=o.totalCommentCount){q.setContent(o.totalCommentCount)}k.removeErrorNodes(g.container);if(g.uiUpdateFunction){g.uiUpdateFunction.apply(k)}}else{if("GET_COMMENTS"===g.api){g.container.empty();if(g.uiUpdateFunction){g.uiUpdateFunction.apply(k)}k.hideSortBar()}else{if("GET_ALL"===g.api){if(k.config.loginStatus){k.nodes.postBoxInput.set("placeholder",k.strings.beTheFirst);t=k.nodes.postBox.one(".iemessage");if(t){t.removeClass("hidden")}}k.hideSortBar()}}}if("GET_REPLIES"!==g.api){k.bindInfiniteScroll();if(!k.config.infinite.impressionBeaconFired){k.config.infinite.container=k.nodes.container;k.config.infinite.containerY=k.config.infinite.container.getY()}}if(o.more&&(""!==o.more.replace(/\s/g,""))){if(!k.config.firstFetch&&o.more.indexOf("show_all")>-1){}else{if("GET_REPLIES"!==g.api){p=g.container.appendChild(o.more);k.config.infinite.node=p.one(".generic-button");k.config.infinite.nodeY=k.config.infinite.node.getY()}else{g.container.prepend(o.more)}}}else{if("GET_COMMENTS"===g.api&&k.config.infinite.impressionBeaconFired){k.detachInfiniteScroll()}}if(o.refresh){k.nodes.filterBar.activeFilter.set("innerHTML",o.refresh.activeFilter);if(k.config.loginStatus){k.nodes.postBoxInput.set("placeholder",o.refresh.postboxPlaceholder)}if(o.commentList.indexOf("NO_COMMENTS")===-1){k.nodes.sortBar.removeClass("hidden")}}if(g.success&&"function"===typeof g.success){g.success.call(k,u,m,s)}a.Global.fire("pane-manager:sync-nav-pane-scroll")},failure:g.failure||null};k.getXhr(i)},createCommentList:function(g,h,e,f){var c=this,d,b;if(e||c.xhrResponseTemp){d=a.Node.create(g.commentList);c.commentCount+=d.all(c.classnames.listItem).size();if("GET_ALL"===h.api){b=d.all(".comment");b.each(function(j,i){if(i>=c.config.initialCommentsCount){j.addClass("hidden");c.commentCount-=1}})}else{if(c.config.firstFetch){c.config.firstFetch=false;b=c.nodes.list.all(".comment.hidden");b.removeClass("hidden");c.commentCount+=b.size()}}if(h.replaceContent){h.container.insert(d,"replace")}else{if("GET_REPLIES"===h.api){h.container.prepend(d)}else{if(f){h.container.prepend(d)}else{h.container.appendChild(d)}}}}else{c.xhrResponseTemp={data:g,params:h}}},insertPostbox:function(f){var e=this,c=e.nodes.postBox.cloneNode(true),b=c.one(".comment-input-textarea"),g=c.one(".post-button"),d=c.one(".comment-input-copy"),i=c.one(".guideline-button"),h;c.replaceClass("comments-postbox","replies-postbox");c.replaceClass("cmmt","cmmt-ry");c.removeClass("hidden");c.removeAttribute("id");if(b){b.empty();b.set("placeholder",e.strings.post_reply)}if(g){g.ancestor().removeClass("shrunk");g.set("value",e.strings.reply)}if(i){i.remove(true)}if(d){d.empty()}h=c.one(e.classnames.error);if(h){h.setContent("")}c.all(".signup-menu a").each(function(k){var j=k.getAttribute("href");j=j.replace("comments-postbox",f.commentId);k.setAttribute("href",j)});c.set("id","reply-postbox-"+f.commentId);f.container.append(c)},getXhr:function(h){var c=this,g={},e={api:h.api,info:h.queryString},d=function(l,j,k){var i="li";if(c.nodes.container===h.container){i="div"}if("abort"!==j.statusText&&!h.ignoreErrors){if(k&&k.message){if(h.replaceContent){h.container.prepend(c.getErrorTemplate(i,k.message))}else{h.container.appendChild(c.getErrorTemplate(i,k.message))}}else{if(h.replaceContent){h.container.prepend(c.getErrorTemplate(i,c.strings.errorGeneric))}else{h.container.appendChild(c.getErrorTemplate(i,c.strings.errorGeneric))}}if(h.failure&&"function"===typeof h.failure){h.failure.call(c,l,j,k)}if(j){e.response=j}c.errlog(e,h.api+" failed")}},f=function(m,i,j){var k;try{k=a.JSON.parse(i.responseText)}catch(l){d.call(c,m,i,{message:c.strings.errorGeneric});if(i){e.response=i}c.errlog(e,l);return}if(k.status<300){if(h.success&&"function"===typeof h.success){h.success.call(c,m,i,{data:k})}}else{if(k.message){d.call(c,m,i,{message:k.message})}else{d.call(c,m,i,{message:c.strings.errorGeneric})}}},b=function(i){if(c.activeXhr.loaders[i]){c.activeXhr.loaders[i].remove(true);delete c.activeXhr.loaders[i]}delete c.activeXhr.GET;if(h.end&&"function"===typeof h.end){h.end.call(c,i)}};if(c.activeXhr.GET&&c.activeXhr.GET.xhr.isInProgress()){if(c.activeXhr.GET.api===h.api){if(c.activeXhr.GET.query===h.queryString){return}else{if("GET_REPLIES"!==h.api){c.activeXhr.GET.xhr.abort()}}}else{c.activeXhr.GET.xhr.abort()}}if(1===c.config.enableCacheControl){g["Cache-Control"]="max-age=0"}c.activeXhr.GET={api:h.api,query:h.queryString,xhr:a.io(c.config.XHR[h.api]+h.queryString,{on:{success:f,failure:d,start:h.start||null,end:b},headers:g})}},postXhr:function(h){var c=this,f=h.api+a.JSON.stringify(h.postParams),e={api:h.api,info:h.postParams},d=function(k,i,j){if(h.failure&&"function"===typeof h.failure){h.failure.call(c,k,i,j)}if(i){e.response=i}c.errlog(e,h.api+" failed")},g=function(n,j,k){var l,i=k||{};try{l=a.JSON.parse(j.responseText)}catch(m){d.call(c,n,j,i);if(j){e.response=j}c.errlog(e,m);return}i.data=l;if(l.status<300){if(h.success&&"function"===typeof h.success){h.success.call(c,n,j,i)}}else{d.call(c,n,j,i)}},b=function(i){delete c.activeXhr[h.api+h.postParams];if(h.end&&"function"===typeof h.end){h.end.call(c,i)}};h.postParams.crumb=c.config.postCrumb;if(c.activeXhr[f]&&c.activeXhr[f].isInProgress()){return}else{c.activeXhr[f]=a.io(c.config.XHR[h.api],{method:"POST",data:h.postParams,on:{success:g,failure:d,start:h.start||null,end:b},arguments:h.args})}},onMoreActionsClick:function(h){var c=this,g=h.target,f=null,d,b;if(g.get("className").indexOf("flag")>0){f=g.ancestor(c.classnames.listItem,false,c.classnames.list);if(f.hasClass("reply")){d=f.ancestor(".comment").getAttribute("data-cmt")}else{d=f.getAttribute("data-cmt")}b=g.ancestor(c.classnames.commentContainer,false,c.classnames.listItem);if(!c.config.loginStatus){if(!c.config.deviceIsDesktop){c.mobileLoginRedirect({e:h,action:"abuse",commentId:d,replyId:f.getAttribute("data-reply")||null})}else{if(b.hasClass("active")){b.removeClass("active");return}c.renderLoginOverlay(h,"abuse");b.addClass("active");return}}else{c.nodes.list.all(".report-container").addClass("hidden");c.nodes.list.all(".hover-disabled").removeClass("hover-disabled");c.fireReportAbuseFlagClickBeacon(f);c.displayReportForm(f,g,b)}}},swipeStart:function(f){var b=this,c=f.currentTarget,d=f.target,g=(f.touches!==undefined)?f.touches[0]:f;c.once("selectstart",function(h){h.preventDefault()});b.activeSwipe.moveEvent=c.on("gesturemove",a.bind(b.swipeMove,b));b.cleanActiveSwipe();b.activeSwipe.x=g.pageX;b.activeSwipe.y=g.pageY;b.activeSwipe.startClientX=b.activeSwipe.x;b.activeSwipe.startClientY=b.activeSwipe.y;b.activeSwipe.startScrollY=window.scrollY},swipeMove:function(d){if(!d){return}var b=this,c=false,f=(d.touches!==undefined)?d.touches[0]:d;b.activeSwipe.x=f.pageX;b.activeSwipe.y=f.pageY;b.activeSwipe.deltaX=b.activeSwipe.x-b.activeSwipe.startClientX;b.activeSwipe.deltaY=b.activeSwipe.y-b.activeSwipe.startClientY;b.activeSwipe.deltaAX=Math.abs(b.activeSwipe.deltaX);b.activeSwipe.deltaAY=Math.abs(b.activeSwipe.deltaY);if(b.shouldPreventDefault()){d.preventDefault();if(d.hasOwnProperty("stopPropagation")){d.stopPropagation()}}},swipeEnd:function(h){var d=this,f=h.currentTarget,g=h.target,c=f.one(d.classnames.commentContainer),b=h.container;d.activeSwipe.endScrollY=window.scrollY;d.activeSwipe.moveEvent.detach();if(!d.isTapEvent()){if(this.isValidSwipe()){if(c.hasClass("active")){c.removeClass("active")}else{b.all(".active").removeClass("active");c.addClass("active")}}}d.cleanActiveSwipe()},cleanActiveSwipe:function(){var b=this;b.activeSwipe.x=0;b.activeSwipe.y=0;b.activeSwipe.deltaX=0;b.activeSwipe.deltaY=0;b.activeSwipe.deltaAX=0;b.activeSwipe.deltaAY=0;b.activeSwipe.startScrollY=0;b.activeSwipe.endScrollY=0},shouldPreventDefault:function(){var c=this,b=false;if("x"===c.activeSwipe.axis){if(c.activeSwipe.deltaAX>(c.activeSwipe.deltaAY*2)){b=true}}else{if("y"===c.activeSwipe.axis){if(c.activeSwipe.deltaAY>(c.activeSwipe.deltaAX*2)){b=true}}}return b},isValidSwipe:function(){var b=this,c=Math.abs(b.activeSwipe.startScrollY-b.activeSwipe.endScrollY);b.activeSwipe.deltaAY+=c;if(b.activeSwipe["deltaA"+b.activeSwipe.axis.toUpperCase()]<b.activeSwipe.swipeMinDistance){return false}if("x"===b.activeSwipe.axis){if(b.activeSwipe.deltaAY>b.activeSwipe.invalidSwipeRange||b.activeSwipe.deltaAY>b.activeSwipe.deltaAX){return false}}return true},isTapEvent:function(){var b=this;if(b.activeSwipe.deltaAX<b.activeSwipe.tapThreshold&&b.activeSwipe.deltaAY<b.activeSwipe.tapThreshold){return true}return false},removeCommentNode:function(d,c){var b=this;if(c.isTransition){d.addClass("transition-delete")}else{d.addClass("hidden")}setTimeout(function(){var h=d.get("className"),j=d.ancestor(b.classnames.listItem,false,b.classnames.list),g,k,e,f,i;d.remove(true);if(h.indexOf("reply")>-1){g=j.getAttribute("data-cmt");i=j.all(".js-item");if(0===i.size()){j.removeClass("expanded-replies");k=j.one("#reply-postbox-"+g);if(k){k.remove(true)}e=j.one(".replies");if(e){e.remove(true)}f=j.one(".reply-list-container");if(f){f.remove(true)}}}else{}},500)},confirmMuteAndReportAbuse:function(m){var n=this,i=m.one(".comment-container"),k,d=m.one(".report-container").getComputedStyle("height"),b=m.one(".form-report-abuse"),g=b.one(".other-reason").get("value"),j=b.one(".category.mute:checked")?true:false,l=b.one(".category.simplify:checked"),h=m.getAttribute("data-uid"),e=n.nodes.reportMsgForm.cloneNode(true),f,c=5000;e.setStyle("height",d);e.removeClass("hidden");if(l){e.one(".comments-report-message").removeClass("hidden");if(""===g.replace(/\s/g,"")){e.one(".comments-report-message").setContent(n.strings.offensiveNoReasonMsg)}else{e.one(".comments-report-message").setContent(n.strings.offensiveReasonMsg)}}if(j){e.one(".comments-mute-message").removeClass("hidden")}i.siblings().addClass("hidden");f=m.appendChild(e);n.fireMuteAndReportAbuseBeacon(m,{reason:l?"other":"skip",mute:j});if(l){n._doReportAbuse(m,g);if(!j){a.later(c,n,function(){i=m.one(".comment-container").cloneNode(true);k=i.one(".action-container");if(k){k.remove()}i.one(".actions").remove();i.all(".vote-box").remove();i.one(".comment-content").setContent(n.templates.msgReport);i.addClass("done-report-abuse");m.setContent(i)},null)}}if(!j){return}n.activeMute[h]={};n.activeMute[h].timer=a.later(c,n,n.muteComment,{item:m});if(n.config.deviceIsDesktop){n.activeMute[h].mouseLeave=f.on("mouseleave",function(o){n.activeMute[h].timer=a.later(c,n,n.muteComment,{item:m})},n);n.activeMute[h].mouseEnter=f.on("mouseenter",function(o){if(n.activeMute[h].timer){n.activeMute[h].timer.cancel()}},n)}},undoMute:function(i){var c=this,h=("li"===i.currentTarget.get("tagName").toLowerCase())?i.currentTarget:i.currentTarget.ancestor(c.classnames.listItem),f=h.getAttribute("data-uid"),d=h.one(".report-message-container"),b=h.one(".comment-container"),g=c.getUltParam(h,"cmmt-abse");if(c.activeMute[f].timer){c.activeMute[f].timer.cancel()}b.removeClass("hover-disabled");d.addClass("transition-delete");setTimeout(function(){d.remove(true)},500);c.beaconClick(c.config.ult.unmute,g)},muteComment:function(d){var b=this,f=d.item,e=f.getAttribute("data-uid"),g,c;c=function(o,k,l){var j=this,m=f.one(".report-message-container"),n=f.one(".list-error"),i=f.one(j.classnames.commentContainer);j.activeMute[e].mouseEnter.detach();j.activeMute[e].mouseLeave.detach();setTimeout(function(){m.addClass("transition-delete");m.remove(true);if(n){n.addClass("transition-delete");n.remove(true)}i.removeClass("hover-disabled")},3000)};g=function(k,i,j){b.removeCommentNode(f,{isTransition:true});b.nodes.list.all(".js-item").each(function(l){if(e===l.getAttribute("data-uid")){b.removeCommentNode(l,{isTransition:false})}})};var h=["?mute_user_id=",f.getAttribute("data-uid"),"&crumb=",b.nodes.postBox.getAttribute("data-crumb")].join("");b.getXhr({api:"MUTE_USER",queryString:h,container:f,replaceContent:false,start:null,end:null,success:g,failure:c})},_doReportAbuse:function(c,e){var b=this,d=c.ancestor(b.classnames.userCommentBody),f={};f={content_id:b.config.contentId,comment_id:"",reply_id:""};if(e){f.reason=e}if(c.hasClass("reply")){f.reply_id=c.getAttribute("data-reply");f.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{delete f.reply_id;f.comment_id=c.getAttribute("data-cmt")}if(d){f.content_id=d.getAttribute("data-context")}b.postXhr({api:"REPORT_ABUSE",postParams:f,success:function(i,g,h){},failure:function(i,g,h){},args:{item:c}})},doReportAbuse:function(c,e){var b=this,d=c.ancestor(b.classnames.userCommentBody),f={},e;c.appendChild(b.templates.listLoadMask.replace("-{{id}}",""));f={content_id:b.config.contentId,comment_id:"",reply_id:"",reason:e||"other"};if(c.hasClass("reply")){f.reply_id=c.getAttribute("data-reply");f.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{delete f.reply_id;f.comment_id=c.getAttribute("data-cmt")}if(d){f.contextUrl=d.one(".context-title a").getAttribute("href");f.content_id=d.getAttribute("data-context")}b.fireMuteAndReportAbuseBeacon(c,{reason:e});b.postXhr({api:"REPORT_ABUSE",postParams:f,success:function(l,h,j){var k=j.item,g=k.one(".comment-container"),i=g.one(".action-container");g.one(".actions").remove();g.all(".vote-box").remove();g.one(".comment-content").setContent(b.templates.msgReport);if(i){i.remove()}g.addClass("done-report-abuse");k.setContent(g)},failure:function(m,g,h){var k=h.data.status,j=h.item,i,l;j.one(".loading-mask").remove();if(k&&401===k){i=b.templates.report.errorRevalidate.replace("http://login.yahoo.com",b.getLoginUrl({contextUrl:f.contextUrl||null,commentId:f.comment_id,replyId:f.reply_id||null}))}else{i=b.strings.errorGeneric}l=j.one(".report-container .err");l.setContent("<p>"+i+"</p>");l.removeClass("hidden")},args:{item:c}})},getUltConfig:function(){var b={view_comments:{sec:"cmmt",outcome:"open",keys:{ltxt:"view",itc:"1",cf:true,test:""}},view_comments_top:{sec:"cmmt-top",outcome:"open",keys:{ltxt:"view",itc:"1",cf:true,test:""}},module_impression:{name:"secview",keys:{sec:"cmmt",slk:"start",cf:true,test:""}},more_comments:{sec:"cmmt",linkname:"more",outcome:"fetch",keys:{itc:"1",bpos:"[n]",cf:true,test:""}},infinite_scroll:{name:"scrolldown",outcome:"fetch",keys:{sec:"cmmt",slk:"fetch",itc:"1",bpos:"[n]",cf:true,test:""}},module_end:{sec:"cmmt",linkname:"end",keys:{cf:true,test:""}},post_comment:{sec:"cmmt-top",linkname:"post",outcome:"comment",keys:{itc:"1",cf:true,test:""}},post_reply:{sec:"cmmt-ry",linkname:"post",outcome:"comment",keys:{bpos:"[n]",cpos:"[n]",itc:"1",cf:true,test:""}},post_reply_new_comment:{sec:"cmmt-ry-new",linkname:"post",outcome:"comment",keys:{bpos:"[n]",cpos:"[n]",itc:"1",cf:true,test:""}},delete_comment:{sec:"cmmt",linkname:"del",keys:{itc:"1",test:""}},delete_reply:{sec:"cmmt-ry",linkname:"del",keys:{itc:"1",test:""}},select_filter:{sec:"cmmt",linkname:"filter",outcome:"filter",keys:{ltxt:"[all/my]",itc:"1",test:""}},select_sort:{sec:"cmmt",linkname:"sort",outcome:"sort",keys:{ltxt:"[pop/new/old/mostr]",itc:"1",test:""}},reply_link:{sec:"cmmt",linkname:"reply",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},open_replies:{sec:"cmmt",linkname:"open",outcome:"open",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},close_replies:{sec:"cmmt",linkname:"close",outcome:"close",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},more_replies:{sec:"cmmt-ry",linkname:"more",outcome:"fetch",keys:{itc:"1",bpos:"[n]",cpos:"[n]",rbpos:"[n]",cf:true,test:""}},report_abuse_flag:{sec:"[cmmt-ctrl/cmmt-ctrl-ry]",linkname:"abuse",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},report_abuse:{sec:"[cmmt-abse/cmmt-abse-ry]",linkname:"abuse",outcome:"abuse",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},unmute:{sec:"[cmmt-abse/cmmt-abse-ry]",linkname:"unmute",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},share:{sec:"[cmmt-sh/cmmt-ry-sh]",linkname:"[btn-sh-fb/btn-sh-tw/btn-sh-pn/btn-sh-ma]",outcome:"share",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},rate:{sec:"[cmmt/cmmt-ry]",linkname:"[rate-pos/rate-neg]",outcome:"share",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},profiles:{sec:"[cmmt/cmmt-ry]",linkname:"profiles",outcome:"navigate",tar:"profile.yahoo.com",keys:{bpos:"[n]",cpos:"[n]",itc:"0",cf:true,test:""}},login_point:{sec:"[cmmt/cmmt-ry/cmmt-rate/cmmt-abuse]",linkname:"[login-yh/login-fb/login-go]",outcome:"login",keys:{itc:"1",cf:true,test:""}}};return b},beaconClick:function(e,d){var c=this,b={};if(d&&d.keys){d.keys=a.merge(e.keys,d.keys)}b=a.merge(e,d);if(b.keys){b.keys.test=c.chrome.getBucketId();if(b.keys.cf){b.keys.cf=c.config.activeFilter+"-"+c.config.activeSort}}a.Global.fire("rapid-tracker:click",{mod_id:c.config.modId,data:b})},beaconEvent:function(e,d){var c=this,b={};if(d&&d.keys){d.keys=a.merge(e.keys,d.keys)}b=a.merge(e,d);if(b.keys){b.keys.test=c.chrome.getBucketId();if(b.keys.cf){b.keys.cf=c.config.activeFilter+"-"+c.config.activeSort}}a.Global.fire("rapid-tracker:event",{mod_id:c.config.modId,data:b})},getContentMetadata:function(){var b={title:this.config.contentMetadata.title,type:"",description:"",url:this.config.contentMetadata.url};a.all("meta").each(function(d){var c=d.getAttribute("property");if(""===c){}else{if("og:title"===c){b.title=d.get("content")}else{if("og:type"===c){b.type=d.get("content")}else{if("og:description"===c){b.description=d.get("content")}else{if("og:url"===c){b.url=d.get("baseURI")||d.get("content")}else{if("og:image"===c){b.image=d.get("content")}}}}}}});return b},getLoginUrl:function(f){var c=this,e,d,b,g;if(c.config.deviceIsDesktop){g=c.config.desktopLoginUrl}else{if(c.config.deviceIsSmartphone||c.config.deviceIsTablet){g=c.config.mobileLoginUrl}else{return"http://www.yahoo.com"}}if("body"===c.config.location){if(f&&f.commentId){e=f.replyId?f.commentId+"_"+f.replyId:f.commentId;d=f.contextUrl?f.contextUrl:window.location.toString();b=c.replaceQueryParam(d,"bcmt",e);return g+"&.done="+encodeURIComponent(b)}else{b=c.replaceQueryParam(window.location.toString(),"bcmt","comments-postbox");return g+"&.done="+encodeURIComponent(b)}}else{return g+"&.done="+encodeURIComponent(window.location.toString())}},handleRateError:function(b){if(b.item.one(".rate-err")){b.item.one(".rate-err").setContent(b.msg)}else{b.item.append('<div class="rate-err err">'+b.msg+"</div>")}},displayReportForm:function(n,c,i){var o=this,h,k,j,d,f=false;i.addClass("hover-disabled");i.removeClass("active");if(!f){f=o.nodes.reportForm.cloneNode(true);f.all(".category").each(function(q){q.next("label").setAttribute("htmlFor",q.generateID())});if(1===o.config.enableMuteCommenter){var p=f.one(".mute-prompt"),b=p.get("innerHTML")+" ",g=i.one(".nickname > .profile-link").cloneNode(true);p.set("innerHTML",b);p.append(g);g.removeAttribute("tabindex")}i.insert(f,"after")}f.removeClass("hidden");if(o.config.deviceIsDesktop||(1===o.config.enableMuteCommenter&&o.config.deviceIsTablet)){h=f.one(".more-reason");if(h){k=h.one("input.category");j=h.one("label");d=h.one("input.other-reason");if(k&&j&&d){var e=parseInt(h.getComputedStyle("width"),10);var m=parseInt(k.get("offsetWidth"),10)+parseInt(k.getComputedStyle("marginLeft"),10)+parseInt(k.getComputedStyle("marginRight"),10)+parseInt(j.get("offsetWidth"),10)+parseInt(j.getComputedStyle("marginLeft"),10)+parseInt(j.getComputedStyle("marginRight"),10);var l=e-m;if(l>0){if(o.config.deviceIsTablet){d.setStyle("width",l*0.975+"px")}else{d.setStyle("width",l*0.99+"px");d.setStyle("float","right")}if(1===o.config.enableNarrowLayout){d.setStyle("width","50%")}d.setStyle("padding","2px 2px");if(1===o.config.enableMuteCommenter){h.setStyle("marginTop","15px")}else{h.setStyle("marginTop","5px")}h.setStyle("marginBottom","15px")}}}}if(f.getY()+f.get("clientHeight")>a.DOM.winHeight()+a.DOM.docScrollY()){f.scrollIntoView()}},onAbuseReasonChange:function(h){var c=this,f=h.currentTarget.one(".form-report-abuse"),g=h.currentTarget.one(c.classnames.error),b=f.one(".other-reason"),d=f.one(".select-category"),i;i=(c.config.deviceIsSmartphone)?d.get("value"):f.one(".category:checked").get("value");if("other"===i){b.focus()}else{}g.setContent("")},onAbuseSubmit:function(i){var l=this,f,h,c=0===l.config.enableMuteCommenter?i.currentTarget:i.currentTarget.ancestor("form"),b=c.one(".other-reason"),m=b.get("value"),d=parseInt(b.getAttribute("maxlength"),10),j=i.currentTarget.one(l.classnames.error),g=c.one(".select-category"),k=c.ancestor(l.classnames.listItem,false,l.classnames.list);i.preventDefault();f=(l.config.deviceIsSmartphone&&0===l.config.enableMuteCommenter)?g.get("value"):c.one(".category:checked");if(!f){if(1===l.config.enableMuteCommenter){k.one(".title").addClass("hidden");k.one(".err").removeClass("hidden")}else{l.handlePostError({input:b,node:j,msg:l.templates.report.errorSelectViolation,max:d})}return}h=(l.config.deviceIsSmartphone)?f:f.get("value");if("other"===h){if(""===m.replace(/\s/g,"")){l.handlePostError({input:b,node:j,msg:l.templates.report.errorOtherEmpty,max:d});return}h=h+":"+m}if(1===l.config.enableMuteCommenter){l.confirmMuteAndReportAbuse(k)}else{l.doReportAbuse(k,h)}},expertAction:function(f){var b=this,d=f.target,c=d.ancestor(b.classnames.expertActionItem);confirm=a.Node.create(b.templates.areYouSure);f.preventDefault();c.append(confirm);d.addClass("hidden");confirm.removeClass("hidden")},expertCancel:function(g){var b=this,i=g.target,d=i.ancestor(b.classnames.expertActionItem),f=d.one("a"),c=i.ancestor(b.classnames.expertActionConfirm),h;g.preventDefault();f.removeClass("hidden");c.remove(true)},expertConfirm:function(h){var b=this,j=h.target,d=j.ancestor(b.classnames.expertActionItem),g=d.one("a"),c=j.ancestor(b.classnames.expertActionConfirm),f=d.ancestor(b.classnames.listItem,false,b.classnames.list),i;h.preventDefault();if(g.hasClass("remove")){b._doReportAbuse(f,"Remove");b.removeCommentNode(f,{isTransition:true})}else{if(g.hasClass("feature")){b.featureComment(f);if(f.one(".featured")){g.setContent(b.strings.feature);f.one(".featured").remove(true)}else{g.setContent(b.strings.unfeature);i=a.Node.one(b.classnames.featured).cloneNode(true);i.removeClass("hidden");f.one(".nickname").append(i)}g.removeClass("hidden");c.remove(true)}}},hideSortBar:function(){var b=this;if(b.nodes.sortBar){b.nodes.sortBar.addClass("hidden")}},mobileLoginRedirect:function(d){var b=this,e=d.e.target.ancestor(b.classnames.listItem),f=e.ancestor(b.classnames.userCommentBody),c;if(f){d.contextUrl=f.one(".context-title a").getAttribute("href")}c=b.getLoginUrl(d);b.fireOverlayLoginBeacon(d.e,{type:"login-yh",action:d.action});window.location=c},incrementRatingCount:function(c){var b=a.Lang.trim(c.toLowerCase());if(-1!==b.indexOf("m")||-1!==b.indexOf("k")){return c}b=parseInt(b,10);if(!a.Lang.isNumber(b)){return c}if(999===b){return"1k"}return b+1},replaceQueryParam:function(b,c,e){var g=b.indexOf("?"),d,f={};if(g>-1){d=b.substr(0,g);f=a.QueryString.parse(b.substr(g+1))}else{d=b}if(""===e){delete f[c]}else{f[c]=e}return d+"?"+a.QueryString.stringify(f)},getCorrespondingSortParam:function(b){switch(b){case"pop":return"highestRated";case"highestRated":return"pop";case"new":return"latest";case"latest":return"new";case"old":return"oldest";case"oldest":return"old";case"rep":return"mostReplied";case"mostReplied":return"rep"}},refreshWithContextID:function(c){var b=this,d=null;if(!c){return}b.config.contentId=c;if("my"===b.config.activeFilter||"user"===b.config.activeFilter){b.nodes.filterBar.filterSwitch.setAttribute("data-cf","my");b.nodes.filterBar.filterSwitch.setContent(b.strings.myComments);b.nodes.filterBar.activeFilter.setAttribute("data-cf","all");b.nodes.filterBar.activeFilter.setContent(b.strings.allComments);b.config.activeFilter="all";d=function(){var e=this;e.nodes.sortBar.removeClass("hidden");e.nodes.postBox.removeClass("hidden")}}b.loadComments(null,{api:"GET_COMMENTS",query:"refreshContext=1&sortBy="+b.getCorrespondingSortParam(b.config.activeSort),removeTarget:false,replaceContent:true,uiUpdateFunction:d,maskType:"full"})},escapePostContent:function(b){return b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\r?\n/g,"<br/>")}})},"0.0.1",{requires:["base","node-base","event-base","event-custom","event-move","event-mouseenter","io-base","json-parse"]});
/* content-lightbox.js 1770533 */ YUI.add("media-content-lightbox",function(c){var d={type:"photo",pt:"4",pct:"4"},i="content-video:prefetchvideos",j="content-video:playvideo",p="content-slideshow:share-info",m="content:insert-share-panel",k="body",y='.yom-slideshow[data-type="slideshow"]',f="lb-today-module",h="lb-slideshow-module",a="lb-trending-module",x="mediacontentcomment_slideshow",g="embed-module-one",t="embed-module-two",w="embed-module-three",z="embed-module-south",n="#content-lightbox",o="#yom-ad-LREC-lb",u="#yom-ad-LREC2-lb",v="#yom-ad-FILM-lb",r="#yom-ad-LDRB-lb",b=50,l=15,e=5,q=3,s=6;c.namespace("Media").ContentLightbox=c.Base.create("media-content-lightbox",c.Base,[],{initializer:function(D){var B=this,A,E,C;B.config=D&&D.config?D.config:null;B.chrome=D&&D.chrome?D.chrome:null;if(!B.chrome){return}B.config.device=B.chrome.getDevice();B.config.deviceOS=B.chrome.getDeviceOS();B.config.deviceOSVer=B.chrome.getDeviceOSVer();B.viewport=c.one("window");B.customizedSlideshow=B.config.customizedSlideshow==="1";B.config.modId="mediacontentmodules";B.endslideModId=B.config.endslideModId||"lb-endslide-list";B.enableEndSlideRel=B.config.enableEndSlideRel==="1";B.enableEndSlideMP=B.config.enableEndSlideMP==="1";B.endSlideImgRatio=B.config.endSlideImgRatio;B.endSlideImgWidth=B.config.endSlideImgWidth;B.enableIBSlideshow=B.config.enableIBSlideshow==="1";B.enableLBOnPageLoad=B.config.enableLBOnPageLoad==="1";B.enableEmbedSlots=B.config.enableEmbedSlots==="1";B.enableRMXAds=B.config.enableRMXAds==="1";B.enableNativeAds=B.config.enableNativeAds==="1";B.enableTrendingModule=B.config.enableTrendingModule==="1";B.enableFilmAd=B.config.enableFilmAd==="1";B.nativeAdsThreshold=B.enableNativeAds?(parseInt(B.config.nativeAdsThreshold,10)||500):0;B.disableComments=B.config.disableComments==="1";B.enableLDRBads=B.config.enableLDRBads==="1";B.fetchIBThreshold=B.config.fetchIBThreshold;B.fetchIBCount=B.config.fetchIBCount;B.IBmtype=B.config.IBmtype;B.IBImageThreshold=B.config.IBImageThreshold;B.IBVideoThreshold=B.config.IBVideoThreshold;B.IBMetalen10_filter=B.config.IBMetalen10_filter;B.pagePD=YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig&&YMedia.rapid.rapidConfig.keys&&YMedia.rapid.rapidConfig.keys.pd;B.rmxFirstIndexLoad=parseInt(B.config.rmxFirstIndexLoad,10)||3;B.rmxAdLoadInterval=parseInt(B.config.rmxAdLoadinterval,10)||7;B.rmxAdsSectionId=B.config.rmxAdsSectionId;B.rmxMaxWidth=1248;B.rmxMaxHeight=940;B.rmxAdsToFetchMax=10;B.rmxResponse={};if(B.chrome.getBucketId()==="gs303"||B.chrome.getBucketId()==="gs206"){B.enableRMXAds=true}B.target=null;B.lightboxOpenSource=null;B.body=c.one("body");B.detachableHandles=[];B.activeXhr={};B.nodes={};B.data={};B.currentIndex=0;B.fetchMoreIndex=b-l;B.fetchedBatch=0;B.isSlideshow=true;B.bindOpenCloseEvents();A=c.one(k);E=(A&&A.one(y))||null;if(E&&B.enableLBOnPageLoad){C={id:E.getData("uuid")};if(E.one(".cover.go-to-slideshow-lightbox")){C.selectedId=(E.one(".cover.go-to-slideshow-lightbox").getAttribute("data-selected-id")==="")?E.one(".cover.go-to-slideshow-lightbox").getAttribute("data-id"):E.one(".cover.go-to-slideshow-lightbox").getAttribute("data-selected-id");C.alias=E.one(".cover.go-to-slideshow-lightbox").getAttribute("data-alias")}c.Global.fire("slideshow:open-lightbox",{slideshowData:C,autoOpen:1})}},bindOpenCloseEvents:function(){var B=this,A=B.body;if(!B.allSlideshowOpenLB){B.allSlideshowOpenLB=c.Global.on("slideshow:open-lightbox",B.openLightbox,B)}if(A&&!B.thumbClickSlideshowOpen){B.thumbClickSlideshowOpen=A.delegate("click",B.openLightbox,".go-to-slideshow-lightbox",B)}if(!B.closeSlideshowLB){B.closeSlideshowLB=c.Global.on("slideshow:close-lightbox",B.closeLightbox,B)}},openLightbox:function(E){var B=this,A=B.body,C=A.one("header .headline"),D,F={};B.target=E.currentTarget;if(B.target&&B.target.ancestor(".disable-content-lightbox")){return}if((B.customizedSlideshow===false)&&((B.target&&B.target.hasClass("property-extended"))||(A.one(y+" .property-extended")))){return}B.config.spaceId=B.chrome.getSpaceId();if(E.slideshowData){B.slideshowId=E.slideshowData.id||null;B.redir_href=E.slideshowData.redir_href||null;B.curSelectedId=E.slideshowData.selectedId||null;B.lightboxOpenSource=(E.autoOpen===1)?0:1}else{B.curSelectedId=B.target.getData("uuid")||B.target.getData("selected-id")||B.target.getData("id")||parseInt(B.target.getData("orig-index"),10);B.isSlideshow=!!(B.target.getData("list-id")||false);B.slideshowId=B.target.getData("list-id")||B.chrome.getContentId();B.lightboxOpenSource=2;B.slideshowType=B.target.getData("type");E.halt(true)}if(!B.data[B.slideshowId]){if(B.target&&B.target.hasClass("get-lbdata-from-dom")&&!B.target.hasClass("slideshow")&&!B.target.hasClass("tumblrphotoset")){D=c.Media.lbData;if(!D){return}B.slideshowTotal=D.total;D.headline=C?C.get("text"):null;D.url=window.location.href;B.addLoadingOverlay();if(B.enableIBSlideshow&&D.total>0&&D.total<=B.fetchIBThreshold){B.fetchIbItems(D)}else{B.processLightboxData(D,false)}}else{if(E.slideshowData&&E.slideshowData.args){F=E.slideshowData.args}if(B.slideshowType==="tumblrphotoset"){F.src="/_xhr/tumblr-photoset/"}if(!F.getStructure){F.getStructure=1}B.addLoadingOverlay();B.getSlideshowData(0,b,1,F)}}else{B.addLoadingOverlay();c.later(300,B,B.renderLightbox)}B.refreshLinkTrackMods()},getXhr:function(E){var B=this,F="GET",C=function(I,G,H){if("abort"!==G.statusText&&!E.ignoreErrors){if(E.failure&&"function"===typeof E.failure){E.failure.call(B,I,G,H)}}},D=function(I,G,H){if(E.success&&"function"===typeof E.success){E.success.call(B,I,G,H)}},A=function(G){delete B.activeXhr[E.api];if(E.end&&"function"===typeof E.end){E.end.call(B,G)}};if(B.activeXhr[E.api]&&B.activeXhr[E.api].isInProgress()){return}if(E.method){F=E.method}B.activeXhr[E.api]=c.io(E.api,{method:F,data:E.data,"arguments":E.args,on:{success:D,failure:C,start:E.start||null,end:A}})},getSlideshowData:function(B,G,D,H){var I=this,A="/_xhr/content-lightbox/",F,C=I.config,E=I.chrome;F={count:G||b,start:B,content_id:I.slideshowId,site:E.getSite(),lang:E.getLang(),region:E.getRegion(),getStructure:(H&&H.getStructure)||0};if(C&&C.xhrEndPoint){A=C.xhrEndPoint}if(H){if(H.src){A=H.src}if(H.data){F=c.merge(H.data,F)}}I.getXhr({api:A,data:F,success:I.handleGetDataSuccess,args:{additionalData:(H&&H.additionalData)||false,reRender:(H&&H.reRender)||false,self:I}})},handleGetDataSuccess:function(F,E,C){var B=C.self,A=(E.responseText)?c.JSON.parse(E.responseText):null,D=A?A.responseData:null;if(D){B.slideshowTotal=D.total;B.processLightboxData(D,C)}},processLightboxData:function(E,C){var B=this,A,F,D=B.data[B.slideshowId]||null;B.fetchedBatch++;if(!C.additionalData){if(E.spaceid){B.config.spaceId=E.spaceid}if(E.content){B.data[B.slideshowId]=E}if(E.templates){B.compileTemplates(E.templates)}B.allLoaded=(B.fetchedBatch*b>=B.data[B.slideshowId].total);if(B.allLoaded){B.data[B.slideshowId].total=B.data[B.slideshowId].content.items.length}B.slideshowUrl=E.url||null;B.data[B.slideshowId].slideshowUrl=B.slideshowUrl;B.renderLightbox()}else{if(E.content&&D.content){B.data[B.slideshowId].content.items=(D.content.items)?D.content.items.concat(E.content.items):E.content.items;B.data[B.slideshowId].content.playlist=(D.content.playlist)?D.content.playlist.concat(E.content.playlist):E.content.playlist}B.allLoaded=(B.fetchedBatch*b>=B.data[B.slideshowId].total);if(B.allLoaded){B.data[B.slideshowId].total=B.data[B.slideshowId].content.items.length}}if(C.additionalData&&C.reRender){B.renderLightbox()}if(B.allLoaded){B.fetchEndSlide()}},renderLightbox:function(){var B=this,A=B.data[B.slideshowId].content.items,C="open_lgtbx_automatic",D;B.currentIndex=B.findSelectedPhoto();if(B.currentIndex===null){return}if(!B.nodes||!B.nodes.lightboxContainer){B.setupLightbox()}if(!B.data[B.slideshowId].interstitialSource){B.getInterstitial()}if(B.enableRMXAds){B.bindRmxAdClickEvents()}if(B.lightboxOpenSource===2){C="open_lgtbx";C=(B.target.hasClass("cover")||B.target.ancestor(".cover-wrap",false,k))?C+"_lead":C+"_embed";C=("LI"===B.target.get("tagName"))?C+"_thumb":C}B.chrome.beaconClick(B.getRapidTrackingData(C),B.config.modId);B.renderItem(B.currentIndex);if(A[B.currentIndex].isVideo){D=B.nodes.viewport.container.one(".lb-video-cta");if(D){D.simulate("click")}}},addLoadingOverlay:function(){var A=this,D=A.body,B=c.one("html"),C='<div id="content-lightbox" class="yom-lb {{ieClass}} lb-spinner">';if(c.UA.ie&&c.UA.ie<10){C=C.replace("{{ieClass}}","ie")}else{C=C.replace("{{ieClass}}","")}B.addClass("noscroll");D.prepend(C);setTimeout(function(){var E=D.one("#content-lightbox");E.addClass("yom-lb-bg")},0)},findSelectedPhoto:function(){var C=this,A,B=C.data[C.slideshowId].content.items,D=B.length;if(C.curSelectedId){if(C.curSelectedId===C.slideshowId){return 0}if(C.curSelectedId<B.length){return C.curSelectedId}if(C.target&&C.target.hasClass("go-to-slideshow-lightbox")&&C.target.hasClass("cover")&&!C.target.hasClass("open-to-index")){return 0}else{A=c.Array.find(B,function(E){if(E.uuid===C.curSelectedId){return true}return false},C);if(A===null&&!C.allLoaded){D+=C.calculateAdPositionOffset();C.getSlideshowData(D,b,0,{additionalData:true,reRender:true});return null}if(A===null&&C.allLoaded){return 0}return c.Array.indexOf(B,A)}}return 0},setupLightbox:function(){var D=this,A=D.body,E=A.one("#content-lightbox"),G,C,F,B;C=D.templates.structure({slideshowId:D.slideshowId,slideshowTitle:D.data[D.slideshowId].headline,slideshowDesc:(D.data[D.slideshowId].desc)?{slideshowDesc:D.data[D.slideshowId].desc}:null,embedSlotOne:(D.config.embed_slots.one&&D.config.embed_slots.one.m_id)?g:null,embedSlotTwo:(D.config.embed_slots.two&&D.config.embed_slots.two.m_id)?t:null,embedSlotThree:(D.config.embed_slots.three&&D.config.embed_slots.three.m_id)?w:null,embedSlotSouth:(D.config.embed_slots.south&&D.config.embed_slots.south.m_id)?z:null,commentsModuleId:x,todayModuleId:f,moreString:D.config.strings.moreString,lessString:D.config.strings.lessString,slideshowModuleId:h,trendingModuleId:a,enableTrendingModule:D.enableTrendingModule,ieClass:(c.UA.ie&&c.UA.ie<10)?"ie":null,disableComments:D.disableComments,enableLDRBads:D.enableLDRBads?D.enableLDRBads:null});F=c.Node.create(C);D.nodes.shareButtonsContainer=F.one("#lb-share-btns");D.nodes.preloadContainer=F.one("#lb-preload");G=F.one("#"+x);if(G){D.nodes.commentsContainer=G.ancestor(".lb-comments")}D.nodes.meta={};D.nodes.meta.container=F.one("#lb-meta");D.nodes.viewport={};D.nodes.viewport.container=F.one("#lb-viewport");D.nodes.viewport.list=F.one("#lb-viewport-list");D.nodes.viewport.nextButtonPanel=F.one("#lb-nav-right-panel");D.nodes.viewport.prevButtonPanel=F.one("#lb-nav-left-panel");D.nodes.viewport.nextButton=F.one("#lb-btn-next");D.nodes.viewport.prevButton=F.one("#lb-btn-prev");D.nodes.viewport.title=F.one("#lb-hd > span");D.nodes.rp={};D.nodes.rp.container=F.one("#lb-rp");D.nodes.rp.embedOne=D.nodes.rp.container.one("#"+g);D.nodes.rp.embedTwo=D.nodes.rp.container.one("#"+t);D.nodes.rp.embedThree=D.nodes.rp.container.one("#"+w);D.nodes.rp.info=D.nodes.rp.container.one("#lb-info");D.nodes.rp.desc=D.nodes.rp.container.one("#lb-ss-desc");D.nodes.cp={};D.nodes.cp.container=F.one("#lb-cp");D.nodes.cp.embedSouth=D.nodes.cp.container.one("#"+z);if(A&&E){E.replace(F);B=window.setInterval(function(){if(YMedia&&YMedia.Media&&YMedia.Media.shareButtonsBuilder){window.clearInterval(B);c.Global.fire(m,{type:"content-slideshow",containerNode:D.nodes.shareButtonsContainer,moreMenuPosition:"top",moreMenuDelay:400,sec:"sh"});setTimeout(function(){D.updateSharingData()},200)}},100);D.body.removeClass("slideshow-hide-1-1");if(D.nodes.rp.desc&&D.nodes.rp.desc.get("clientHeight")<230){D.nodes.rp.info.removeClass("truncate")}D.nodes.lightboxContainer=c.one(n);D.bindResizeEvent();D.bindCloseEvents();D.bindNavigationEvents();D.bindKeyboardEvents();D.bindEndSlideLastViewClickEvents();D.bindVideoPlayEvents();D.bindToggleSlideshowTitleEvents();D.bindGoToSlideEvent();D.bindGetCurrentLightboxItemEvent();c.later(100,D,function(){if(D.enableEmbedSlots){D.setupEmbedSlots()}D.fetchAd(D.config.spaceId);if(!D.disableComments){D.setupComments()}D.setupTodayModule();D.setupSlideshowModule();if(D.enableTrendingModule){D.setupTrendingModule()}})}},compileTemplates:function(B){var A=this;A.templates={};if(B.metaStructure){A.templates.metaStructure=c.Handlebars.compile(B.metaStructure)}if(B.photoStructure){A.templates.photoStructure=c.Handlebars.compile(B.photoStructure)}if(B.structure){A.templates.structure=c.Handlebars.compile(B.structure)}if(B.rmxStructure){A.templates.rmxStructure=c.Handlebars.compile(B.rmxStructure)}if(B.rmxCtaStructure){A.templates.rmxCtaStructure=c.Handlebars.compile(B.rmxCtaStructure)}},calculateAdPositionOffset:function(){var B=this,A=B.currentIndex,C=0;c.Array.each(B.rmxAdIndices,function(D){if(A>D){C-=1}});return C},renderItem:function(A){var C=this,B=C.data[C.slideshowId].content.items,E=B[A],D;C.currentIndex=A;D=c.one(".lb-viewport-list li");if(B[A].isEndSlide){C.renderEndSlide(E,D);C.bindEndSlideResizeEvent()}else{if(B[A].isInterstitialAd){C.renderInterstitial(E,D);C.renderRmxAdCta(E);C.resizeViewport()}else{C.renderContentItem(E,B,D);C.resizeViewport()}}c.Global.fire("content-lightbox:item-rendered",{content:E});if(B[A].isInterstitialAd){if(!B[A].isBeaconFired){C.fireBeacon(B[A].viewbeacon,A);if(B[A].externalbeacon){C.fireBeacon(B[A].externalbeacon)}B[A].isBeaconFired=true}}else{if(C.enableRMXAds||C.enableNativeAds){C.removeRmxAdCta()}C.handlePageTracking(B[A],C.lightboxOpenSource,B[A].isEndSlide)}},removeNativeAd:function(A){var B=this,C;B.data[B.slideshowId].content.items.splice(A,1);for(C=0;C<B.rmxAdIndices.length;C++){if(B.rmxAdIndices[C]===A){B.rmxAdIndices.splice(C,1)}}B.currentIndex--},renderContentItem:function(H,D,F){var I=this,G=I.templates.photoStructure,C=I.currentIndex+1,E,B,A,J;C+=I.calculateAdPositionOffset();E=G({imgSrc:H.img&&H.img.url,imgTitle:H.title,hidePrev:I.currentIndex===0,hideNext:I.currentIndex===D.length-1,includeButtons:true,viewportHeight:I.windowViewportHeight,isVideo:H.isVideo,isTumblrVideo:H.isTumblrVideo,isEmbed:H.isEmbed,embed:H.embed,player:H.player,leftPosition:0,id:"id-"+I.currentIndex});I.nodes.viewport.list.append(E);if(I.currentIndex===0){I.nodes.viewport.prevButton.addClass("hidden")}else{if(I.currentIndex===D.length-1){I.nodes.viewport.nextButton.addClass("hidden")}else{I.nodes.viewport.nextButton.removeClass("hidden");I.nodes.viewport.prevButton.removeClass("hidden")}}B=I.templates.metaStructure;I.nodes.viewport.list.one("#id-"+I.currentIndex).setStyle("left",0);if(F){F.remove()}A=B({title:(H.title!==H.caption)?H.title:(H.isIbItem?"":I.data[I.slideshowId].headline),timestamp:H.date,description:H.caption,current:C,ibItem:H.isIbItem,relatedString:I.config.strings.relatedSearchString,more:I.config.strings.moreString,less:I.config.strings.lessString,total:I.data[I.slideshowId].total,video:(H.isVideo)?{duration:H.duration}:null,tumblrAttribution:H.tumblr,isSponsored:H.isSponsored,sponsor_url:H.provider_url,provider:H.provider,attribution:H.attribution,captionToggled:I.captionToggled});I.nodes.meta.container.empty();I.nodes.meta.container.prepend(A);J=I.nodes.meta.container.one(".lb-meta-content").get("clientHeight");if(I.captionToggled&&J<161&&J>0){I.nodes.lightboxContainer.one(".less-txt-button").addClass("hidden")}if(I.currentIndex===0){I.nodes.meta.container.one(".lb-meta-btn.lb-prev").addClass("lb-btn-disabled")}else{if(I.currentIndex===D.length-1){I.nodes.meta.container.one(".lb-meta-btn.lb-next").addClass("lb-btn-disabled")}}if(I.titleChanged){I.titleChanged=false;I.nodes.cp.container.removeClass("lb-more-cp");I.nodes.viewport.title.set("innerHTML",I.data[I.slideshowId].headline);if(I.nodes.cp.info){I.nodes.cp.info.show()}I.nodes.shareButtonsContainer.show();if(I.nodes.commentsContainer){I.nodes.commentsContainer.show()}I.nodes.meta.container.show()}if(I.refreshTimer){I.refreshTimer.cancel()}I.refreshTimer=c.later(300,I,function(){if(I.comments&&I.comments.nodes.list){I.comments.refreshWithContextID(H.uuid)}I.updateSharingData()});I.preloadItems(I.currentIndex);I.bindMoreCaptionEvents()},preloadItems:function(A){var C=this,B=C.data[C.slideshowId].content.items,F=B.length,G=C.nodes.preloadContainer,E,H=A-e,D=A+e;while(H<=D){if(H>=0&&H<=F-1&&!B[H].isPreloaded&&B[H].img&&B[H].img.url){B[H].isPreloaded=true;E=C.templates.photoStructure({imgSrc:B[H].img.url,viewportHeight:1,leftPosition:0});G.append(E)}H+=1}},prefetchVideos:function(C){var J=this,D=J.data[J.slideshowId].content.playlist||"",B=0,G=0,F,A,H,I,E,K=[];if(J.config.enableVideoPrefetch!==1||D===""){return}I=D.length;if(typeof C==="undefined"||C===null){while(B<I&&K.length<s){if(D[B].player_type==="yep"){if(!D[B].isPreloaded){D[B].isPreloaded=true;K.push(D[B])}}B+=1}c.fire(i,{collectionId:J.slideshowId,playlist:K})}else{A=J.data[J.slideshowId].content.items[J.currentIndex].isVideo;if(A){F=J.data[J.slideshowId].content.items[J.currentIndex].uuid;H=c.Array.find(D,function(L){if(L.id===F){return true}return false},J);if(!H){return}E=c.Array.indexOf(D,H);B=E;while(B<I&&K.length<s){if(D[B].player_type==="yep"){if(!D[B].isPreloaded){D[B].isPreloaded=true;K.push(D[B])}else{G++;if(G>=q){return}}}B+=1}c.fire(i,{collectionId:J.slideshowId,playlist:K})}}},bindMoreCaptionEvents:function(){var A=this;A.detachableHandles.push(A.nodes.meta.container.delegate("click",A.handleMoreCaptionClick,".more-txt-button, .less-txt-button",A))},handleMoreCaptionClick:function(G){var C=this,D,F,B,E=G.currentTarget,A=E.ancestor(".lb-meta-cp");if(A){B=C.nodes.lightboxContainer.one(".less-txt-button");F=C.nodes.lightboxContainer.one(".more-txt-button");if(E.hasClass("more-txt-button")){A.removeClass("truncate");B.removeClass("hidden");F.addClass("hidden");D=C.getRapidTrackingData("toggle_img_caption_more");C.chrome.beaconClick(D,C.config.modId);C.captionToggled=true}else{if(E.hasClass("less-txt-button")){A.addClass("truncate");F.removeClass("hidden");B.addClass("hidden");D=C.getRapidTrackingData("toggle_img_caption_less");C.chrome.beaconClick(D,C.config.modId);C.captionToggled=null}}}},bindToggleSlideshowTitleEvents:function(){var A=this;A.detachableHandles.push(A.nodes.lightboxContainer.delegate("click",A.handleSlideshowTitleClick,".more-ss-desc-button, .less-ss-desc-button",A))},handleSlideshowTitleClick:function(G){var B=this,F=G.currentTarget,D,E,A,C=F.ancestor(".lb-info");if(C){A=B.nodes.lightboxContainer.one(".less-ss-desc-button");E=B.nodes.lightboxContainer.one(".more-ss-desc-button");if(F.hasClass("more-ss-desc-button")){C.removeClass("truncate");A.removeClass("hidden");E.addClass("hidden");D=B.getRapidTrackingData("toggle_ss_caption_more");B.chrome.beaconClick(D,B.config.modId)}else{if(F.hasClass("less-ss-desc-button")){C.addClass("truncate");A.addClass("hidden");E.removeClass("hidden");D=B.getRapidTrackingData("toggle_ss_caption_less");B.chrome.beaconClick(D,B.config.modId)}}}},bindGoToSlideEvent:function(){var A=this;c.Global.on("content-lightbox:go-to-slide",function(E){var D=A.data[A.slideshowId].content.items,B,F,C;B=c.Array.find(D,function(G){if(G.uuid===E.id){return true}return false},A);C=c.Array.indexOf(D,B);F=A.getRapidTrackingData("nav_thumb",C);A.chrome.beaconClick(F,A.config.modId);A.renderItem(C);if(c.Media.adController.isEventBasedRotation()){c.Media.adController.refreshAd()}A.nodes.lightboxContainer.set("scrollTop",0)},A)},bindGetCurrentLightboxItemEvent:function(){var A=this;c.Global.on("content-lightbox:get-current-item",function(){var D=A.slideshowId,B=A.currentIndex,C;if(D&&A.data[D]&&A.data[D].content&&A.data[D].content.items){C=A.data[D].content.items[B]}c.Global.fire("content-lightbox:current-item",{content:C})},A)},bindNavigationEvents:function(){var A=this;A.detachableHandles.push(A.nodes.viewport.container.delegate("click",A.handleNavigationClick,".lb-nav-left-panel,.lb-nav-right-panel",A));A.detachableHandles.push(A.nodes.lightboxContainer.delegate("click",A.handleNavigationClick,".lb-meta-btn",A))},handleNavigationClick:function(D){var A=this,C,B="img";if(D.currentTarget.hasClass("lb-video-thumbnail")){A.handleVideoPlayClick();return}else{if(D.currentTarget.hasClass("lb-meta-btn")){C=D.currentTarget.hasClass("lb-prev")?"prev":"next";B="desc"}else{if(D.currentTarget.hasClass("lb-nav-right-panel")){C="next"}else{if(D.currentTarget.hasClass("lb-nav-left-panel")){C="prev"}else{if(A.data[A.slideshowId].content.items[A.currentIndex].isInterstitialAd){return}C="next"}}}}A.handleNavigation(D,C,B)},bindKeyboardEvents:function(){var A=this;A.detachableHandles.push(c.one("document").on("keydown",function(B){switch(B.keyCode){case 37:A.handleNavigation(B,"prev","keyboard");break;case 39:A.handleNavigation(B,"next","keyboard");break;case 27:A.prepareToCloseLightbox(B);break;default:break}}))},handleNavigation:function(E,I,B){var J=this,C,F,G="nav_img_",H=J.data[J.slideshowId].content.items,A=H.length,D=("prev"===I)?J.currentIndex-1:J.currentIndex+1;if(D>=0&&D<H.length){G="nav_"+B+"_"+I;if(H[D].isInterstitialAd&&H[D].interstitialSource==="rmx"){C={paid:H[D].uuid,pad:"1"}}F=J.getRapidTrackingData(G,D,C);if(B==="keyboard"){J.chrome.beaconClick(F,J.config.modId)}else{J.chrome.beaconClick(F,J.config.modId)}if(J.data[J.slideshowId].content.items[J.currentIndex].isEndSlide){if(J.nodes.rp.info){J.nodes.rp.info.show()}}J.nodes.viewport.container.one(".lb-nav-right-panel").removeClass("hidden");J.renderItem(D);if(!H[J.currentIndex].isInterstitialAd){if(c.Media.adController.isEventBasedRotation()){c.Media.adController.refreshAd()}}else{J.toggleAdDisplay([o,u,v,r],"hide");J.removeNativeAd(J.currentIndex)}if(!J.allLoaded&&D>=J.fetchMoreIndex){J.fetchMoreIndex+=b;c.later(100,J,function(){A+=J.calculateAdPositionOffset();J.getSlideshowData(A,b,0,{additionalData:true})})}}},resizeViewport:function(){var D=this,A=D.nodes.viewport.container,E=parseInt(A.getComputedStyle("width"),10),B=E*4/6,C=A.one("img");D.windowViewportHeight=B;D.nodes.viewport.container.setStyles({height:B+"px",lineHeight:B+"px"});if(C){C.setStyle("maxHeight",B+"px");C.setStyle("maxWidth",B*1.5+"px")}},bindResizeEvent:function(){var A=this;A.detachableHandles.push(A.viewport.on("resize",A.resizeViewport,A))},fetchAd:function(F){var H=this,A=[],G=H.config.enableViewportRotation==="1",C=parseInt(H.config.enableViewportRotationDuration,10),B=H.config.overrideViewportRotationSpaceid||"",E=H.config.enableTimeBasedRotation==="1",I=parseInt(H.config.timeBasedRotationInterval,10),J={enableViewportRotation:G,viewportRotationDuration:C,enableTimeBasedRotation:E,timeBasedRotationInterval:I};A.push("LREC-1","LREC2-1");if(H.enableLDRBads){A.push("LDRB-1")}if(H.enableFilmAd){A.push("FILM-1")}try{if(G){if(B&&B!==""){c.log("spaceid is overridden to "+B);F=B}}if(c.Media.adController._isDarlaReady()){c.Media.adController.fetchAd(A,F,J)}else{c.Global.on("darla:ready",function(){c.Media.adController.fetchAd(A,F,J)})}}catch(D){c.log("Y.Media.adController.fetchAd failed","error")}},toggleAdDisplay:function(G,F){var C=this,E=C.nodes.lightboxContainer,A=G.length,D,B;for(D=0;D<A;D++){B=E.one(G[D]);if(B){if(F==="hide"){B.hide()}else{B.show()}}}},updateSharingData:function(){var J=this,C=J.data,D=J.currentIndex,G={},F,H,B,E,A,I;if(!(C&&C[J.slideshowId].content&&C[J.slideshowId].content.items)){return}F=C[J.slideshowId].content.items,H=F[D].title||document.title,B=J.isSlideshow?F[D].url||J.getEmbedImageAnchor()||J.slideshowUrl:J.data[J.slideshowId].slideshowUrl,E=F[D].caption||"",A=F[D].uuid||"",I=(F[D].img)?F[D].img.url:"";if(B){G={uuid:A,url:B,title:H,desc:E,img:I};c.Global.fire(p,G)}},getEndSlideSharingData:function(){var A=this,B=A.data[A.slideshowId].slideshowUrl,G=A.data[A.slideshowId].desc||"",D=A.slideshowId||"",C=A.data[A.slideshowId].coverPhotoURL||"",F=A.data[A.slideshowId].headline||"",E={};E={uuid:D,url:B,title:F,desc:G,img:C};return E},setupComments:function(){var A=this,C=c.clone(c.Media.pageContentCommentsDefaultConfig,true),B=(A.data[A.slideshowId])?A.data[A.slideshowId].content.items[A.currentIndex].uuid:A.slideshowId;if(!C){return}C.config.modId=x;C.config.contentId=B;C.config.enableAutoTearDown=false;C.config.location="lightbox";C.config.enableCollapsedComment=0;A.comments=new c.Media.ContentComments(C);A.comments.displayModule(null);A.addModToRapid(x)},setupTodayModule:function(){var A=this;if(A.config&&A.config.todayInstanceId!==""){c.Media.RMP.load({srcNode:"#"+f,timeout:2000,continueOnError:true,params:{m_id:"MediaRemoteInstance",instance_id:A.config.todayInstanceId,disable_pjax:"1",nolz:"1"},onComplete:function(){if(YMedia&&YMedia.rapid){setTimeout(function(){A.addModToRapid(f)},100)}}})}},setupSlideshowModule:function(){var A=this;if(A.config&&A.config.slideshowInstanceId!==""){c.Media.RMP.load({srcNode:"#"+h,timeout:2000,continueOnError:true,params:{m_id:"MediaRemoteInstance",instance_id:A.config.slideshowInstanceId,disable_pjax:"1",nolz:"1"},onComplete:function(){if(YMedia&&YMedia.rapid){setTimeout(function(){A.addModToRapid(h)},100)}}})}},setupTrendingModule:function(){var A=this;if(A.config&&A.config.trendingInstanceId!==""){c.Media.RMP.load({srcNode:"#"+a,timeout:2000,continueOnError:true,params:{m_id:"MediaRemoteInstance",instance_id:A.config.trendingInstanceId,disable_pjax:"1",nolz:"1"},onComplete:function(){if(YMedia&&YMedia.rapid){setTimeout(function(){A.addModToRapid(a)},100)}}})}},tearDown:function(B){var A=this,C=A.comments;if(B){A.nodes={};if(C){C.tearDown();A.comments=null}c.Array.each(A.detachableHandles,function(D){D.detach()},A);A.detachableHandles=[]}A.curSelectedId=null;A.isSlideshow=true;A.slideshowId=null;A.slideshowUrl=null;A.redir_href=null;A.allLoaded=null;A.loadAll=null;A.target=null;A.captionToggled=null;A.fetchedBatch=0},bindCloseEvents:function(){var A=this,B=A.nodes.lightboxContainer.one(".close-btn");A.detachableHandles.push(A.nodes.lightboxContainer.on("click",A.prepareToCloseLightbox,A));if(B){A.detachableHandles.push(B.on("click",A.prepareToCloseLightbox,A))}},prepareToCloseLightbox:function(B){var A=this,C=A.chrome.getRapidConfInit();if(B.currentTarget!==B.target){return}A.chrome.beaconClick(A.getRapidTrackingData("close_lgtbx"),A.config.modId);A.closeLightbox(B);c.Global.fire("beacon-manager:comscore-pageview",{force:true});c.Global.fire("content:reveal",{config:C})},closeLightbox:function(E){var A=this,B=c.one("html"),D=(A.nodes&&A.nodes.lightboxContainer)||null,C=A.redir_href;if(D){D.remove();if(B){B.removeClass("noscroll")}A.tearDown(true);if(c.UA.ie&&c.UA.ie<10&&C){window.location=C;E.halt()}}},bindVideoPlayEvents:function(){var A=this;A.detachableHandles.push(A.nodes.lightboxContainer.delegate("click",A.handleVideoPlayClick,".lb-video-cta",A))},handleVideoPlayClick:function(){var A=this,F=A.data[A.slideshowId].content.items[A.currentIndex].uuid,G="lb-video-container",C=A.nodes.viewport.container.one("#"+G),E=A.nodes.viewport.container.one(".lb-video-cta"),D=A.nodes.viewport.container.one("img"),B=A.data[A.slideshowId].content.playlist||"";if(C&&F){C.removeClass("hidden");E.remove(true);D.remove(true);c.fire(j,{id:F,containerId:G,collectionId:A.slideshowId,usePrefetch:A.config.enableVideoPrefetch===1,playlist:B})}},setupEmbedSlots:function(){var A=this,B=A.chrome&&A.chrome.getContentId();if(!(A.config&&A.config.embed_slots)){return}if(A.config.embed_slots.one&&A.config.embed_slots.one.m_id){A.nodes.rp.embedOne.removeClass("hidden");A.config.embed_slots.one.content_id=B;c.Media.RMP.load({srcNode:"#"+g,timeout:2000,continueOnError:true,params:A.config.embed_slots.one})}if(A.config.embed_slots.two&&A.config.embed_slots.two.m_id){A.nodes.rp.embedTwo.removeClass("hidden");A.config.embed_slots.two.content_id=B;c.Media.RMP.load({srcNode:"#"+t,timeout:2000,continueOnError:true,params:A.config.embed_slots.two})}if(A.config.embed_slots.three&&A.config.embed_slots.three.m_id){A.nodes.rp.embedThree.removeClass("hidden");A.config.embed_slots.three.content_id=B;c.Media.RMP.load({srcNode:"#"+w,timeout:2000,continueOnError:true,params:A.config.embed_slots.three})}if(A.config.embed_slots.south&&A.config.embed_slots.south.m_id){A.nodes.cp.embedSouth.removeClass("hidden");A.config.embed_slots.south.content_id=B;c.Media.RMP.load({srcNode:"#"+z,timeout:2000,continueOnError:true,params:A.config.embed_slots.south})}},handlePageTracking:function(E,F,C){var L=this,K=null,G=true,J=true,B,I,M,D,H,A=null;if(!E){return}B=L.chrome.getContentId()||null;M=E.id||E.uuid||null;D=(E.isIbItem===true)?"4":"";I=E.title||null;H=L.pagePD?"_"+L.pagePD:"";K={id:B,paid:M,title:I,type:d.type,pt:d.pt,pct:d.pct,pst:D,pd:C?"lghtbx-end":"lghtbx"+H,provider:E.provider,revshare:E.revshare,spaceid:L.config.spaceId};A=YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig;switch(F){case 0:L.chrome.sendComscoreBeacon(K);break;case 1:L.chrome.logPageView(K,G,J,A);break;case 2:L.chrome.logPageView(K,G,J,A);break;default:L.chrome.logPageView(K,G,J,A)}L.lightboxOpenSource=null},getEmbedImageAnchor:function(){var B=this,A=B.currentIndex,C=B.data[B.slideshowId].content.items[A];if(C.coverId){return((window.location.hash)?window.location.href.replace(window.location.hash,""):window.location.href)+"#"+C.coverId}return null},getRapidTrackingData:function(B,A,D){var C=this,E;if(!B){return""}E={outcome:this.actionDataMap[B].outcome||"",sec:"sshow",linkname:this.actionDataMap[B].slk||"",name:this.actionDataMap[B].name||"",keys:{t2:"sshow",tar:window.location.hostname,g:C.chrome.getContentId()||"",rspns:this.actionDataMap[B].rspns,t1:this.actionDataMap[B].t1,t3:this.actionDataMap[B].t3,t4:this.actionDataMap[B].t4||"",t8:C.ibSlideshowTotal||0,t9:C.slideshowTotal,elm:this.actionDataMap[B].elm||"",elmt:this.actionDataMap[B].elmt||"",itc:this.actionDataMap[B].itc||"0",aid:(this.actionDataMap[B].rspns==="nav"&&A)?C.data[C.slideshowId].content.items[A].uuid:C.data[C.slideshowId].content.items[C.currentIndex].uuid,cpos:(this.actionDataMap[B].rspns==="nav"&&A)?A+1:C.currentIndex+1}};if(D){c.Object.each(D,function(G,F){E.keys[F]=G})}return E},refreshLinkTrackMods:function(){var A=this,D,C,B;if(YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig){D=YMedia.rapid.rapidConfig.tracked_mods;YMedia.rapid.rapidConfig.tracked_mods=[];if(D.length){for(C=0,B=D.length;C<B;C++){YMedia.rapid.removeModule(D[C])}}}},addModToRapid:function(A){if(YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig&&YMedia.rapid.rapidConfig.tracked_mods){if(!YMedia.rapid.isModuleTracked(A)){YMedia.rapid.rapidConfig.tracked_mods.push(A);YMedia.rapid.addModules(A)}}},actionDataMap:{open_lgtbx_automatic:{rspns:"xpnd",t1:"a3",t3:"auto",slk:"expand",itc:"1"},open_lgtbx_lead:{rspns:"xpnd",t1:"a3",t3:"tp",slk:"expand",elm:"img",elmt:"ct",itc:"0"},open_lgtbx_lead_thumb:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"tp",slk:"expand",elm:"tl",elmt:"ct",itc:"0"},open_lgtbx_embed:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"embd",slk:"expand",elm:"img",elmt:"ct",itc:"0"},open_lgtbx_embed_thumb:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"embd",slk:"expand",elm:"tl",elmt:"ct",itc:"0"},close_lgtbx:{outcome:"pgnt",rspns:"clps",t1:"a0",t3:"full",slk:"cl",elm:"btn",elmt:"cl",itc:"0"},nav_img_next:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"img",slk:"ne",elm:"btn",elmt:"ne",itc:"0"},nav_img_prev:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"img",slk:"pv",elm:"btn",elmt:"pr",itc:"0"},nav_desc_next:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"desc",slk:"ne",elm:"btn",elmt:"ne",itc:"0"},nav_desc_prev:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"desc",slk:"pv",elm:"btn",elmt:"pr",itc:"0"},nav_keyboard_next:{name:"key",outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"ne",elm:"key",elmt:"ne",itc:"0"},nav_keyboard_prev:{name:"key",outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"pv",elm:"key",elmt:"pr",itc:"0"},nav_thumb:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"thumb",elm:"tl",elmt:"ct",itc:"0"},toggle_img_caption_more:{rspns:"xpnd",t1:"a0",t3:"full",t4:"desc",slk:"mr",elm:"itm",elmt:"mr",itc:"1"},toggle_img_caption_less:{rspns:"xpnd",t1:"a0",t3:"full",t4:"desc",slk:"ls",elm:"itm",elmt:"ls",itc:"1"},toggle_ss_caption_more:{rspns:"xpnd",t1:"a0",t3:"full",t4:"rr",slk:"mr",elm:"itm",elmt:"mr",itc:"1"},toggle_ss_caption_less:{rspns:"xpnd",t1:"a0",t3:"full",t4:"rr",slk:"ls",elm:"itm",elmt:"ls",itc:"1"},click_endslide_thumb:{rspns:"nav",t1:"a0",t3:"full",t4:"end",slk:"",elm:"itm",elmt:"ct",itc:"0"}}})},"0.0.1",{requires:["node-base","json-parse","node-event-simulate","media-ad-controller","jsonp","handlebars"]});
/* content-lightbox-ib.js 1646075 */ YUI.add("media-content-lightbox-ib",function(a){a.namespace("Media");if(a.Media&&a.Media.ContentLightbox){a.mix(a.Media.ContentLightbox,{fetchIbItems:function(f){var c=this,b=f.content.items,e=f.headline||"",d=[];a.Array.each(b,function(g){if(g.uuid){d.push(g.uuid)}});c.getXhr({api:"/_xhr/content-lightbox-infinitebrowse/",data:{count:c.fetchIBCount,image_threshold:c.IBImageThreshold,video_threshold:c.IBVideoThreshold,metalen10_filter:c.IBMetalen10_filter,content_id:c.chrome.getContentId(),mtype:c.IBmtype,existing_ids:d?(d.join(",")):"",content_title:e},success:c.handleIbSuccess,failure:c.handleIbFailure,args:{self:c,dataOnPage:f}})},handleIbSuccess:function(h,g,d){var c=d.self,b=(g.responseText)?a.JSON.parse(g.responseText):null,f=b?b.responseData:null,e=d.dataOnPage;if(f){e.content.items=(e.content.items)?e.content.items.concat(f.content.items):f.content.items;e.content.playlist=(e.content.playlist)?e.content.playlist.concat(f.content.playlist):f.content.playlist;e.total+=f.total;e.itemCount=e.total;c.ibSlideshowTotal=f.total}c.processLightboxData(e,false)},handleIbFailure:function(f,e,c){var b=c.self,d=c.dataOnPage;b.processLightboxData(d,false)}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base","json-parse"]});
/* content-lightbox-endslide.js 1770533 */ YUI.add("media-content-lightbox-endslide",function(a){a.namespace("Media");if(a.Media&&a.Media.ContentLightbox){a.mix(a.Media.ContentLightbox,{fetchEndSlide:function(){var b=this,f=b.config.mostPopularEndPoint||"/_xhr/content-slideshow-endslide-mostpopular/",e=b.config.relatedEndPoint||"/_xhr/content-slideshow-endslide-related/",d={device:b.config.device,contentLightbox:1,position:b.data[b.slideshowId].content.items.length},c;if(!b.enableEndSlideMP&&!b.enableEndSlideRel){return}if(b.enableEndSlideRel&&b.slideshowId){c=e;d.content_id=b.slideshowId}if(b.endSlideImgRatio){d.endSlideImgRatio=b.endSlideImgRatio}if(b.endSlideImgWidth){d.endSlideImgWidth=b.endSlideImgWidth}if(b.data[b.slideshowId].coverPhotoURL){d.lastViewedCoverPhotoUrl=b.data[b.slideshowId].coverPhotoURL}if(b.data[b.slideshowId].url){d.lastViewedSlideshowUrl=b.data[b.slideshowId].url}if(b.data[b.slideshowId].headline){d.lastViewedSlideshowTitle=b.data[b.slideshowId].headline}if(b.slideshowId){d.lastViewedSlideshowId=b.slideshowId}if(b.enableEndSlideMP){c=f}b.getXhr({api:c,data:d,context:b,success:b.fetchEndSlideSuccess})},fetchEndSlideSuccess:function(g,f){var d=this,c=(f.responseText)?a.JSON.parse(f.responseText):null,b=d.data[d.slideshowId].content.items,e=c?c.responseData:null;if(e&&e.body){e.isEndSlide=true;e.uuid="lb-endslide";b[b.length]=e;d.nodes.preloadContainer.append(e.body)}},renderEndSlide:function(f,e){var d=this,b,c;d.nodes.cp.container.addClass("lb-more-cp");b=a.Node.create(f.body);b.setAttribute("id","id-"+d.currentIndex);d.nodes.endSlideNode=b;d.handleEndSlideGalleryResize();d.nodes.viewport.list.append(b);if(e){e.remove()}d.nodes.viewport.list.one(".lb-more").all(".lb-item-img-container img").on("load",function(){var h,i,g=150;h=d.nodes.viewport.list.all(".lb-item")._nodes;i=h.length;g+=h[i-1].offsetTop;d.nodes.viewport.container.setStyles({height:g+"px"})});d.nodes.viewport.container.one(".lb-nav-right-panel").addClass("hidden");d.nodes.viewport.prevButton.removeClass("hidden");if(d.nodes.cp.info){d.nodes.cp.info.hide()}if(d.nodes.rp.info){d.nodes.rp.info.hide()}d.nodes.shareButtonsContainer.hide();if(d.nodes.commentsContainer){d.nodes.commentsContainer.hide()}d.nodes.meta.container.hide();d.nodes.endSlideShareNode=d.nodes.cp.container.one("#endslide-share-btns");d.addModToRapid(d.endslideModId);c=window.setInterval(function(){if(YMedia&&YMedia.Media&&YMedia.Media.shareButtonsBuilder&&d.nodes.endSlideShareNode){window.clearInterval(c);var g=d.getEndSlideSharingData();if(g&&g.url){a.Global.fire("content:insert-share-panel",{type:"content-endslide",containerNode:d.nodes.endSlideShareNode,moreMenuPosition:"top",moreMenuDelay:400,sec:"sh",shareData:g});d.nodes.endSlideShareNode.show()}}},100);d.nodes.viewport.title.set("innerHTML",f.title);d.titleChanged=true},bindEndSlideResizeEvent:function(){var b=this;b.detachableHandles.push(b.viewport.on("endslide|resize",b.handleEndSlideGalleryResize,b))},handleEndSlideGalleryResize:function(){var d=this,b=d.nodes.cp.container,e=parseInt(b.getComputedStyle("width"),10)-80,c=(e<810)?115:(e-144)/7;d.nodes.endSlideNode.all("img").setStyle("maxHeight",c+"px");d.nodes.endSlideNode.one(".lb-more").setStyle("width",e+"px")},bindEndSlideLastViewClickEvents:function(){var b=this,c;c=b.nodes.lightboxContainer.delegate("click",b.handleEndSlideLastViewedClick,".lb-endslide-lastviewed",b);b.detachableHandles.push(c)},handleEndSlideLastViewedClick:function(f){var b=this,c=f.currentTarget,d;f.halt();b.nodes.viewport.container.one(".lb-nav-right-panel").removeClass("hidden");if(b.nodes.rp.info){b.nodes.rp.info.show()}d=b.getRapidTrackingData("click_endslide_thumb");d.linkname=c.one("span.lb-item-title").getContent();b.chrome.beaconClick(d,b.config.modId);b.renderItem(0);a.Media.adController.refreshAd()}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base","json-parse"]});
/* content-lightbox-rmx.js 1769014 */ YUI.add("media-content-lightbox-rmx",function(d){var c=".lb-lrec",a="#rmx-ad-cta-box",b="#rmx-ad-cta";d.namespace("Media");if(d.Media&&d.Media.ContentLightbox){d.mix(d.Media.ContentLightbox,{getInterstitial:function(){var e=this;if(!e.enableRMXAds&&!e.enableNativeAds){return}if(e.enableNativeAds){e.getNativeAds()}if(e.enableRMXAds){e.getRmxAds()}},getNativeAds:function(){var g=this,f="STRMI",j=g.config.spaceId,i="media",h=g.getDarlaEventId(),e=h&&DARLA_CONFIG.events[h].sa;g.getXhr({api:"/_xhr/native-ad/",data:{spaceid:j,property:i,position:f,maxheight:g.rmxMaxHeight,maxwidth:g.rmxMaxWidth,site_attribute:e},success:g.handleNativeSuccess,failure:g.handleRmxFailure,args:{self:g}})},getRmxAds:function(){var f=this,g="",h=window.location.href,e=Math.min(f.calcNumOfAdsNeeded(),f.rmxAdsToFetchMax);if(window.YMEDIA_REQ_ATTR&&window.YMEDIA_REQ_ATTR.instr&&window.YMEDIA_REQ_ATTR.instr.request_id){g=window.YMEDIA_REQ_ATTR.instr.request_id}f.getXhr({api:"/_xhr/rmx-ad/",data:{rmx_count:e,rmx_se:f.rmxAdsSectionId,rmx_cc:"STRM_IMG",ri:g,rmx_pu:h,spaceid:f.config.spaceId,maxheight:f.rmxMaxHeight,maxwidth:f.rmxMaxWidth},success:f.handleRmxSuccess,failure:f.handleRmxFailure,args:{self:f}})},getDarlaEventId:function(){var e;for(e in DARLA_CONFIG.events){return e}return},calcNumOfAdsNeeded:function(){var e=this,f=e.slideshowTotal-1,g=f-e.rmxFirstIndexLoad;if(g<0){return 0}return(g/e.rmxAdLoadInterval)+1},handleNativeSuccess:function(l,k,h){var g=h.self,f=g.data[g.slideshowId].content.items,j=g.rmxFirstIndexLoad+Math.ceil(g.currentIndex/g.rmxAdLoadInterval)*g.rmxAdLoadInterval,e=(k.responseText)?d.JSON.parse(k.responseText):null,i;if(g.data[g.slideshowId].interstitialSource&&g.data[g.slideshowId].interstitialSource!=="native"){return}if(!e||!e.STRMI||!e.STRMI.tag||!e.STRMI.tag.hqImage){d.log("no response for STRMI ad");if(g.data[g.slideshowId].interstitialSource){g.data[g.slideshowId].interstitialSource="rmx";g.insertRmxAd()}if(e&&e.STRMI&&e.STRMI.tag&&e.STRMI.tag.beacon){g.fireBeacon(e.STRMI.tag.beacon)}return}g.rmxAdIndices=typeof(g.rmxAdIndices)==="undefined"?[]:g.rmxAdIndices;i=e.STRMI.tag;if(j<=f.length){g.rmxAdIndices.push(j);f.splice(j,0,{viewbeacon:i.beacon,externalbeacon:i.thirdparty_beacon,title:i.headline,desc:i.summary,img:i.hqImage,source:i.source,clickurl:i.clickUrl,brandimage:i.image,brandimagewidth:i.imageWidth,brandimageheight:i.imageHeight,isBeaconFired:false,isInterstitialAd:true});j+=g.rmxAdLoadInterval+1}g.data[g.slideshowId].interstitialSource="native"},handleRmxSuccess:function(i,h,g){var f=g.self,e=(h.responseText)?d.JSON.parse(h.responseText):null;if(!e||!e.ads||e.ads.length<=0){if(e&&e.error){d.log("rmx ad fetch returned with error")}return}f.rmxResponse=e;d.later(f.nativeAdsThreshold,f,f.insertRmxAd)},insertRmxAd:function(){var g=this,f=g.data[g.slideshowId].content.items,e=g.rmxResponse,h=g.rmxFirstIndexLoad+Math.ceil(g.currentIndex/g.rmxAdLoadInterval)*g.rmxAdLoadInterval;if(!e||!e.ads||e.ads.length<=0){return}if(g.data[g.slideshowId].interstitialSource&&g.data[g.slideshowId].interstitialSource!=="rmx"){return}g.rmxAdIndices=typeof(g.rmxAdIndices)==="undefined"?[]:g.rmxAdIndices;d.Array.each(e.ads,function(j){var i=this,k;if(!j.tag||!j.tag.image||h>f.length){return}k=j.tag;i.rmxAdIndices.push(h);f.splice(h,0,{uuid:j.creativeId,viewbeacon:j.beacon,title:k.headline,desc:k.summary,img:k.image,source:k.source,clickurl:k.clickUrl,brandimage:k.brand_image,brandimagewidth:k.imageWidth,brandimageheight:k.imageHeight,isBeaconFired:false,isInterstitialAd:true});h+=i.rmxAdLoadInterval+1},g);g.data[g.slideshowId].content.items=f;g.data[g.slideshowId].interstitialSource="rmx";d.log("rmx ad fetch sucess")},handleRmxFailure:function(g,f){var e=f.response||f.responseText;d.log("RMX Ad fetch failed: "+f.status);d.log("RMX Ad fetch response: "+e)},renderInterstitial:function(i,g){var f=this,j=f.templates.rmxStructure,e,k,h=f.templates.metaStructure;if(f.data[f.slideshowId].interstitialSource==="native"){f.getNativeAds()}e=j({id:"id-"+f.currentIndex,url:i.clickurl,imgSrc:i.img.url,viewportHeight:f.windowViewportHeight});f.nodes.viewport.list.append(e);if(g){g.remove()}k=h({ad:{adTitle:i.title,adSource:i.source,adUrl:i.clickurl},description:i.desc,total:f.data[f.slideshowId].total});f.nodes.meta.container.empty();f.nodes.meta.container.prepend(k);f.nodes.meta.container.one(".lb-meta-count").setStyle("visibility","hidden");f.titleChanged=true;f.nodes.shareButtonsContainer.hide();if(f.nodes.commentsContainer){f.nodes.commentsContainer.hide()}f.preloadItems(f.currentIndex)},renderRmxAdCta:function(h){var f=this,g=f.nodes.rp.container,j=g.one(c),i=f.templates.rmxCtaStructure,e;if(!j){return}f.nodes.lightboxContainer.one(".lb-content").addClass("rmx-ad");e=i({clickurl:h.clickurl,source:h.source,brandimage:h.brandimage,brandimagewidth:h.brandimagewidth,brandimageheight:h.brandimageheight});j.insert(e,"before");f.resizeRmxAdCta()},resizeRmxAdCta:function(){var r=this,f=r.nodes.viewport.container,h=r.nodes.rp.container,p,q,e,j,l,m,s,i,o,k,n,g;p=f._node.offsetTop;q=f._node.offsetHeight;e=p+q;j=h.one(a);l=j._node.offsetTop;m=j._node.offsetWidth;i=j.one(b);o=i._node.offsetWidth;k=i._node.offsetHeight;s=e-l;if(s<k){s=k}j.setStyle("height",s+"px");n=Math.floor(s/2)-Math.floor(k/2);g=Math.floor(m/2)-Math.floor(o/2);i.setStyle("top",n);i.setStyle("left",g)},removeRmxAdCta:function(){var f=this,g=f.nodes.rp.container,e=g.one(a);f.nodes.lightboxContainer.one(".lb-content").removeClass("rmx-ad");if(e){g.removeChild(e)}},fireBeacon:function(g,f){var e;if(!g||typeof g!=="string"){d.log("invalid url");return}g=g.replace("$(AD_POSN)",f);e=new Image();e.src=g},bindRmxAdClickEvents:function(){var e=this;e.detachableHandles.push(e.nodes.viewport.container.delegate("click",e.handleRmxAdImageClick,".lb-img",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdTitleClick,".lb-meta-title a:first-child",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdMarkerClick,".lb-meta-title .lb-adlink",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdAdvertiserClick,".lb-ad-source a",e));e.detachableHandles.push(e.nodes.rp.container.delegate("click",e.handleRmxAdCtaClick,"#rmx-ad-cta-box a",e))},handleRmxAdImageClick:function(){var e=this;if(e.data[e.slideshowId].content.items[e.currentIndex].interstitialSource==="rmx"){e.triggerRapidBeacon("click_rmxad_image")}},handleRmxAdTitleClick:function(){var e=this;if(e.data[e.slideshowId].content.items[e.currentIndex].interstitialSource==="rmx"){e.triggerRapidBeacon("click_rmxad_title")}},handleRmxAdMarkerClick:function(){this.triggerRapidBeacon("click_rmxad_marker")},handleRmxAdAdvertiserClick:function(){this.triggerRapidBeacon("click_rmxad_advertiser")},handleRmxAdCtaClick:function(){this.triggerRapidBeacon("click_rmxad_cta")},triggerRapidBeacon:function(e){var f=this,g=f.getRmxRapidTrackingData(e);f.chrome.beaconClick(g,f.config.modId)},getUrlHostname:function(f){var e;if(!f){return""}e=document.createElement("a");e.href=f;return e.hostname},getRmxRapidTrackingData:function(g){var i=this,h=i.data[i.slideshowId].content.items[i.currentIndex],j,f,e;if(!g){return""}switch(g){case"click_rmxad_image":case"click_rmxad_title":f=h.title;break;case"click_rmxad_marker":e=i.getUrlHostname(i.nodes.meta.container.one(".lb-meta-title .lb-adlink").getAttribute("href"));break;case"click_rmxad_advertiser":case"click_rmxad_cta":f=h.source;break}j={outcome:"",sec:"sshow",linkname:i.rmxActionDataMap[g].slk||f||"",name:"",keys:{rspns:"nav",t1:"a0",t2:"sshow",t3:"full",t4:i.rmxActionDataMap[g].t4||"",elm:i.rmxActionDataMap[g].elm||"",elmt:i.rmxActionDataMap[g].elmt||"",itc:"0",tar:e||i.getUrlHostname(h.clickurl),ad:"1",aid:h.uuid}};return j},rmxActionDataMap:{click_rmxad_image:{t4:"img",elm:"img",elmt:"ad"},click_rmxad_title:{t4:"desc",elm:"hdln",elmt:"ad"},click_rmxad_marker:{t4:"desc",slk:"adchoices",elm:"itm",elmt:"info"},click_rmxad_advertiser:{t4:"desc",elm:"itm",elmt:"adv"},click_rmxad_cta:{t4:"rght",elm:"tl",elmt:"ad"}}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base"]});/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-complex",function(e,t){var n=e.Attribute;n.Complex=function(){},n.Complex.prototype={_normAttrVals:n.prototype._normAttrVals,_getAttrInitVal:n.prototype._getAttrInitVal},e.AttributeComplex=n.Complex},"3.14.0",{requires:["attribute-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"3.14.0",{requires:["yui-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var e=this.get(w),t=this.CONTENT_TEMPLATE===null;return e&&t?e:null},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName
)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.14.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.14.0",{requires:["widget-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t=this.get(r)||this.get(n),o,u;return e=e||s(i,""),u=new RegExp("\\b"+e+"(\\S+)"),t&&t.ancestor(function(e){return o=e.get("className").match(u),o}),o?o[1]:null}},"3.14.0",{requires:["widget-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"3.14.0",{requires:["node-event-delegate","widget-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("arraylist",function(e,t){function s(t){t!==undefined?this._items=e.Lang.isArray(t)?t:n(t):this._items=this._items||[]}var n=e.Array,r=n.each,i;i={item:function(e){return this._items[e]},each:function(e,t){return r(this._items,function(n,r){n=this.item(r),e.call(t||n,n,r,this)},this),this},some:function(e,t){return n.some(this._items,function(n,r){return n=this.item(r),e.call(t||n,n,r,this)},this)},indexOf:function(e){return n.indexOf(this._items,e)},size:function(){return this._items.length},isEmpty:function(){return!this.size()},toJSON:function(){return this._items}},i._item=i.item,e.mix(s.prototype,i),e.mix(s,{addMethod:function(e,t){t=n(t),r(t,function(t){e[t]=function(){var e=n(arguments,0,!0),i=[];return r(this._items,function(n,r){n=this._item(r);var s=n[t].apply(n,e);s!==undefined&&s!==n&&(i[r]=s)},this),i.length?i:this}})}}),e.ArrayList=s},"3.14.0",{requires:["yui-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-parent",function(e,t){function s(t){this.publish("addChild",{defaultTargetOnly:!0,defaultFn:this._defAddChildFn}),this.publish("removeChild",{defaultTargetOnly:!0,defaultFn:this._defRemoveChildFn}),this._items=[];var n,r;t&&t.children&&(n=t.children,r=this.after("initializedChange",function(e){this._add(n),r.detach()})),e.after(this._renderChildren,this,"renderUI"),e.after(this._bindUIParent,this,"bindUI"),this.after("selectionChange",this._afterSelectionChange),this.after("selectedChange",this._afterParentSelectedChange),this.after("activeDescendantChange",this._afterActiveDescendantChange),this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild),this.after("*:focusedChange",this._updateActiveDescendant)}var n=e.Lang,r="rendered",i="boundingBox";s.ATTRS={defaultChildType:{setter:function(t){var r=e.Attribute.INVALID_VALUE,i=n.isString(t)?e[t]:t;return n.isFunction(i)&&(r=i),r}},activeDescendant:{readOnly:!0},multiple:{value:!1,validator:n.isBoolean,writeOnce:!0,getter:function(e){var t=this.get("root");return t&&t!=this?t.get("multiple"):e}},selection:{readOnly:!0,setter:"_setSelection",getter:function(t){var r=n.isArray(t)?new e.ArrayList(t):t;return r}},selected:{setter:function(t){var n=t;return t===1&&!this.get("multiple")&&(n=e.Attribute.INVALID_VALUE),n}}},s.prototype={destructor:function(){this._destroyChildren()},_afterDestroyChild:function(e){var t=e.target;t.get("parent")==this&&t.remove()},_afterSelectionChange:function(t){if(t.target==this&&t.src!=this){var n=t.newVal,r=0;n&&(r=2,e.instanceOf(n,e.ArrayList)&&n.size()===this.size()&&(r=1)),this.set("selected",r,{src:this})}},_afterActiveDescendantChange:function(e){var t=this.get("parent");t&&t._set("activeDescendant",e.newVal)},_afterParentSelectedChange:function(e){var t=e.newVal;this==e.target&&e.src!=this&&(t===0||t===1)&&this.each(function(e){e.set("selected",t,{src:this})},this)},_setSelection:function(e){var t=null,n;return this.get("multiple")&&!this.isEmpty()?(n=[],this.each(function(e){e.get("selected")>0&&n.push(e)}),n.length>0&&(t=n)):e.get("selected")>0&&(t=e),t},_updateSelection:function(e){var t=e.target,n;t.get("parent")==this&&(e.src!="_updateSelection"&&(n=this.get("selection"),!this.get("multiple")&&n&&e.newVal>0&&n.set("selected",0,{src:"_updateSelection"}),this._set("selection",t)),e.src==this&&this._set("selection",t,{src:this}))},_updateActiveDescendant:function(e){var t=e.newVal===!0?e.target:null;this._set("activeDescendant",t)},_createChild:function(t){var r=this.get("defaultChildType"),i=t.childType||t.type,s,o,u;return i&&(o=n.isString(i)?e[i]:i),n.isFunction(o)?u=o:r&&(u=r),u?s=new u(t):e.error("Could not create a child instance because its constructor is either undefined or invalid."),s},_defAddChildFn:function(t){var r=t.child,i=t.index,s=this._items;r.get("parent")&&r.remove(),n.isNumber(i)?s.splice(i,0,r):s.push(r),r._set("parent",this),r.addTarget(this),t.index=r.get("index"),r.after("selectedChange",e.bind(this._updateSelection,this))},_defRemoveChildFn:function(e){var t=e.child,n=e.index,r=this._items;t.get("focused")&&t.blur(),t.get("selected")&&t.set("selected",0),r.splice(n,1),t.removeTarget(this),t._oldParent=t.get("parent"),t._set("parent",null)},_add:function(t,r){var i,s,o;return n.isArray(t)?(i=[],e.each(t,function(e,t){s=this._add(e,r+t),s&&i.push(s)},this),i.length>0&&(o=i)):(e.instanceOf(t,e.Widget)?s=t:s=this._createChild(t),s&&this.fire("addChild",{child:s,index:r})&&(o=s)),o},add:function(){var t=this._add.apply(this,arguments),r=t?n.isArray(t)?t:[t]:[];return new e.ArrayList(r)},remove:function(e){var t=this._items[e],n;return t&&this.fire("removeChild",{child:t,index:e})&&(n=t),n},removeAll:function(){var t=[],n;return e.each(this._items.concat(),function(){n=this.remove(0),n&&t.push(n)},this),new e.ArrayList(t)},selectChild:function(e){this.item(e).set("selected",1)},selectAll:function(){this.set("selected",1)},deselectAll:function(){this.set("selected",0)},_uiAddChild:function(e,t){e.render(t);var n=e.get("boundingBox"),s,o=e.next(!1),u;o&&o.get(r)?(s=o.get(i),s.insert(n,"before")):(u=e.previous(!1),u&&u.get(r)?(s=u.get(i),s.insert(n,"after")):t.contains(n)||t.appendChild(n))},_uiRemoveChild:function(e){e.get("boundingBox").remove()},_afterAddChild:function(e){var t=e.child;t.get("parent")==this&&this._uiAddChild(t,this._childrenContainer)},_afterRemoveChild:function(e){var t=e.child;t._oldParent==this&&this._uiRemoveChild(t)},_bindUIParent:function(){this.after("addChild",this._afterAddChild),this.after("removeChild",this._afterRemoveChild)},_renderChildren:function(){var e=this._childrenContainer||this.get("contentBox");this._childrenContainer=e,this.each(function(t){t.render(e)})},_destroyChildren:function(){this._hDestroyChild.detach(),this.each(function(e){e.destroy()})}},e.augment(s,e.ArrayList),e.WidgetParent=s},"3.14.0",{requires:["arraylist","base-build","widget"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-child",function(e,t){function r(){e.after(this._syncUIChild,this,"syncUI"),e.after(this._bindUIChild,this,"bindUI")}var n=e.Lang;r.ATTRS={selected:{value:0,validator:n.isNumber},index:{readOnly:!0,getter:function(){var e=this.get("parent"),t=-1;return e&&(t=e.indexOf(this)),t}},parent:{readOnly:!0},depth:{readOnly:!0,getter:function(){var e=this.get("parent"),t=this.get("root"),n=-1;while(e){n+=1;if(e==t)break;e=e.get("parent")}return n}},root:{readOnly:!0,getter:function(){var t=function(n){var r=n.get("parent"),i=n.ROOT_TYPE,s=r;return i&&(s=r&&e.instanceOf(r,i)),s?t(r):n};return t(this)}}},r.prototype={ROOT_TYPE:null,_getUIEventNode:function(){var e=this.get("root"),t;return e&&(t=e.get("boundingBox")),t},next:function(e){var t=this.get("parent"),n;return t&&(n=t.item(this.get("index")+1)),!n&&e&&(n=t.item(0)),n},previous:function(e){var t=this.get("parent"),n=this.get("index"),r;return t&&n>0&&(r=t.item([n-1])),!r&&e&&(r=t.item(t.size()-1)),r},remove:function(t){var r,i;return n.isNumber(t)?i=e.WidgetParent.prototype.remove.apply(this,arguments):(r=this.get("parent"),r&&(i=r.remove(this.get("index")))),i},isRoot:function(){return this==this.get("root")},ancestor:function(e){var t=this.get("root"),n;if(this.get("depth")>e){n=this.get("parent");while(n!=t&&n.get("depth")>e)n=n.get("parent")}return n},_uiSetChildSelected:function(e){var t=this.get("boundingBox"),n=this.getClassName("selected");e===0?t.removeClass(n):t.addClass(n)},_afterChildSelectedChange:function(e){this._uiSetChildSelected(e.newVal)},_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"))},_bindUIChild:function(){this.after("selectedChange",this._afterChildSelectedChange)}},e.WidgetChild=r},"3.14.0",{requires:["base-build","widget"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("tabview-base",function(e,t){var n=e.ClassNameManager.getClassName,r="tabview",i="tab",s="panel",o="selected",u={},a=".",f=function(){this.init.apply(this,arguments)};f.NAME="tabviewBase",f._classNames={tabview:n(r),tabviewPanel:n(r,s),tabviewList:n(r,"list"),tab:n(i),tabLabel:n(i,"label"),tabPanel:n(i,s),selectedTab:n(i,o),selectedPanel:n(i,s,o)},f._queries={tabview:a+f._classNames.tabview,tabviewList:"> ul",tab:"> ul > li",tabLabel:"> ul > li > a",tabviewPanel:"> div",tabPanel:"> div > div",selectedTab:"> ul > "+a+f._classNames.selectedTab,selectedPanel:"> div "+a+f._classNames.selectedPanel},e.mix(f.prototype,{init:function(t){t=t||u,this._node=t.host||e.one(t.node),this.refresh()},initClassNames:function(t){var n=e.TabviewBase._classNames;e.Object.each(e.TabviewBase._queries,function(e,r){if(n[r]){var i=this.all(e);t!==undefined&&(i=i.item(t)),i&&i.addClass(n[r])}},this._node),this._node.addClass(n.tabview)},_select:function(t){var n=e.TabviewBase._classNames,r=e.TabviewBase._queries,i=this._node,s=i.one(r.selectedTab),o=i.one(r.selectedPanel),u=i.all(r.tab).item(t),a=i.all(r.tabPanel).item(t);s&&s.removeClass(n.selectedTab),o&&o.removeClass(n.selectedPanel),u&&u.addClass(n.selectedTab),a&&a.addClass(n.selectedPanel)},initState:function(){var t=e.TabviewBase._queries,n=this._node,r=n.one(t.selectedTab),i=r?n.all(t.tab).indexOf(r):0;this._select(i)},_scrubTextNodes:function(){this._node.one(e.TabviewBase._queries.tabviewList).get("childNodes").each(function(e){e.get("nodeType")===3&&e.remove()})},refresh:function(){this._scrubTextNodes(),this.initClassNames(),this.initState(),this.initEvents()},tabEventName:"click",initEvents:function(){this._node.delegate(this.tabEventName,this.onTabEvent,e.TabviewBase._queries.tab,this)},onTabEvent:function(t){t.preventDefault(),this._select(this._node.all(e.TabviewBase._queries.tab).indexOf(t.currentTarget))},destroy:function(){this._node.detach(this.tabEventName)}}),e.TabviewBase=f},"3.14.0",{requires:["node-event-delegate","classnamemanager"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("event-simulate",function(e,t){(function(){function d(t,u,a,f,l,c,h,p,d,v,m){t||e.error("simulateKeyEvent(): Invalid target.");if(r(u)){u=u.toLowerCase();switch(u){case"textevent":u="keypress";break;case"keyup":case"keydown":case"keypress":break;default:e.error("simulateKeyEvent(): Event type '"+u+"' not supported.")}}else e.error("simulateKeyEvent(): Event type must be a string.");i(a)||(a=!0),i(f)||(f=!0),s(l)||(l=e.config.win),i(c)||(c=!1),i(h)||(h=!1),i(p)||(p=!1),i(d)||(d=!1),o(v)||(v=0),o(m)||(m=0);var g=null;if(n(e.config.doc.createEvent)){try{g=e.config.doc.createEvent("KeyEvents"),g.initKeyEvent(u,a,f,l,c,h,p,d,v,m)}catch(y){try{g=e.config.doc.createEvent("Events")}catch(b){g=e.config.doc.createEvent("UIEvents")}finally{g.initEvent(u,a,f),g.view=l,g.altKey=h,g.ctrlKey=c,g.shiftKey=p,g.metaKey=d,g.keyCode=v,g.charCode=m}}t.dispatchEvent(g)}else s(e.config.doc.createEventObject)?(g=e.config.doc.createEventObject(),g.bubbles=a,g.cancelable=f,g.view=l,g.ctrlKey=c,g.altKey=h,g.shiftKey=p,g.metaKey=d,g.keyCode=m>0?m:v,t.fireEvent("on"+u,g)):e.error("simulateKeyEvent(): No event simulation framework present.")}function v(t,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){t||e.error("simulateMouseEvent(): Invalid target."),r(f)?!u[f.toLowerCase()]&&!a[f]&&e.error("simulateMouseEvent(): Event type '"+f+"' not supported."):e.error("simulateMouseEvent(): Event type must be a string."),i(l)||(l=!0),i(c)||(c=f!=="mousemove"),s(h)||(h=e.config.win),o(p)||(p=1),o(d)||(d=0),o(v)||(v=0),o(m)||(m=0),o(g)||(g=0),i(y)||(y=!1),i(b)||(b=!1),i(w)||(w=!1),i(E)||(E=!1),o(S)||(S=0),x=x||null;var T=null;if(n(e.config.doc.createEvent))T=e.config.doc.createEvent("MouseEvents"),T.initMouseEvent?T.initMouseEvent(f,l,c,h,p,d,v,m,g,y,b,w,E,S,x):(T=e.config.doc.createEvent("UIEvents"),T.initEvent(f,l,c),T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w,T.button=S,T.relatedTarget=x),x&&!T.relatedTarget&&(f==="mouseout"?T.toElement=x:f==="mouseover"&&(T.fromElement=x)),t.dispatchEvent(T);else if(s(e.config.doc.createEventObject)){T=e.config.doc.createEventObject(),T.bubbles=l,T.cancelable=c,T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w;switch(S){case 0:T.button=1;break;case 1:T.button=4;break;case 2:break;default:T.button=0}T.relatedTarget=x,t.fireEvent("on"+f,T)}else e.error("simulateMouseEvent(): No event simulation framework present.")}function m(t,u,a,f,h,p){t||e.error("simulateUIEvent(): Invalid target."),r(u)?(u=u.toLowerCase(),l[u]||e.error("simulateUIEvent(): Event type '"+u+"' not supported.")):e.error("simulateUIEvent(): Event type must be a string.");var d=null;i(a)||(a=u in c),i(f)||(f=u==="submit"),s(h)||(h=e.config.win),o(p)||(p=1),n(e.config.doc.createEvent)?(d=e.config.doc.createEvent("UIEvents"),d.initUIEvent(u,a,f,h,p),t.dispatchEvent(d)):s(e.config.doc.createEventObject)?(d=e.config.doc.createEventObject(),d.bubbles=a,d.cancelable=f,d.view=h,d.detail=p,t.fireEvent("on"+u,d)):e.error("simulateUIEvent(): No event simulation framework present.")}function g(t,n,r,i,s,o,u,a,f,l,c,h,d,v,m,g){var y;(!e.UA.ios||e.UA.ios<2)&&e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),t||e.error("simulateGestureEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),p[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateGestureEvent(): Event type must be a string."),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=!0),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=2),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(m)||(m=1),e.Lang.isNumber(g)||(g=0),y=e.config.doc.createEvent("GestureEvent"),y.initGestureEvent(n,r,i,s,o,u,a,f,l,c,h,d,v,t,m,g),t.dispatchEvent(y)}function y(t,n,r,i,s,o,u,a,f,l,c,p,d,v,m,g,y,b,w){var E;t||e.error("simulateTouchEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),h[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateTouchEvent(): Event type must be a string."),n==="touchstart"||n==="touchmove"?m.length===0&&e.error("simulateTouchEvent(): No touch object in touches"):n==="touchend"&&y.length===0&&e.error("simulateTouchEvent(): No touch object in changedTouches"),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=n!=="touchcancel"),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=1),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(p)||(p=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(b)||(b=1),e.Lang.isNumber(w)||(w=0),e.Lang.isFunction(e.config.doc.createEvent)?(e.UA.android?e.UA.android<4?(E=e.config.doc.createEvent("MouseEvents"),E.initMouseEvent(n,r,i,s,o,u,a,f,l,c,p,d,v,0,t),E.touches=m,E.targetTouches=g,E.changedTouches=y):(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(m,g,y,n,s,u,a,f,l,c,p,d,v)):e.UA.ios?e.UA.ios>=2?(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(n,r,i,s,o,u,a,f,l,c,p,d,v,m,g,y,b,w)):e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+e.UA.ios+"."):e.error("simulateTouchEvent(): Not supported agent yet, "+e.UA.userAgent),t.dispatchEvent(E)):e.error("simulateTouchEvent(): No event simulation framework present.")}var t=e.Lang,n=t.isFunction,r=t.isString,i=t.isBoolean,s=t.isObject,o=t.isNumber,u={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},a={MSPointerOver:1,MSPointerOut:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1},f={keydown:1,keyup:1,keypress:1},l={submit:1,blur:1,change:1,focus:1,resize:1,scroll:1,select:1},c={scroll:1,resize:1,reset:1,submit:1,change:1,select
:1,error:1,abort:1},h={touchstart:1,touchmove:1,touchend:1,touchcancel:1},p={gesturestart:1,gesturechange:1,gestureend:1};e.mix(c,u),e.mix(c,f),e.mix(c,h),e.Event.simulate=function(t,n,r){r=r||{},u[n]||a[n]?v(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget):f[n]?d(t,n,r.bubbles,r.cancelable,r.view,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode):l[n]?m(t,n,r.bubbles,r.cancelable,r.view,r.detail):h[n]?e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6)?y(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.touches,r.targetTouches,r.changedTouches,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated. Use gesture-simulate module instead."):e.UA.ios&&e.UA.ios>=2&&p[n]?g(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated.")}})()},"3.14.0",{requires:["event-base"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("gesture-simulate",function(e,t){function T(n){n||e.error(t+": invalid target node"),this.node=n,this.target=e.Node.getDOMNode(n);var r=this.node.getXY(),i=this._getDims();a=r[0]+i[0]/2,f=r[1]+i[1]/2}var t="gesture-simulate",n=e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6),r={tap:1,doubletap:1,press:1,move:1,flick:1,pinch:1,rotate:1},i={touchstart:1,touchmove:1,touchend:1,touchcancel:1},s=e.config.doc,o,u=20,a,f,l={HOLD_TAP:10,DELAY_TAP:10,HOLD_PRESS:3e3,MIN_HOLD_PRESS:1e3,MAX_HOLD_PRESS:6e4,DISTANCE_MOVE:200,DURATION_MOVE:1e3,MAX_DURATION_MOVE:5e3,MIN_VELOCITY_FLICK:1.3,DISTANCE_FLICK:200,DURATION_FLICK:1e3,MAX_DURATION_FLICK:5e3,DURATION_PINCH:1e3},c="touchstart",h="touchmove",p="touchend",d="gesturestart",v="gesturechange",m="gestureend",g="mouseup",y="mousemove",b="mousedown",w="click",E="dblclick",S="x",x="y";T.prototype={_toRadian:function(e){return e*(Math.PI/180)},_getDims:function(){var e,t,n;return this.target.getBoundingClientRect?(e=this.target.getBoundingClientRect(),"height"in e?n=e.height:n=Math.abs(e.bottom-e.top),"width"in e?t=e.width:t=Math.abs(e.right-e.left)):(e=this.node.get("region"),t=e.width,n=e.height),[t,n]},_calculateDefaultPoint:function(t){var n;return!e.Lang.isArray(t)||t.length===0?t=[a,f]:(t.length==1&&(n=this._getDims[1],t[1]=n/2),t[0]=this.node.getX()+t[0],t[1]=this.node.getY()+t[1]),t},rotate:function(n,r,i,s,o,u,a){var f,l=i,c=s;if(!e.Lang.isNumber(l)||!e.Lang.isNumber(c)||l<0||c<0)f=this.target.offsetWidth<this.target.offsetHeight?this.target.offsetWidth/4:this.target.offsetHeight/4,l=f,c=f;e.Lang.isNumber(a)||e.error(t+"Invalid rotation detected."),this.pinch(n,r,l,c,o,u,a)},pinch:function(n,r,i,s,o,a,f){var g,y,b=u,w,E=0,S=i,x=s,T,N,C,k,L,A,O,M,_,D={start:[],end:[]},P={start:[],end:[]},H,B;r=this._calculateDefaultPoint(r),(!e.Lang.isNumber(S)||!e.Lang.isNumber(x)||S<0||x<0)&&e.error(t+"Invalid startRadius and endRadius detected.");if(!e.Lang.isNumber(o)||o<=0)o=l.DURATION_PINCH;if(!e.Lang.isNumber(a))a=0;else{a%=360;while(a<0)a+=360}e.Lang.isNumber(f)||(f=0),e.AsyncQueue.defaults.timeout=b,g=new e.AsyncQueue,N=r[0],C=r[1],O=a,M=a+f,D.start=[N+S*Math.sin(this._toRadian(O)),C-S*Math.cos(this._toRadian(O))],D.end=[N+x*Math.sin(this._toRadian(M)),C-x*Math.cos(this._toRadian(M))],P.start=[N-S*Math.sin(this._toRadian(O)),C+S*Math.cos(this._toRadian(O))],P.end=[N-x*Math.sin(this._toRadian(M)),C+x*Math.cos(this._toRadian(M))],k=1,L=s/i,g.add({fn:function(){var t,n,r,i;t={pageX:D.start[0],pageY:D.start[1],clientX:D.start[0],clientY:D.start[1]},n={pageX:P.start[0],pageY:P.start[1],clientX:P.start[0],clientY:P.start[1]},i=this._createTouchList([e.merge({identifier:E++},t),e.merge({identifier:E++},n)]),r={pageX:(D.start[0]+P.start[0])/2,pageY:(D.start[0]+P.start[1])/2,clientX:(D.start[0]+P.start[0])/2,clientY:(D.start[0]+P.start[1])/2},this._simulateEvent(this.target,c,e.merge({touches:i,targetTouches:i,changedTouches:i,scale:k,rotation:O},r)),e.UA.ios>=2&&this._simulateEvent(this.target,d,e.merge({scale:k,rotation:O},r))},timeout:0,context:this}),H=Math.floor(o/b),T=(x-S)/H,A=(L-k)/H,_=(M-O)/H,B=function(t){var n=S+T*t,r=N+n*Math.sin(this._toRadian(O+_*t)),i=C-n*Math.cos(this._toRadian(O+_*t)),s=N-n*Math.sin(this._toRadian(O+_*t)),o=C+n*Math.cos(this._toRadian(O+_*t)),u=(r+s)/2,a=(i+o)/2,f,l,c,p;f={pageX:r,pageY:i,clientX:r,clientY:i},l={pageX:s,pageY:o,clientX:s,clientY:o},p=this._createTouchList([e.merge({identifier:E++},f),e.merge({identifier:E++},l)]),c={pageX:u,pageY:a,clientX:u,clientY:a},this._simulateEvent(this.target,h,e.merge({touches:p,targetTouches:p,changedTouches:p,scale:k+A*t,rotation:O+_*t},c)),e.UA.ios>=2&&this._simulateEvent(this.target,v,e.merge({scale:k+A*t,rotation:O+_*t},c))};for(y=0;y<H;y++)g.add({fn:B,args:[y],context:this});g.add({fn:function(){var t=this._getEmptyTouchList(),n,r,i,s;n={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},r={pageX:P.end[0],pageY:P.end[1],clientX:P.end[0],clientY:P.end[1]},s=this._createTouchList([e.merge({identifier:E++},n),e.merge({identifier:E++},r)]),i={pageX:(D.end[0]+P.end[0])/2,pageY:(D.end[0]+P.end[1])/2,clientX:(D.end[0]+P.end[0])/2,clientY:(D.end[0]+P.end[1])/2},e.UA.ios>=2&&this._simulateEvent(this.target,m,e.merge({scale:L,rotation:M},i)),this._simulateEvent(this.target,p,e.merge({touches:t,targetTouches:t,changedTouches:s,scale:L,rotation:M},i))},context:this}),n&&e.Lang.isFunction(n)&&g.add({fn:n,context:this.node}),g.run()},tap:function(t,r,i,s,o){var u=new e.AsyncQueue,a=this._getEmptyTouchList(),f,h,d,v,m;r=this._calculateDefaultPoint(r);if(!e.Lang.isNumber(i)||i<1)i=1;e.Lang.isNumber(s)||(s=l.HOLD_TAP),e.Lang.isNumber(o)||(o=l.DELAY_TAP),h={pageX:r[0],pageY:r[1],clientX:r[0],clientY:r[1]},f=this._createTouchList([e.merge({identifier:0},h)]),v=function(){this._simulateEvent(this.target,c,e.merge({touches:f,targetTouches:f,changedTouches:f},h))},m=function(){this._simulateEvent(this.target,p,e.merge({touches:a,targetTouches:a,changedTouches:f},h))};for(d=0;d<i;d++)u.add({fn:v,context:this,timeout:d===0?0:o}),u.add({fn:m,context:this,timeout:s});i>1&&!n&&u.add({fn:function(){this._simulateEvent(this.target,E,h)},context:this}),t&&e.Lang.isFunction(t)&&u.add({fn:t,context:this.node}),u.run()},flick:function(n,r,i,s,o){var u;r=this._calculateDefaultPoint(r),e.Lang.isString(i)?(i=i.toLowerCase(),i!==S&&i!==x&&e.error(t+"(flick): Only x or y axis allowed")):i=S,e.Lang.isNumber(s)||(s=l.DISTANCE_FLICK),e.Lang.isNumber(o)?o>l.MAX_DURATION_FLICK&&(o=l.MAX_DURATION_FLICK):o=l.DURATION_FLICK,Math.abs(s)/o<l.MIN_VELOCITY_FLICK&&(o=Math.abs(s)/l.MIN_VELOCITY_FLICK),u={start:e.clone(r),end:[i===S?r[0]+s:r[0],i===x?r[1]+s:r[1]]},this._move(n,u,o)},move:function(t,n,r){var i;e.Lang.isObject(n)?(e.Lang.isArray(n.point)?n.point=this._calculateDefaultPoint(n.point):n.point=this._calculateDefaultPoint([]),e.Lang.isNumber(n.xdist)||(n.xdist=l.DISTANCE_MOVE),e.Lang.isNumber(n.ydist)||(n.ydist=0)):n={point:this._calculateDefaultPoint([]),xdist:l.
DISTANCE_MOVE,ydist:0},e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,i={start:e.clone(n.point),end:[n.point[0]+n.xdist,n.point[1]+n.ydist]},this._move(t,i,r)},_move:function(t,n,r){var i,s,o=u,d,v,m,g=0,y;e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,e.Lang.isObject(n)?(e.Lang.isArray(n.start)||(n.start=[a,f]),e.Lang.isArray(n.end)||(n.end=[a+l.DISTANCE_MOVE,f])):n={start:[a,f],end:[a+l.DISTANCE_MOVE,f]},e.AsyncQueue.defaults.timeout=o,i=new e.AsyncQueue,i.add({fn:function(){var t={pageX:n.start[0],pageY:n.start[1],clientX:n.start[0],clientY:n.start[1]},r=this._createTouchList([e.merge({identifier:g++},t)]);this._simulateEvent(this.target,c,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),d=Math.floor(r/o),v=(n.end[0]-n.start[0])/d,m=(n.end[1]-n.start[1])/d,y=function(t){var r=n.start[0]+v*t,i=n.start[1]+m*t,s={pageX:r,pageY:i,clientX:r,clientY:i},o=this._createTouchList([e.merge({identifier:g++},s)]);this._simulateEvent(this.target,h,e.merge({touches:o,targetTouches:o,changedTouches:o},s))};for(s=0;s<d;s++)i.add({fn:y,args:[s],context:this});i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,h,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._getEmptyTouchList(),i=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,p,e.merge({touches:r,targetTouches:r,changedTouches:i},t))},context:this}),t&&e.Lang.isFunction(t)&&i.add({fn:t,context:this.node}),i.run()},_getEmptyTouchList:function(){return o||(o=this._createTouchList([])),o},_createTouchList:function(n){var r=[],i,o=this;return!!n&&e.Lang.isArray(n)?e.UA.android&&e.UA.android>=4||e.UA.ios&&e.UA.ios>=2?(e.each(n,function(t){t.identifier||(t.identifier=0),t.pageX||(t.pageX=0),t.pageY||(t.pageY=0),t.screenX||(t.screenX=0),t.screenY||(t.screenY=0),r.push(s.createTouch(e.config.win,o.target,t.identifier,t.pageX,t.pageY,t.screenX,t.screenY))}),i=s.createTouchList.apply(s,r)):e.UA.ios&&e.UA.ios<2?e.error(t+": No touch event simulation framework present."):(i=[],e.each(n,function(e){e.identifier||(e.identifier=0),e.clientX||(e.clientX=0),e.clientY||(e.clientY=0),e.pageX||(e.pageX=0),e.pageY||(e.pageY=0),e.screenX||(e.screenX=0),e.screenY||(e.screenY=0),i.push({target:o.target,identifier:e.identifier,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}),i.item=function(e){return i[e]}):e.error(t+": Invalid touchPoints passed"),i},_simulateEvent:function(t,r,s){var o;i[r]?n?e.Event.simulate(t,r,s):this._isSingleTouch(s.touches,s.targetTouches,s.changedTouches)?(r={touchstart:b,touchmove:y,touchend:g}[r],s.button=0,s.relatedTarget=null,o=r===g?s.changedTouches:s.touches,s=e.mix(s,{screenX:o.item(0).screenX,screenY:o.item(0).screenY,clientX:o.item(0).clientX,clientY:o.item(0).clientY},!0),e.Event.simulate(t,r,s),r==g&&e.Event.simulate(t,w,s)):e.error("_simulateEvent(): Event '"+r+"' has multi touch objects that can't be simulated in your platform."):e.Event.simulate(t,r,s)},_isSingleTouch:function(e,t,n){return e&&e.length<=1&&t&&t.length<=1&&n&&n.length<=1}},e.GestureSimulation=T,e.GestureSimulation.defaults=l,e.GestureSimulation.GESTURES=r,e.Event.simulateGesture=function(n,i,s,o){n=e.one(n);var u=new e.GestureSimulation(n);i=i.toLowerCase(),!o&&e.Lang.isFunction(s)&&(o=s,s={}),s=s||{};if(r[i])switch(i){case"tap":u.tap(o,s.point,s.times,s.hold,s.delay);break;case"doubletap":u.tap(o,s.point,2);break;case"press":e.Lang.isNumber(s.hold)?s.hold<l.MIN_HOLD_PRESS?s.hold=l.MIN_HOLD_PRESS:s.hold>l.MAX_HOLD_PRESS&&(s.hold=l.MAX_HOLD_PRESS):s.hold=l.HOLD_PRESS,u.tap(o,s.point,1,s.hold);break;case"move":u.move(o,s.path,s.duration);break;case"flick":u.flick(o,s.point,s.axis,s.distance,s.duration);break;case"pinch":u.pinch(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation);break;case"rotate":u.rotate(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation)}else e.error(t+": Not a supported gesture simulation: "+i)}},"3.14.0",{requires:["async-queue","event-simulate","node-screen"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-event-simulate",function(e,t){e.Node.prototype.simulate=function(t,n){e.Event.simulate(e.Node.getDOMNode(this),t,n)},e.Node.prototype.simulateGesture=function(t,n,r){e.Event.simulateGesture(this,t,n,r)}},"3.14.0",{requires:["node-base","event-simulate","gesture-simulate"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-focusmanager",function(e,t){var n="activeDescendant",r="id",i="disabled",s="tabIndex",o="focused",u="focusClass",a="circular",f="UI",l="key",c=n+"Change",h="host",p={37:!0,38:!0,39:!0,40:!0},d={a:!0,button:!0,input:!0,object:!0},v=e.Lang,m=e.UA,g=function(){g.superclass.constructor.apply(this,arguments)};g.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(e){return this.get(h).all(e)}},activeDescendant:{setter:function(t){var n=v.isNumber,i=e.Attribute.INVALID_VALUE,s=this._descendantsMap,o=this._descendants,u,a,f;return n(t)?(u=t,a=u):t instanceof e.Node&&s?(u=s[t.get(r)],n(u)?a=u:a=i):a=i,o&&(f=o.item(u),f&&f.get("disabled")&&(a=i)),a}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},e.extend(g,e.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var t=this.get("descendants"),o={},u=-1,a,f=this.get(n),l,c,h=0;v.isUndefined(f)&&(f=-1);if(t){a=t.size();for(h=0;h<a;h++)l=t.item(h),u===-1&&!l.get(i)&&(u=h),f<0&&parseInt(l.getAttribute(s,2),10)===0&&(f=h),l&&l.set(s,-1),c=l.get(r),c||(c=e.guid(),l.set(r,c)),o[c]=h;f<0&&(f=0),l=t.item(f);if(!l||l.get(i))l=t.item(u),f=u;this._lastNodeIndex=a-1,this._descendants=t,this._descendantsMap=o,this.set(n,f),l&&l.set(s,0)}},_isDescendant:function(e){return e.get(r)in this._descendantsMap},_removeFocusClass:function(){var e=this._focusedNode,t=this.get(u),n;t&&(n=v.isString(t)?t:t.className),e&&n&&e.removeClass(n)},_detachKeyHandler:function(){var e=this._prevKeyHandler,t=this._nextKeyHandler;e&&e.detach(),t&&t.detach()},_preventScroll:function(e){p[e.keyCode]&&this._isDescendant(e.target)&&e.preventDefault()},_fireClick:function(e){var t=e.target,n=t.get("nodeName").toLowerCase();e.keyCode===13&&(!d[n]||n==="a"&&!t.getAttribute("href"))&&t.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var t=this.get("keys.next"),n=this.get("keys.previous"),r=this.get(h),i=this._eventHandlers;n&&(this._prevKeyHandler=e.on(l,e.bind(this._focusPrevious,this),r,n)),t&&(this._nextKeyHandler=e.on(l,e.bind(this._focusNext,this),r,t)),m.opera&&i.push(r.on("keypress",this._preventScroll,this)),m.opera||i.push(r.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var t=this._descendants,n,r,i;t&&t.size()&&(n=this._eventHandlers||[],r=this.get(h).get("ownerDocument"),n.length===0&&(n.push(r.on("focus",this._onDocFocus,this)),n.push(r.on("mousedown",this._onDocMouseDown,this)),n.push(this.after("keysChange",this._attachKeyHandler)),n.push(this.after("descendantsChange",this._initDescendants)),n.push(this.after(c,this._afterActiveDescendantChange)),i=this.after("focusedChange",e.bind(function(e){e.newVal&&(this._attachKeyHandler(),i.detach())},this)),n.push(i)),this._eventHandlers=n)},_onDocMouseDown:function(e){var t=this.get(h),n=e.target,r=t.contains(n),i,s=function(e){var n=!1;return e.compareTo(t)||(n=this._isDescendant(e)?e:s.call(this,e.get("parentNode"))),n};r&&(i=s.call(this,n),i?n=i:!i&&this.get(o)&&(this._set(o,!1),this._onDocFocus(e))),r&&this._isDescendant(n)?this.focus(n):m.webkit&&this.get(o)&&(!r||r&&!this._isDescendant(n))&&(this._set(o,!1),this._onDocFocus(e))},_onDocFocus:function(e){var t=this._focusTarget||e.target,n=this.get(o),r=this.get(u),i=this._focusedNode,s;this._focusTarget&&(this._focusTarget=null),this.get(h).contains(t)?(s=this._isDescendant(t),!n&&s?n=!0:n&&!s&&(n=!1)):n=!1,r&&(i&&(!i.compareTo(t)||!n)&&this._removeFocusClass(),s&&n&&(r.fn?(t=r.fn(t),t.addClass(r.className)):t.addClass(r),this._focusedNode=t)),this._set(o,n)},_focusNext:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r<=this._lastNodeIndex&&(r+=1,r===this._lastNodeIndex+1&&this.get(a)&&(r=0),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusNext(e,r):this.focus(r))),this._preventScroll(e)},_focusPrevious:function(e,t){var r=t||this.get(n),i;this._isDescendant(e.target)&&r>=0&&(r-=1,r===-1&&this.get(a)&&(r=this._lastNodeIndex),i=this._descendants.item(r),i&&(i.get("disabled")?this._focusPrevious(e,r):this.focus(r))),this._preventScroll(e)},_afterActiveDescendantChange:function(e){var t=this._descendants.item(e.prevVal);t&&t.set(s,-1),t=this._descendants.item(e.newVal),t&&t.set(s,0)},initializer:function(e){this.start()},destructor:function(){this.stop(),this.get(h).focusManager=null},focus:function(e){v.isUndefined(e)&&(e=this.get(n)),this.set(n,e,{src:f});var t=this._descendants.item(this.get(n));t&&(t.focus(),m.opera&&t.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=t))},blur:function(){var e;this.get(o)&&(e=this._descendants.item(this.get(n)),e&&(e.blur(),this._removeFocusClass()),this._set(o,!1,{src:f}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),g.NAME="nodeFocusManager",g.NS="focusManager",e.namespace("Plugin"),e.Plugin.NodeFocusManager=g},"3.14.0",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
/*
YUI 3.14.0 (build a01e97d)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("tabview",function(e,t){var n=".",r=e.Base.create("tabView",e.Widget,[e.WidgetParent],{_afterChildAdded:function(){this.get("contentBox").focusManager.refresh()},_defListNodeValueFn:function(){var t=e.Node.create(this.LIST_TEMPLATE);return t.addClass(e.TabviewBase._classNames.tabviewList),t},_defPanelNodeValueFn:function(){var t=e.Node.create(this.PANEL_TEMPLATE);return t.addClass(e.TabviewBase._classNames.tabviewPanel),t},_afterChildRemoved:function(e){var t=e.index,n=this.get("selection");n||(n=this.item(t-1)||this.item(0),n&&n.set("selected",1)),this.get("contentBox").focusManager.refresh()},_initAria:function(t){var n=t.one(e.TabviewBase._queries.tabviewList);n&&n.setAttrs({role:"tablist"})},bindUI:function(){this.get("contentBox").plug(e.Plugin.NodeFocusManager,{descendants:n+e.TabviewBase._classNames.tabLabel,keys:{next:"down:39",previous:"down:37"},circular:!0}),this.after("render",this._setDefSelection),this.after("addChild",this._afterChildAdded),this.after("removeChild",this._afterChildRemoved)},renderUI:function(){var e=this.get("contentBox");this._renderListBox(e),this._renderPanelBox(e),this._childrenContainer=this.get("listNode"),this._renderTabs(e),this._initAria(e)},_setDefSelection:function(){var e=this.get("selection")||this.item(0);this.some(function(t){if(t.get("selected"))return e=t,!0}),e&&(this.set("selection",e),e.set("selected",1))},_renderListBox:function(e){var t=this.get("listNode");t.inDoc()||e.append(t)},_renderPanelBox:function(e){var t=this.get("panelNode");t.inDoc()||e.append(t)},_renderTabs:function(t){var r=e.TabviewBase._classNames,i=e.TabviewBase._queries,s=t.all(i.tab),o=this.get("panelNode"),u=o?this.get("panelNode").get("children"):null,a=this;s&&(s.addClass(r.tab),t.all(i.tabLabel).addClass(r.tabLabel),t.all(i.tabPanel).addClass(r.tabPanel),s.each(function(e,t){var i=u?u.item(t):null;a.add({boundingBox:e,contentBox:e.one(n+r.tabLabel),panelNode:i})}))}},{ATTRS:{defaultChildType:{value:"Tab"},listNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabviewList),t},valueFn:"_defListNodeValueFn"},panelNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabviewPanel),t},valueFn:"_defPanelNodeValueFn"},tabIndex:{value:null}},HTML_PARSER:{listNode:function(t){return t.one(e.TabviewBase._queries.tabviewList)},panelNode:function(t){return t.one(e.TabviewBase._queries.tabviewPanel)}},LIST_TEMPLATE:"<ul></ul>",PANEL_TEMPLATE:"<div></div>"});r.prototype.LIST_TEMPLATE=r.LIST_TEMPLATE,r.prototype.PANEL_TEMPLATE=r.PANEL_TEMPLATE,e.TabView=r,e.Tab=e.Base.create("tab",e.Widget,[e.WidgetChild],{BOUNDING_TEMPLATE:"<li></li>",CONTENT_TEMPLATE:"<a></a>",PANEL_TEMPLATE:"<div></div>",_uiSetSelectedPanel:function(t){this.get("panelNode").toggleClass(e.TabviewBase._classNames.selectedPanel,t)},_afterTabSelectedChange:function(e){this._uiSetSelectedPanel(e.newVal)},_afterParentChange:function(e){e.newVal?this._add():this._remove()},_initAria:function(){var t=this.get("contentBox"),n=t.get("id"),r=this.get("panelNode");n||(n=e.guid(),t.set("id",n)),t.set("role","tab"),t.get("parentNode").set("role","presentation"),r.setAttrs({role:"tabpanel","aria-labelledby":n})},syncUI:function(){var t=e.TabviewBase._classNames;this.get("boundingBox").addClass(t.tab),this.get("contentBox").addClass(t.tabLabel),this.set("label",this.get("label")),this.set("content",this.get("content")),this._uiSetSelectedPanel(this.get("selected"))},bindUI:function(){this.after("selectedChange",this._afterTabSelectedChange),this.after("parentChange",this._afterParentChange)},renderUI:function(){this._renderPanel(),this._initAria()},_renderPanel:function(){this.get("parent").get("panelNode").appendChild(this.get("panelNode"))},_add:function(){var e=this.get("parent").get("contentBox"),t=e.get("listNode"),n=e.get("panelNode");t&&t.appendChild(this.get("boundingBox")),n&&n.appendChild(this.get("panelNode"))},_remove:function(){this.get("boundingBox").remove(),this.get("panelNode").remove()},_onActivate:function(e){e.target===this&&(e.domEvent.preventDefault(),e.target.set("selected",1))},initializer:function(){this.publish(this.get("triggerEvent"),{defaultFn:this._onActivate})},_defLabelGetter:function(){return this.get("contentBox").getHTML()},_defLabelSetter:function(e){var t=this.get("contentBox");return t.getHTML()!==e&&t.setHTML(e),e},_defContentSetter:function(e){var t=this.get("panelNode");return t.getHTML()!==e&&t.setHTML(e),e},_defContentGetter:function(){return this.get("panelNode").getHTML()},_defPanelNodeValueFn:function(){var t=e.TabviewBase._classNames,n=this.get("contentBox").get("href")||"",r=this.get("parent"),i=n.indexOf("#"),s;return n=n.substr(i),n.charAt(0)==="#"&&(s=e.one(n),s&&s.addClass(t.tabPanel)),!s&&r&&(s=r.get("panelNode").get("children").item(this.get("index"))),s||(s=e.Node.create(this.PANEL_TEMPLATE),s.addClass(t.tabPanel)),s}},{ATTRS:{triggerEvent:{value:"click"},label:{setter:"_defLabelSetter",getter:"_defLabelGetter"},content:{setter:"_defContentSetter",getter:"_defContentGetter"},panelNode:{setter:function(t){return t=e.one(t),t&&t.addClass(e.TabviewBase._classNames.tabPanel),t},valueFn:"_defPanelNodeValueFn"},tabIndex:{value:null,validator:"_validTabIndex"}},HTML_PARSER:{selected:function(){var t=this.get("boundingBox").hasClass(e.TabviewBase._classNames.selectedTab)?1:0;return t}}})},"3.14.0",{requires:["widget","widget-parent","widget-child","tabview-base","node-pluginhost","node-focusmanager"],skinnable:!0});

/* ads-moneyball.js 1763892 */ YUI.add("media-ads-moneyball",function(g){g.namespace("Media.Ads");var c="ad-noview",f="beacon",e="beacon-ts",a=1000,d=".yom-ad-moneyball li."+c,b=".yom-ad-moneyball-wrap";g.Media.Ads.MoneyBall={_scrollInfo:null,_initBeaconing:function(){var h=this,i=g.one("body"),j;if(i){i.plug(g.Plugin.ScrollInfo);j=this._scrollInfo=i.scrollInfo;g.log("initBeaconing","info","AdsMoneyBall");this._eventHandler=j.on("scroll",g.bind(this._beaconVisibleAds,this,true));this._beaconVisibleAds(true)}},_beaconVisibleAds:function(i){if(!this._scrollInfo){return}var j=+(new Date()),m=this._scrollInfo,k=this._fireRMXBeacon,h,l;if(!this._adViewMargin){h=g.one(d);this._adViewMargin=h?Math.round((-h.get("offsetHeight")/2)):0}m.getOffscreenNodes(d,this._adViewMargin).clearData(e);l=m.getOnscreenNodes(d,this._adViewMargin);l.each(function(o){var p=o.getData(e),n;if(p&&j-p>a){n=o.getData(f);k(n);o.removeClass(c);o.clearData(e)}else{if(!p){o.setData(e,j)}}});if(i&&!l.isEmpty()){this._beaconTimer=g.later(a+1,this,this._beaconVisibleAds,false)}if(!g.one(d)&&this._eventHandler){this._eventHandler.detach();delete this._scrollInfo}},_fireRMXBeacon:function(i){if(!i||typeof i!=="string"){g.log("Invlaid RMX beacon url");return}var h=new Image();h.src=i},_handleRMXBackFilled:function(r){var q=this,n=r.rmx_backfill_pos,h=r.rmx_config,m=0,p=new Array(),l=new Array(),o={};for(var j in n){pos_id=n[j][0];mb_patt=/(MB)([1-9])/g;result=mb_patt.exec(pos_id);if(result){pos_id="moneyball-wrap-"+result[2]}var i=g.one("#yom-ad-"+pos_id);if(i){g.log("Backfilled Pos Added:"+pos_id,"info","_handleRMXBackFilled");if(pos_id==="LREC"){if(h.bf_article_lrec){q._getRMXImageAds(h,q._renderMoneyBallAds,{pos:[pos_id]})}continue}l.push(pos_id);m+=(+n[j][1]);o.pos=pos_id;o.batch=n[j][1];o.index=(n[j][2]?n[j][2]:0);p.push(o)}}if(m>0){h.rmx_count=m;h.posBatchIndex=g.JSON.stringify(p);q._getMoneyBallAds(h,q._renderMoneyBallAds,{pos:l})}else{g.log("No Backfilled Pos","info","_handleRMXBackFilled")}},_getMoneyBallAds:function(h,o,j){var q=this,l="",i="4421334",p="",k=3,n="",m=window.location.href;if(h){i=(h.rmx_se)?h.rmx_se:i;k=(h.rmx_count)?h.rmx_count:k;l=(h.spaceid)?h.spaceid:l;n=(h.posBatchIndex)?h.posBatchIndex:n}if(YMEDIA_REQ_ATTR&&YMEDIA_REQ_ATTR.instr&&YMEDIA_REQ_ATTR.instr.request_id){p=YMEDIA_REQ_ATTR.instr.request_id}g.io("/_xhr/rmx-ad-moneyball/",{method:"GET",data:{rmx_count:k,rmx_se:i,ri:p,spaceid:l,rmx_pu:m,pos_info:n},"arguments":{self:q},on:{success:function(t,s,r){q._handleSuccess(s,o,j)},failure:q._handleFailure}})},_getRMXImageAds:function(h,n,i){var p=this,o="",l=window.location.href,k=(h.spaceid)?h.spaceid:k,j=(h.rmx_se_img)?h.rmx_se_img:"5049222",m;if(window.YMEDIA_REQ_ATTR&&window.YMEDIA_REQ_ATTR.instr&&window.YMEDIA_REQ_ATTR.instr.request_id){o=window.YMEDIA_REQ_ATTR.instr.request_id}g.io("/_xhr/rmx-ad/",{method:"GET",data:{rmx_count:1,rmx_se:j,rmx_cc:"STRM_IMG",ri:o,rmx_pu:l,spaceid:k,maxheight:"200",maxwidth:"300",markup:"true"},"arguments":{self:p},on:{success:function(s,r,q){p._handleSuccess(r,n,i)},failure:p._handleFailure}})},_handleSuccess:function(k,l,j){var i=this,h=(k.responseText)?g.JSON.parse(k.responseText):null;if(h&&h.html_markup){g.log("getMoneyBallAds successfully","info","_getMoneyBallAds");l(h.html_markup,j);if(!i._scrollInfo){i._initBeaconing()}else{i._beaconVisibleAds(true)}}else{g.log("No Moneyball html_markup returned","info","_getMoneyBallAds")}},_handleFailure:function(j,i){var h=i.response||i.responseText;g.log("Moneyball fetching failed: "+i.status+", Moneyball fetching response: "+h,"info","_getMoneyBallAds")},_renderMoneyBallAds:function(m,h){var n=h.pos;g.log("renderMoneyBallAds for pos:"+n,"info","_renderMoneyBallAds");for(var i in n){pos_id=n[i];var l=g.one("#yom-ad-"+pos_id);if(l&&m[i]){node=g.Node.create(m[i]);node.setAttribute("data-pos",pos_id);if(pos_id.substring(0,9)==="moneyball"){l.replace(node)}else{l.insert(node,"after")}}}var j=g.all(b);if(j){j.setStyle("display","none")}}}},"1.0.0",{requires:["node","event","node-scroll-info"]});